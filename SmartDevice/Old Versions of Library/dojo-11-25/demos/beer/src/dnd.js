//>>built
define("demos/beer/src/dnd",["dojo","dijit","dojox","dojo/require!dojo/dnd/Moveable"],function(_1,_2,_3){_1.provide("demos.beer.src.dnd");_1.require("dojo.dnd.Moveable");_1.declare("beer.MadeDnd",null,{constructor:function(_4){this.node=_1.byId(_4);_1.setSelectable(this.node,false);_1.connect(this.node,"onmousedown",this,"_dragStart");this._size=_1.marginBox(this.node);this._listeners=[];},_dragStart:function(e){this.avatar=_1.place(_1.clone(this.node),_1.body());var xy=this._origxy=_1.position(this.node);_1.style(this.avatar,{position:"absolute",top:xy.y+"px",left:xy.x+"px"});this._listeners.push(_1.connect(_1.global,"onmouseup",this,"_dragStop"),_1.connect(_1.global,"onmousemove",this,"_moving"));},_moving:function(e){var s=this.avatar.style,mb=this._size;s.top=e.pageY-(mb.h/2)+"px";s.left=e.pageX-(mb.w/2)+"px";},_dragStop:function(e){_1.forEach(this._listeners,_1.disconnect,_1);this._listeners=[];if(this.overTarget(e)){new _1.dnd.Moveable(this.avatar);}else{_1.animateProperty({node:this.avatar,onEnd:function(n){_1.destroy(n);},properties:{opacity:0,top:this._origxy.y,left:this._origxy.x},duration:175}).play(10);}},overTarget:function(e){return true;}});beer.targets=[];_1.declare("beer.DndTarget",null,{constructor:function(_5,_6){this.node=_1.byId(_5);this.pos();beer.targets.push(this);},pos:function(){this.coords=_1.coords(this.node);}});_1.addOnLoad(function(){_1.connect(_1.global,"resize",function(){_1.forEach(beer.targets,"item.pos()");});});});