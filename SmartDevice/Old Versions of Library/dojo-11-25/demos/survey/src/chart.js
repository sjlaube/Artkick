//>>built
define("demos/survey/src/chart",["dojo","dijit","dojox","dojo/require!dojox/charting/Chart2D,dojox/charting/themes/PlotKit/blue,dojox/charting/themes/PlotKit/cyan,dojox/charting/themes/PlotKit/green"],function(_1,_2,_3){_1.provide("demos.survey.src.chart");_1.require("dojox.charting.Chart2D");_1.require("dojox.charting.themes.PlotKit.blue");_1.require("dojox.charting.themes.PlotKit.cyan");_1.require("dojox.charting.themes.PlotKit.green");var _4=null;var _5=function(){_4=new _3.charting.Chart2D("chart");_4.addPlot("default",{type:"Bars"});};var _6=function(){_1.xhrGet({url:"src/results.php",handleAs:"json",load:function(_7,_8){_9(_7);}});};var _a=function(_b){var i=0;var _c=[{value:0,text:""}];var _d=[];for(var _e in _b.data){_d.push((_b.data[_e]/_b.total)*100);_c.push({value:++i,text:_e});}_c.push({value:++i,text:""});return {toolkits:_c,usage:_d};};var _f=null;var _9=function(_10){var _11=_a(_10);var _12=Math.floor(_11.toolkits.length/10)||1;if(_12==1){_12++;}_1.style("chart","height",_12*180+"px");if(!_4){_5();}var c=_4;c.addAxis("x",{fixLower:"major",fixUpper:"major",includeZero:true,major:50,minor:25,labels:[{value:0,text:"< 1%"},{value:50,text:"50%"},{value:100,text:"100%"}]});c.addAxis("y",{vertical:true,fixLower:"major",major:1,minor:1,fixUpper:"major",natural:false,labels:_11.toolkits});c.addSeries("Toolkits",_11.usage,{stroke:{color:"green"},fill:"lightgreen"});c.render();_1.query(".chartHolder").style("visibility","visible");if(!_f){_f=_1.connect(window,"onresize",function(){c.resize();});}};var _13=function(_14){var _15=_a(_14);c=_4;c.updateSeries("Toolkits",_15.usage,{stroke:{color:"green"},fill:"lightgreen"});c.render();};});