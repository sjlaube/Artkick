//>>built
require({cache:{"url:dojox/calendar/templates/ColumnView.html":"<div data-dojo-attach-events=\"keydown:_onKeyDown\">\n\t\n\t<div data-dojo-attach-point=\"header\" class=\"dojoxCalendarHeader\">\n\t\t<div class=\"dojoxCalendarYearColumnHeader\" data-dojo-attach-point=\"yearColumnHeader\">\n\t\t\t<table cellspacing=\"0\" cellpadding=\"0\"><tr><td><span data-dojo-attach-point=\"yearColumnHeaderContent\"></span></td></tr></table>\t\t\n\t\t</div>\n\t\t<div data-dojo-attach-point=\"columnHeader\" class=\"dojoxCalendarColumnHeader\">\n\t\t\t<table data-dojo-attach-point=\"columnHeaderTable\" class=\"dojoxCalendarColumnHeaderTable\" cellpadding=\"0\" cellspacing=\"0\"></table>\n\t\t</div>\n\t</div>\n\t\n\t<div data-dojo-attach-point=\"secondarySheetNode\"></div>\n\t\n\t<div data-dojo-attach-point=\"subHeader\" class=\"dojoxCalendarSubHeader\">\n\t\t<div class=\"dojoxCalendarSubRowHeader\">\n\t\t\t<table cellspacing=\"0\" cellpadding=\"0\"><tr><td></td></tr></table>\t\t\n\t\t</div>\n\t\t<div data-dojo-attach-point=\"subColumnHeader\" class=\"dojoxCalendarSubColumnHeader\">\n\t\t\t<table data-dojo-attach-point=\"subColumnHeaderTable\" class=\"dojoxCalendarSubColumnHeaderTable\" cellpadding=\"0\" cellspacing=\"0\"></table>\n\t\t</div>\n\t</div>\n\t\n\t<div data-dojo-attach-point=\"scrollContainer\" class=\"dojoxCalendarScrollContainer\">\n\t\t<div data-dojo-attach-point=\"sheetContainer\" style=\"position:relative;left:0;right:0;margin:0;padding:0\">\n\t\t\t<div data-dojo-attach-point=\"rowHeader\" class=\"dojoxCalendarRowHeader\">\n\t\t\t\t<table data-dojo-attach-point=\"rowHeaderTable\" class=\"dojoxCalendarRowHeaderTable\" cellpadding=\"0\" cellspacing=\"0\"></table>\n\t\t\t</div>\n\t\t\t<div data-dojo-attach-point=\"grid\" class=\"dojoxCalendarGrid\">\n\t\t\t\t<table data-dojo-attach-point=\"gridTable\" class=\"dojoxCalendarGridTable\" cellpadding=\"0\" cellspacing=\"0\" style=\"width:100%\"></table>\n\t\t\t</div>\n\t\t\t<div data-dojo-attach-point=\"itemContainer\" class=\"dojoxCalendarContainer\" data-dojo-attach-event=\"mousedown:_onGridMouseDown,mouseup:_onGridMouseUp,ondblclick:_onGridDoubleClick,touchstart:_onGridTouchStart,touchmove:_onGridTouchMove,touchend:_onGridTouchEnd\">\n\t\t\t\t<table data-dojo-attach-point=\"itemContainerTable\" class=\"dojoxCalendarContainerTable\" cellpadding=\"0\" cellspacing=\"0\" style=\"width:100%\"></table>\n\t\t\t</div>\n\t\t</div> \n\t</div>\n\t\n\t<div data-dojo-attach-point=\"vScrollBar\" class=\"dojoxCalendarVScrollBar\">\n\t\t<div data-dojo-attach-point=\"vScrollBarContent\" style=\"visibility:hidden;position:relative;width:1px;height:1px;\" ></div>\n\t</div>\n\t\n</div>\n"}});define("dojox/calendar/SimpleColumnView",["./ViewBase","dijit/_TemplatedMixin","./_VerticalScrollBarBase","dojo/text!./templates/ColumnView.html","dojo/_base/declare","dojo/_base/event","dojo/_base/lang","dojo/_base/array","dojo/_base/sniff","dojo/_base/fx","dojo/_base/html","dojo/on","dojo/dom","dojo/dom-class","dojo/dom-style","dojo/dom-geometry","dojo/dom-construct","dojo/mouse","dojo/query","dojox/html/metrics"],function(_1,_2,_3,_4,_5,_6,_7,_8,_9,fx,_a,on,_b,_c,_d,_e,_f,_10,_11,_12){return _5("dojox.calendar.SimpleColumnView",[_1,_2],{baseClass:"dojoxCalendarColumnView",templateString:_4,viewKind:"columns",_setTabIndexAttr:"domNode",renderData:null,startDate:null,columnCount:7,subColumns:null,minHours:8,maxHours:18,hourSize:100,timeSlotDuration:15,rowHeaderGridSlotDuration:60,rowHeaderLabelSlotDuration:60,rowHeaderLabelOffset:2,rowHeaderFirstLabelOffset:2,verticalRenderer:null,percentOverlap:70,horizontalGap:4,_showSecondarySheet:false,_columnHeaderHandlers:null,constructor:function(){this.invalidatingProperties=["columnCount","startDate","minHours","maxHours","hourSize","verticalRenderer","rowHeaderTimePattern","columnHeaderDatePattern","timeSlotDuration","rowHeaderGridSlotDuration","rowHeaderLabelSlotDuration","rowHeaderLabelOffset","rowHeaderFirstLabelOffset","percentOverlap","horizontalGap","scrollBarRTLPosition","itemToRendererKindFunc","layoutPriorityFunction","formatItemTimeFunc","textDir","items","subColumns"];this._columnHeaderHandlers=[];},destroy:function(_13){this._cleanupColumnHeader();if(this.scrollBar){this.scrollBar.destroy(_13);}this.inherited(arguments);},_scrollBar_onScroll:function(_14){this._setScrollPosition(_14);},buildRendering:function(){this.inherited(arguments);if(this.vScrollBar){this.scrollBar=new _3({content:this.vScrollBarContent},this.vScrollBar);this.scrollBar.on("scroll",_7.hitch(this,this._scrollBar_onScroll));this._viewHandles.push(on(this.scrollContainer,_10.wheel,dojo.hitch(this,this._mouseWheelScrollHander)));}},postscript:function(){this.inherited(arguments);this._initialized=true;if(!this.invalidRendering){this.refreshRendering();}},_setVerticalRendererAttr:function(_15){this._destroyRenderersByKind("vertical");this._set("verticalRenderer",_15);},_createRenderData:function(){var _16={};_16.minHours=this.get("minHours");_16.maxHours=this.get("maxHours");_16.hourSize=this.get("hourSize");_16.hourCount=_16.maxHours-_16.minHours;_16.slotDuration=this.get("timeSlotDuration");_16.rowHeaderGridSlotDuration=this.get("rowHeaderGridSlotDuration");_16.slotSize=Math.ceil(_16.hourSize/(60/_16.slotDuration));_16.hourSize=_16.slotSize*(60/_16.slotDuration);_16.sheetHeight=_16.hourSize*_16.hourCount;_16.scrollbarWidth=_12.getScrollbar().w+1;_16.dateLocaleModule=this.dateLocaleModule;_16.dateClassObj=this.dateClassObj;_16.dateModule=this.dateModule;_16.dates=[];_16.columnCount=this.get("columnCount");_16.subColumns=this.get("subColumns");_16.subColumnCount=_16.subColumns?_16.subColumns.length:1;var d=this.get("startDate");if(d==null){d=new _16.dateClassObj();}d=this.floorToDay(d,false,_16);this.startDate=d;for(var col=0;col<_16.columnCount;col++){_16.dates.push(d);d=_16.dateModule.add(d,"day",1);d=this.floorToDay(d,false,_16);}_16.startTime=new _16.dateClassObj(_16.dates[0]);_16.startTime.setHours(_16.minHours);_16.endTime=new _16.dateClassObj(_16.dates[_16.columnCount-1]);_16.endTime.setHours(_16.maxHours);if(this.displayedItemsInvalidated){this.displayedItemsInvalidated=false;this._computeVisibleItems(_16);if(this._isEditing){this._endItemEditing(null,false);}}else{if(this.renderData){_16.items=this.renderData.items;}}return _16;},_validateProperties:function(){this.inherited(arguments);var v=this.minHours;if(v<0||v>23||isNaN(v)){this.minHours=0;}v=this.maxHours;if(v<1||v>36||isNaN(v)){this.minHours=36;}if(this.minHours>this.maxHours){var t=this.maxHours;this.maxHours=this.minHours;this.minHours=t;}if(this.maxHours-this.minHours<1){this.minHours=0;this.maxHours=24;}if(this.columnCount<1||isNaN(this.columnCount)){this.columnCount=1;}v=this.percentOverlap;if(v<0||v>100||isNaN(v)){this.percentOverlap=70;}if(this.hourSize<5||isNaN(this.hourSize)){this.hourSize=10;}v=this.timeSlotDuration;if(v<1||v>60||isNaN(v)){this.timeSlotDuration=15;}},_setStartDateAttr:function(_17){this.displayedItemsInvalidated=true;this._set("startDate",_17);},_setColumnCountAttr:function(_18){this.displayedItemsInvalidated=true;this._set("columnCount",_18);},__fixEvt:function(e){e.sheet="primary";e.source=this;return e;},rowHeaderTimePattern:null,_formatRowHeaderLabel:function(d){return this.renderData.dateLocaleModule.format(d,{selector:"time",timePattern:this.rowHeaderTimePattern});},columnHeaderDatePattern:null,_formatColumnHeaderLabel:function(d){return this.renderData.dateLocaleModule.format(d,{selector:"date",datePattern:this.columnHeaderDatePattern,formatLength:"medium"});},startTimeOfDay:null,scrollBarRTLPosition:"left",_getStartTimeOfDay:function(){var v=(this.get("maxHours")-this.get("minHours"))*this._getScrollPosition()/this.renderData.sheetHeight;return {hours:this.renderData.minHours+Math.floor(v),minutes:(v-Math.floor(v))*60};},_getEndTimeOfDay:function(){var v=(this.get("maxHours")-this.get("minHours"))*(this._getScrollPosition()+this.scrollContainer.offsetHeight)/this.renderData.sheetHeight;return {hours:this.renderData.minHours+Math.floor(v),minutes:(v-Math.floor(v))*60};},_setStartTimeOfDayAttr:function(_19){this._setStartTimeOfDay(_19.hours,_19.minutes,_19.duration,_19.easing);},_getStartTimeOfDayAttr:function(){return this._getStartTimeOfDay();},_setStartTimeOfDay:function(_1a,_1b,_1c,_1d){var rd=this.renderData;_1a=_1a||rd.minHours;_1b=_1b||0;_1c=_1c||0;if(_1b<0){_1b=0;}else{if(_1b>59){_1b=59;}}if(_1a<0){_1a=0;}else{if(_1a>rd.maxHours){_1a=rd.maxHours;}}var _1e=_1a*60+_1b;var _1f=rd.minHours*60;var _20=rd.maxHours*60;if(_1e<_1f){_1e=_1f;}else{if(_1e>_20){_1e=_20;}}var pos=(_1e-_1f)*rd.sheetHeight/(_20-_1f);pos=Math.min(rd.sheetHeight-this.scrollContainer.offsetHeight,pos);this._scrollToPosition(pos,_1c,_1d);},_scrollToPosition:function(_21,_22,_23){if(_22){if(this._scrollAnimation){this._scrollAnimation.stop();}var _24=this._getScrollPosition();var _25=Math.abs(((_21-_24)*_22)/this.renderData.sheetHeight);this._scrollAnimation=new fx.Animation({curve:[_24,_21],duration:_25,easing:_23,onAnimate:_7.hitch(this,function(_26){this._setScrollImpl(_26);})});this._scrollAnimation.play();}else{this._setScrollImpl(_21);}},_setScrollImpl:function(v){this._setScrollPosition(v);if(this.scrollBar){this.scrollBar.set("value",v);}},ensureVisibility:function(_27,end,_28,_29,_2a){_29=_29==undefined?this.renderData.slotDuration:_29;if(this.scrollable&&this.autoScroll){var s=_27.getHours()*60+_27.getMinutes()-_29;var e=end.getHours()*60+end.getMinutes()+_29;var vs=this._getStartTimeOfDay();var ve=this._getEndTimeOfDay();var _2b=vs.hours*60+vs.minutes;var _2c=ve.hours*60+ve.minutes;var _2d=false;var _2e=null;switch(_28){case "start":_2d=s>=_2b&&s<=_2c;_2e=s;break;case "end":_2d=e>=_2b&&e<=_2c;_2e=e-(_2c-_2b);break;case "both":_2d=s>=_2b&&e<=_2c;_2e=s;break;}if(!_2d){this._setStartTimeOfDay(Math.floor(_2e/60),_2e%60,_2a);}}},scrollView:function(dir){var t=this._getStartTimeOfDay();t=t.hours*60+t.minutes+(dir*this.timeSlotDuration);this._setStartTimeOfDay(Math.floor(t/60),t%60);},_mouseWheelScrollHander:function(e){this.scrollView(e.wheelDelta>0?-1:1);},refreshRendering:function(){if(!this._initialized){return;}this._validateProperties();var _2f=this.renderData;var rd=this._createRenderData();this.renderData=rd;this._createRendering(rd,_2f);this._layoutRenderers(rd);},_createRendering:function(_30,_31){_d.set(this.sheetContainer,"height",_30.sheetHeight+"px");this._configureVisibleParts(_30);this._configureScrollBar(_30);this._buildColumnHeader(_30,_31);this._buildSubColumnHeader(_30,_31);this._buildRowHeader(_30,_31);this._buildGrid(_30,_31);this._buildItemContainer(_30,_31);this._layoutTimeIndicator(_30);},_configureVisibleParts:function(_32){if(this.secondarySheetNode){_d.set(this.secondarySheetNode,"display",this._showSecondarySheet?"block":"none");}_c[this.subColumns==null?"remove":"add"](this.domNode,"subColumns");_c[this._showSecondarySheet?"add":"remove"](this.domNode,"secondarySheet");},_configureScrollBar:function(_33){if(_9("ie")&&this.scrollBar){_d.set(this.scrollBar.domNode,"width",(_33.scrollbarWidth+1)+"px");}var _34=this.isLeftToRight()?true:this.scrollBarRTLPosition=="right";var _35=_34?"right":"left";var _36=_34?"left":"right";if(this.scrollBar){this.scrollBar.set("maximum",_33.sheetHeight);_d.set(this.scrollBar.domNode,_35,0);_d.set(this.scrollBar.domNode,_34?"left":"right","auto");}_d.set(this.scrollContainer,_35,_33.scrollbarWidth+"px");_d.set(this.scrollContainer,_36,"0");_d.set(this.header,_35,_33.scrollbarWidth+"px");_d.set(this.header,_36,"0");_d.set(this.subHeader,_35,_33.scrollbarWidth+"px");_d.set(this.subHeader,_36,"0");if(this.buttonContainer&&this.owner!=null&&this.owner.currentView==this){_d.set(this.buttonContainer,_35,_33.scrollbarWidth+"px");_d.set(this.buttonContainer,_36,"0");}},_columnHeaderClick:function(e){_6.stop(e);var _37=_11("td",this.columnHeaderTable).indexOf(e.currentTarget);this._onColumnHeaderClick({index:_37,date:this.renderData.dates[_37],triggerEvent:e});},_buildColumnHeader:function(_38,_39){var _3a=this.columnHeaderTable;if(!_3a){return;}var _3b=_38.columnCount-(_39?_39.columnCount:0);if(_9("ie")==8){if(this._colTableSave==null){this._colTableSave=_7.clone(_3a);}else{if(_3b<0){this._cleanupColumnHeader();this.columnHeader.removeChild(_3a);_f.destroy(_3a);_3a=_7.clone(this._colTableSave);this.columnHeaderTable=_3a;this.columnHeader.appendChild(_3a);_3b=_38.columnCount;}}}var _3c=_11("tbody",_3a);var trs=_11("tr",_3a);var _3d,tr,td;if(_3c.length==1){_3d=_3c[0];}else{_3d=_a.create("tbody",null,_3a);}if(trs.length==1){tr=trs[0];}else{tr=_f.create("tr",null,_3d);}if(_3b>0){for(var i=0;i<_3b;i++){td=_f.create("td",null,tr);var h=[];h.push(on(td,"click",_7.hitch(this,this._columnHeaderClick)));if(_9("touch")){h.push(on(td,"touchstart",function(e){_6.stop(e);_c.add(e.currentTarget,"Active");}));h.push(on(td,"touchend",function(e){_6.stop(e);_c.remove(e.currentTarget,"Active");}));}else{h.push(on(td,"mousedown",function(e){_6.stop(e);_c.add(e.currentTarget,"Active");}));h.push(on(td,"mouseup",function(e){_6.stop(e);_c.remove(e.currentTarget,"Active");}));h.push(on(td,"mouseover",function(e){_6.stop(e);_c.add(e.currentTarget,"Hover");}));h.push(on(td,"mouseout",function(e){_6.stop(e);_c.remove(e.currentTarget,"Hover");}));}this._columnHeaderHandlers.push(h);}}else{_3b=-_3b;for(var i=0;i<_3b;i++){td=tr.lastChild;tr.removeChild(td);_f.destroy(td);var _3e=this._columnHeaderHandlers.pop();while(_3e.length>0){_3e.pop().remove();}}}_11("td",_3a).forEach(function(td,i){td.className="";if(i==0){_c.add(td,"first-child");}else{if(i==this.renderData.columnCount-1){_c.add(td,"last-child");}}var d=_38.dates[i];this._setText(td,this._formatColumnHeaderLabel(d));this.styleColumnHeaderCell(td,d,_38);},this);if(this.yearColumnHeaderContent){var d=_38.dates[0];this._setText(this.yearColumnHeaderContent,_38.dateLocaleModule.format(d,{selector:"date",datePattern:"yyyy"}));}},_cleanupColumnHeader:function(){while(this._columnHeaderHandlers.length>0){var _3f=this._columnHeaderHandlers.pop();while(_3f.length>0){_3f.pop().remove();}}},styleColumnHeaderCell:function(_40,_41,_42){_c.add(_40,this._cssDays[_41.getDay()]);if(this.isToday(_41)){_c.add(_40,"dojoxCalendarToday");}else{if(this.isWeekEnd(_41)){_c.add(_40,"dojoxCalendarWeekend");}}},_buildSubColumnHeader:function(_43,_44){var _45=this.subColumnHeaderTable;if(!_45||this.subColumns==null){return;}var _46=_43.columnCount-_11("td",_45).length;if(_9("ie")==8){if(this._colSubTableSave==null){this._colSubTableSave=_7.clone(_45);}else{if(_46<0){this.subColumnHeader.removeChild(_45);_f.destroy(_45);_45=_7.clone(this._colSubTableSave);this.subColumnHeaderTable=_45;this.subColumnHeader.appendChild(_45);_46=_43.columnCount;}}}var _47=_11(">tbody",_45);var _48,tr,td;if(_47.length==1){_48=_47[0];}else{_48=_a.create("tbody",null,_45);}var trs=_11(">tr",_48);if(trs.length==1){tr=trs[0];}else{tr=_f.create("tr",null,_48);}var _49=_43.subColumnCount;if(_46>0){for(var i=0;i<_46;i++){td=_f.create("td",null,tr);_f.create("div",{"className":"dojoxCalendarSubHeaderContainer"},td);}}else{_46=-_46;for(var i=0;i<_46;i++){td=tr.lastChild;tr.removeChild(td);_f.destroy(td);}}_11("td",_45).forEach(function(td,i){td.className="";if(i==0){_c.add(td,"first-child");}else{if(i==this.renderData.columnCount-1){_c.add(td,"last-child");}}_11(".dojoxCalendarSubHeaderContainer",td).forEach(function(div,i){var _4a=_11(".dojoxCalendarSubHeaderContainer",div).length-_49;if(_4a!=0){var len=div.childNodes.length;for(var i=0;i<len;i++){div.removeChild(div.lastChild);}for(var j=0;j<_49;j++){_f.create("div",{"className":"dojoxCalendarSubHeaderCell dojoxCalendarSubHeaderLabel"},div);}}var _4b=(100/_49)+"%";_11(".dojoxCalendarSubHeaderCell",div).forEach(function(div,i){var col=_49==1?i:Math.floor(i/_49);subColIdx=_49==1?0:i-col*_49;_d.set(div,{width:_4b,left:((subColIdx*100)/_49)+"%"});_c[subColIdx<_49-1&&_49!==1?"add":"remove"](div,"subColumn");this._setText(div,this.subColumnLabelFunc(this.subColumns[subColIdx]));},this);},this);var d=_43.dates[i];this.styleSubColumnHeaderCell(td,d,_43);},this);},subColumnLabelFunc:function(_4c){return _4c;},styleSubColumnHeaderCell:function(_4d,_4e,_4f){_c.add(_4d,this._cssDays[_4e.getDay()]);if(this.isToday(_4e)){_c.add(_4d,"dojoxCalendarToday");}else{if(this.isWeekEnd(_4e)){_c.add(_4d,"dojoxCalendarWeekend");}}},_addMinutesClasses:function(_50,_51){switch(_51){case 0:_c.add(_50,"hour");break;case 30:_c.add(_50,"halfhour");break;case 15:case 45:_c.add(_50,"quarterhour");break;}},_buildRowHeader:function(_52,_53){var _54=this.rowHeaderTable;if(!_54){return;}if(this._rowHeaderLabelContainer==null){this._rowHeaderLabelContainer=_f.create("div",{"class":"dojoxCalendarRowHeaderLabelContainer"},this.rowHeader);}_d.set(_54,"height",_52.sheetHeight+"px");var _55=_11("tbody",_54);var _56,tr,td;if(_55.length==1){_56=_55[0];}else{_56=_f.create("tbody",null,_54);}var _57=Math.floor(60/_52.rowHeaderGridSlotDuration)*_52.hourCount;var _58=_57-(_53?Math.floor(60/_53.rowHeaderGridSlotDuration)*_53.hourCount:0);if(_58>0){for(var i=0;i<_58;i++){tr=_f.create("tr",null,_56);td=_f.create("td",null,tr);}}else{_58=-_58;for(var i=0;i<_58;i++){_56.removeChild(_56.lastChild);}}var rd=this.renderData;var _59=Math.ceil(_52.hourSize/(60/_52.rowHeaderGridSlotDuration));var d=new Date(2000,0,1,0,0,0);_11("tr",_54).forEach(function(tr,i){var td=_11("td",tr)[0];td.className="";_d.set(tr,"height",(_9("ie")==7)?_59-2*(60/_52.rowHeaderGridSlotDuration):_59+"px");var h=_52.minHours+(i*this.renderData.rowHeaderGridSlotDuration)/60;var m=(i*this.renderData.rowHeaderGridSlotDuration)%60;this.styleRowHeaderCell(td,h,m,rd);this._addMinutesClasses(td,m);},this);var lc=this._rowHeaderLabelContainer;_58=(Math.floor(60/this.rowHeaderLabelSlotDuration)*_52.hourCount)-lc.childNodes.length;var _5a;if(_58>0){for(var i=0;i<_58;i++){_5a=_f.create("span",null,lc);_c.add(_5a,"dojoxCalendarRowHeaderLabel");}}else{_58=-_58;for(var i=0;i<_58;i++){lc.removeChild(lc.lastChild);}}_59=Math.ceil(_52.hourSize/(60/this.rowHeaderLabelSlotDuration));_11(">span",lc).forEach(function(_5b,i){d.setHours(0);d.setMinutes(_52.minHours*60+(i*this.rowHeaderLabelSlotDuration));this._configureRowHeaderLabel(_5b,d,i,_59*i,rd);},this);},_configureRowHeaderLabel:function(_5c,d,_5d,pos,_5e){this._setText(_5c,this._formatRowHeaderLabel(d));_d.set(_5c,"top",(pos+(_5d==0?this.rowHeaderFirstLabelOffset:this.rowHeaderLabelOffset))+"px");var h=_5e.minHours+(_5d*this.rowHeaderLabelSlotDuration)/60;var m=(_5d*this.rowHeaderLabelSlotDuration)%60;_c.remove(_5c,["hour","halfhour","quarterhour"]);this._addMinutesClasses(_5c,m);this.styleRowHeaderCell(_5c,h,m,_5e);},styleRowHeaderCell:function(_5f,h,m,_60){},_buildGrid:function(_61,_62){var _63=this.gridTable;if(!_63){return;}_d.set(_63,"height",_61.sheetHeight+"px");var _64=Math.floor(60/_61.slotDuration)*_61.hourCount;var _65=_64-(_62?Math.floor(60/_62.slotDuration)*_62.hourCount:0);var _66=_65>0;var _67=(_61.columnCount-(_62?_62.columnCount:0));if(_9("ie")==8){if(this._gridTableSave==null){this._gridTableSave=_7.clone(_63);}else{if(_67<0){this.grid.removeChild(_63);_f.destroy(_63);_63=_7.clone(this._gridTableSave);this.gridTable=_63;this.grid.appendChild(_63);_67=_61.columnCount;_65=_64;_66=true;}}}var _68=_11("tbody",_63);var _69;if(_68.length==1){_69=_68[0];}else{_69=_f.create("tbody",null,_63);}if(_66){for(var i=0;i<_65;i++){_f.create("tr",null,_69);}}else{_65=-_65;for(var i=0;i<_65;i++){_69.removeChild(_69.lastChild);}}var _6a=Math.floor(60/_61.slotDuration)*_61.hourCount-_65;var _6b=_66||_67>0;_67=_6b?_67:-_67;_11("tr",_63).forEach(function(tr,i){if(_6b){var len=i>=_6a?_61.columnCount:_67;for(var i=0;i<len;i++){_f.create("td",null,tr);}}else{for(var i=0;i<_67;i++){tr.removeChild(tr.lastChild);}}});_11("tr",_63).forEach(function(tr,i){_d.set(tr,"height",_61.slotSize+"px");if(i==0){_c.add(tr,"first-child");}else{if(i==_64-1){_c.add(tr,"last-child");}}var m=(i*this.renderData.slotDuration)%60;var h=this.minHours+Math.floor((i*this.renderData.slotDuration)/60);_11("td",tr).forEach(function(td,col){td.className="";if(col==0){_c.add(td,"first-child");}else{if(col==this.renderData.columnCount-1){_c.add(td,"last-child");}}var d=_61.dates[col];this.styleGridCell(td,d,h,m,_61);this._addMinutesClasses(td,m);},this);},this);},styleGridCellFunc:null,defaultStyleGridCell:function(_6c,_6d,_6e,_6f,_70){_c.add(_6c,[this._cssDays[_6d.getDay()],"H"+_6e,"M"+_6f]);if(this.isToday(_6d)){return _c.add(_6c,"dojoxCalendarToday");}else{if(this.isWeekEnd(_6d)){return _c.add(_6c,"dojoxCalendarWeekend");}}},styleGridCell:function(_71,_72,_73,_74,_75){if(this.styleGridCellFunc){this.styleGridCellFunc(_71,_72,_73,_74,_75);}else{this.defaultStyleGridCell(_71,_72,_73,_74,_75);}},_buildItemContainer:function(_76,_77){var _78=this.itemContainerTable;if(!_78){return;}var _79=[];_d.set(_78,"height",_76.sheetHeight+"px");var _7a=_77?_77.columnCount:0;var _7b=_76.columnCount-_7a;if(_9("ie")==8){if(this._itemTableSave==null){this._itemTableSave=_7.clone(_78);}else{if(_7b<0){this.itemContainer.removeChild(_78);this._recycleItemRenderers(true);_f.destroy(_78);_78=_7.clone(this._itemTableSave);this.itemContainerTable=_78;this.itemContainer.appendChild(_78);_7b=_76.columnCount;}}}var _7c=_11("tbody",_78);var trs=_11("tr",_78);var _7d,tr,td;if(_7c.length==1){_7d=_7c[0];}else{_7d=_f.create("tbody",null,_78);}if(trs.length==1){tr=trs[0];}else{tr=_f.create("tr",null,_7d);}var _7e=_76.subColumnCount;if(_7b>0){for(var i=0;i<_7b;i++){td=_f.create("td",null,tr);_f.create("div",{"className":"dojoxCalendarContainerColumn"},td);}}else{_7b=-_7b;for(var i=0;i<_7b;i++){tr.removeChild(tr.lastChild);}}_11("td",_78).forEach(function(td,i){_11(".dojoxCalendarContainerColumn",td).forEach(function(div,i){_d.set(div,"height",_76.sheetHeight+"px");var _7f=_11(".dojoxCalendarSubContainerColumn",td).length-_7e;if(_7f!=0){var len=div.childNodes.length;for(var i=0;i<len;i++){div.removeChild(div.lastChild);}for(var j=0;j<_7e;j++){var _80=_f.create("div",{"className":"dojoxCalendarSubContainerColumn"},div);_f.create("div",{"className":"dojoxCalendarEventContainerColumn"},_80);}}},this);var _81=(100/_7e)+"%";_11(".dojoxCalendarSubContainerColumn",td).forEach(function(div,i){var col=_7e==1?i:Math.floor(i/_7e);subColIdx=_7e==1?0:i-col*_7e;_d.set(div,{width:_81,left:((subColIdx*100)/_7e)+"%"});_c[subColIdx<_7e-1&&_7e!==1?"add":"remove"](div,"subColumn");},this);_11(".dojoxCalendarEventContainerColumn",td).forEach(function(div,i){_79.push(div);},this);},this);_76.cells=_79;},showTimeIndicator:true,timeIndicatorRefreshInterval:60000,_setShowTimeIndicatorAttr:function(_82){this._layoutTimeIndicator(this.renderData);},_layoutTimeIndicator:function(_83){if(!_83){return;}if(this.showTimeIndicator){var now=new Date();var _84=this.isOverlapping(_83,_83.startTime,_83.endTime,now,now);if(_84){if(!this._timeIndicator){this._timeIndicator=_f.create("div",{"className":"dojoxCalendarTimeIndicator"});}var _85=this._timeIndicator;var _86=this.dateModule.difference(_83.startTime,now,"day");var top=this.computeProjectionOnDate(_83,this.floorToDay(now),now,_83.sheetHeight);if(top!=_83.sheetHeight){_d.set(_85,{top:top+"px",display:"block"});var _87=_83.cells[_86*_83.subColumnCount].parentNode.parentNode;if(_87!=_85.parentNode){if(_85.parentNode!=null){_85.parentNode.removeChild(_85);}_87.appendChild(_85);}if(this._timeIndicatorTimer==null){this._timeIndicatorTimer=setInterval(_7.hitch(this,function(){this._layoutTimeIndicator(this.renderData);}),this.timeIndicatorRefreshInterval);}return;}}}if(this._timeIndicatorTimer){clearInterval(this._timeIndicatorTimer);this._timeIndicatorTimer=null;}if(this._timeIndicator){_d.set(this._timeIndicator);}},beforeDeactivate:function(){if(this._timeIndicatorTimer){clearInterval(this._timeIndicatorTimer);this._timeIndicatorTimer=null;}},_overlapLayoutPass2:function(_88){var i,j,_89,_8a;_89=_88[_88.length-1];for(j=0;j<_89.length;j++){_89[j].extent=1;}for(i=0;i<_88.length-1;i++){_89=_88[i];for(var j=0;j<_89.length;j++){_8a=_89[j];if(_8a.extent==-1){_8a.extent=1;var _8b=0;var _8c=false;for(var k=i+1;k<_88.length&&!_8c;k++){var _8d=_88[k];for(var l=0;l<_8d.length&&!_8c;l++){var _8e=_8d[l];if(_8a.start<_8e.end&&_8e.start<_8a.end){_8c=true;}}if(!_8c){_8b++;}}_8a.extent+=_8b;}}}},_defaultItemToRendererKindFunc:function(_8f){return "vertical";},_layoutInterval:function(_90,_91,_92,end,_93){var _94=[];_90.colW=this.itemContainer.offsetWidth/_90.columnCount;for(var i=0;i<_93.length;i++){var _95=_93[i];if(this._itemToRendererKind(_95)=="vertical"){_94.push(_95);}}if(_94.length>0){if(_90.subColumnCount>1){var _96={};_8.forEach(this.subColumns,function(_97){_96[_97]=[];});_8.forEach(_94,function(_98){_96[_98.subColumn].push(_98);});var _99=0;_8.forEach(this.subColumns,function(_9a){this._layoutVerticalItems(_90,_91,_99++,_92,end,_96[_9a]);},this);}else{this._layoutVerticalItems(_90,_91,0,_92,end,_94);}}},_getColumn:function(_9b,_9c,_9d){return _9b.cells[_9c*_9b.subColumnCount+_9d];},_layoutVerticalItems:function(_9e,_9f,_a0,_a1,_a2,_a3){if(this.verticalRenderer==null){return;}var _a4=this._getColumn(_9e,_9f,_a0);var _a5=[];for(var i=0;i<_a3.length;i++){var _a6=_a3[i];var _a7=this.computeRangeOverlap(_9e,_a6.startTime,_a6.endTime,_a1,_a2);var top=this.computeProjectionOnDate(_9e,_a1,_a7[0],_9e.sheetHeight);var _a8=this.computeProjectionOnDate(_9e,_a1,_a7[1],_9e.sheetHeight);if(_a8>top){var _a9=_7.mixin({start:top,end:_a8,range:_a7,item:_a6},_a6);_a5.push(_a9);}}var _aa=this.computeOverlapping(_a5,this._overlapLayoutPass2).numLanes;var _ab=this.percentOverlap/100;for(i=0;i<_a5.length;i++){_a6=_a5[i];var _ac=_a6.lane;var _ad=_a6.extent;var w;var _ae;if(_ab==0){w=_aa==1?_9e.colW:((_9e.colW-(_aa-1)*this.horizontalGap)/_aa);_ae=_ac*(w+this.horizontalGap);w=_ad==1?w:w*_ad+(_ad-1)*this.horizontalGap;w=100*w/_9e.colW;_ae=100*_ae/_9e.colW;}else{w=_aa==1?100:(100/(_aa-(_aa-1)*_ab));_ae=_ac*(w-_ab*w);w=_ad==1?w:w*(_ad-(_ad-1)*_ab);}var ir=this._createRenderer(_a6,"vertical",this.verticalRenderer,"dojoxCalendarVertical");_d.set(ir.container,{"top":_a6.start+"px","left":_ae+"%","width":w+"%","height":(_a6.end-_a6.start+1)+"px"});var _af=this.isItemBeingEdited(_a6);var _b0=this.isItemSelected(_a6);var _b1=this.isItemHovered(_a6);var _b2=this.isItemFocused(_a6);var _b3=ir.renderer;_b3.set("hovered",_b1);_b3.set("selected",_b0);_b3.set("edited",_af);_b3.set("focused",this.showFocus?_b2:false);_b3.set("storeState",this.getItemStoreState(_a6));_b3.set("moveEnabled",this.isItemMoveEnabled(_a6._item,"vertical"));_b3.set("resizeEnabled",this.isItemResizeEnabled(_a6._item,"vertical"));this.applyRendererZIndex(_a6,ir,_b1,_b0,_af,_b2);if(_b3.updateRendering){_b3.updateRendering(w,_a6.end-_a6.start+1);}_f.place(ir.container,_a4);_d.set(ir.container,"display","block");}},_sortItemsFunction:function(a,b){var res=this.dateModule.compare(a.startTime,b.startTime);if(res==0){res=-1*this.dateModule.compare(a.endTime,b.endTime);}return this.isLeftToRight()?res:-res;},_getNormalizedCoords:function(e,x,y,_b4){if(e!=null){var _b5=_e.position(this.itemContainer,true);if(e.touches){_b4=_b4==undefined?0:_b4;x=e.touches[_b4].pageX-_b5.x;y=e.touches[_b4].pageY-_b5.y;}else{x=e.pageX-_b5.x;y=e.pageY-_b5.y;}}var r=_e.getContentBox(this.itemContainer);if(!this.isLeftToRight()){x=r.w-x;}if(x<0){x=0;}else{if(x>r.w){x=r.w-1;}}if(y<0){y=0;}else{if(y>r.h){y=r.h-1;}}return {x:x,y:y};},getTime:function(e,x,y,_b6){var o=this._getNormalizedCoords(e,x,y,_b6);var t=this.getTimeOfDay(o.y,this.renderData);var _b7=_e.getMarginBox(this.itemContainer).w/this.renderData.columnCount;var col=Math.floor(o.x/_b7);var _b8=null;if(col<this.renderData.dates.length){_b8=this.newDate(this.renderData.dates[col]);_b8=this.floorToDay(_b8,true);_b8.setHours(t.hours);_b8.setMinutes(t.minutes);}return _b8;},getSubColumn:function(e,x,y,_b9){if(this.subColumns==null||this.subColumns.length==1){return null;}var o=this._getNormalizedCoords(e,x,y,_b9);var rd=this.renderData;var _ba=_e.getMarginBox(this.itemContainer).w/this.renderData.columnCount;var col=Math.floor(o.x/_ba);var idx=Math.floor((o.x-col*_ba)/(_ba/rd.subColumnCount));return this.subColumns[idx];},_onGridMouseUp:function(e){this.inherited(arguments);if(this._gridMouseDown){this._gridMouseDown=false;this._onGridClick({date:this.getTime(e),triggerEvent:e});}},_onGridTouchStart:function(e){this.inherited(arguments);var g=this._gridProps;g.moved=false;g.start=e.touches[0].screenY;g.scrollTop=this._getScrollPosition();},_onGridTouchMove:function(e){this.inherited(arguments);if(e.touches.length>1&&!this._isEditing){_6.stop(e);return;}if(this._gridProps&&!this._isEditing){var _bb={x:e.touches[0].screenX,y:e.touches[0].screenY};var p=this._edProps;if(!p||p&&(Math.abs(_bb.x-p.start.x)>25||Math.abs(_bb.y-p.start.y)>25)){this._gridProps.moved=true;var d=e.touches[0].screenY-this._gridProps.start;var _bc=this._gridProps.scrollTop-d;var max=this.itemContainer.offsetHeight-this.scrollContainer.offsetHeight;if(_bc<0){this._gridProps.start=e.touches[0].screenY;this._setScrollImpl(0);this._gridProps.scrollTop=0;}else{if(_bc>max){this._gridProps.start=e.touches[0].screenY;this._setScrollImpl(max);this._gridProps.scrollTop=max;}else{this._setScrollImpl(_bc);}}}}},_onGridTouchEnd:function(e){this.inherited(arguments);var g=this._gridProps;if(g){if(!this._isEditing){if(!g.moved){if(!g.fromItem&&!g.editingOnStart){this.selectFromEvent(e,null,null,true);}if(!g.fromItem){if(this._pendingDoubleTap&&this._pendingDoubleTap.grid){this._onGridDoubleClick({date:this.getTime(this._gridProps.event),triggerEvent:this._gridProps.event});clearTimeout(this._pendingDoubleTap.timer);delete this._pendingDoubleTap;}else{this._onGridClick({date:this.getTime(this._gridProps.event),triggerEvent:this._gridProps.event});this._pendingDoubleTap={grid:true,timer:setTimeout(_7.hitch(this,function(){delete this._pendingDoubleTap;}),this.doubleTapDelay)};}}}}this._gridProps=null;}},_onColumnHeaderClick:function(e){this._dispatchCalendarEvt(e,"onColumnHeaderClick");},onColumnHeaderClick:function(e){},getTimeOfDay:function(pos,rd){var _bd=rd.minHours*60;var _be=rd.maxHours*60;var _bf=_bd+(pos*(_be-_bd)/rd.sheetHeight);return {hours:Math.floor(_bf/60),minutes:Math.floor(_bf%60)};},_isItemInView:function(_c0){var res=this.inherited(arguments);if(res){var rd=this.renderData;var len=rd.dateModule.difference(_c0.startTime,_c0.endTime,"millisecond");var _c1=(24-rd.maxHours+rd.minHours)*3600000;if(len>_c1){return true;}var _c2=_c0.startTime.getHours()*60+_c0.startTime.getMinutes();var _c3=_c0.endTime.getHours()*60+_c0.endTime.getMinutes();var sV=rd.minHours*60;var eV=rd.maxHours*60;if(_c2>0&&_c2<sV||_c2>eV&&_c2<=1440){return false;}if(_c3>0&&_c3<sV||_c3>eV&&_c3<=1440){return false;}}return res;},_ensureItemInView:function(_c4){var _c5;var _c6=_c4.startTime;var _c7=_c4.endTime;var rd=this.renderData;var cal=rd.dateModule;var len=Math.abs(cal.difference(_c4.startTime,_c4.endTime,"millisecond"));var _c8=(24-rd.maxHours+rd.minHours)*3600000;if(len>_c8){return false;}var _c9=_c6.getHours()*60+_c6.getMinutes();var _ca=_c7.getHours()*60+_c7.getMinutes();var sV=rd.minHours*60;var eV=rd.maxHours*60;if(_c9>0&&_c9<sV){this.floorToDay(_c4.startTime,true,rd);_c4.startTime.setHours(rd.minHours);_c4.endTime=cal.add(_c4.startTime,"millisecond",len);_c5=true;}else{if(_c9>eV&&_c9<=1440){this.floorToDay(_c4.startTime,true,rd);_c4.startTime=cal.add(_c4.startTime,"day",1);_c4.startTime.setHours(rd.minHours);_c4.endTime=cal.add(_c4.startTime,"millisecond",len);_c5=true;}}if(_ca>0&&_ca<sV){this.floorToDay(_c4.endTime,true,rd);_c4.endTime=cal.add(_c4.endTime,"day",-1);_c4.endTime.setHours(rd.maxHours);_c4.startTime=cal.add(_c4.endTime,"millisecond",-len);_c5=true;}else{if(_ca>eV&&_ca<=1440){this.floorToDay(_c4.endTime,true,rd);_c4.endTime.setHours(rd.maxHours);_c4.startTime=cal.add(_c4.endTime,"millisecond",-len);_c5=true;}}_c5=_c5||this.inherited(arguments);return _c5;},_onScrollTimer_tick:function(){this._scrollToPosition(this._getScrollPosition()+this._scrollProps.scrollStep);},snapUnit:"minute",snapSteps:15,minDurationUnit:"minute",minDurationSteps:15,liveLayout:false,stayInView:true,allowStartEndSwap:true,allowResizeLessThan24H:true});});