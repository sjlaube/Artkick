/*
	Copyright (c) 2004-2011, The Dojo Foundation All Rights Reserved.
	Available via Academic Free License >= 2.1 OR the modified BSD license.
	see: http://dojotoolkit.org/license for details
*/

/*
	This is an optimized version of Dojo, built for deployment and not for
	development. To get sources and documentation, please visit:

		http://dojotoolkit.org
*/

//>>built
require({cache:{"dojo/string":function(){define(["./_base/kernel","./_base/lang"],function(_1,_2){var _3={};_2.setObject("dojo.string",_3);_3.rep=function(_4,_5){if(_5<=0||!_4){return "";}var _6=[];for(;;){if(_5&1){_6.push(_4);}if(!(_5>>=1)){break;}_4+=_4;}return _6.join("");};_3.pad=function(_7,_8,ch,_9){if(!ch){ch="0";}var _a=String(_7),_b=_3.rep(ch,Math.ceil((_8-_a.length)/ch.length));return _9?_a+_b:_b+_a;};_3.substitute=function(_c,_d,_e,_f){_f=_f||_1.global;_e=_e?_2.hitch(_f,_e):function(v){return v;};return _c.replace(/\$\{([^\s\:\}]+)(?:\:([^\s\:\}]+))?\}/g,function(_10,key,_11){var _12=_2.getObject(key,false,_d);if(_11){_12=_2.getObject(_11,false,_f).call(_f,_12,key);}return _e(_12,key).toString();});};_3.trim=String.prototype.trim?_2.trim:function(str){str=str.replace(/^\s+/,"");for(var i=str.length-1;i>=0;i--){if(/\S/.test(str.charAt(i))){str=str.substring(0,i+1);break;}}return str;};return _3;});},"dojox/gfx":function(){define(["dojo/_base/lang","./gfx/_base","./gfx/renderer!"],function(_13,_14,_15){_14.switchTo(_15);return _14;});},"dojox/gfx/_base":function(){define(["dojo/_base/kernel","dojo/_base/lang","dojo/_base/Color","dojo/_base/sniff","dojo/_base/window","dojo/_base/array","dojo/dom","dojo/dom-construct","dojo/dom-geometry"],function(_16,_17,_18,has,win,arr,dom,_19,_1a){var g=_17.getObject("dojox.gfx",true),b=g._base={};g._hasClass=function(_1b,_1c){var cls=_1b.getAttribute("className");return cls&&(" "+cls+" ").indexOf(" "+_1c+" ")>=0;};g._addClass=function(_1d,_1e){var cls=_1d.getAttribute("className")||"";if(!cls||(" "+cls+" ").indexOf(" "+_1e+" ")<0){_1d.setAttribute("className",cls+(cls?" ":"")+_1e);}};g._removeClass=function(_1f,_20){var cls=_1f.getAttribute("className");if(cls){_1f.setAttribute("className",cls.replace(new RegExp("(^|\\s+)"+_20+"(\\s+|$)"),"$1$2"));}};b._getFontMeasurements=function(){var _21={"1em":0,"1ex":0,"100%":0,"12pt":0,"16px":0,"xx-small":0,"x-small":0,"small":0,"medium":0,"large":0,"x-large":0,"xx-large":0};var p;if(has("ie")){win.doc.documentElement.style.fontSize="100%";}var div=_19.create("div",{style:{position:"absolute",left:"0",top:"-100px",width:"30px",height:"1000em",borderWidth:"0",margin:"0",padding:"0",outline:"none",lineHeight:"1",overflow:"hidden"}},win.body());for(p in _21){div.style.fontSize=p;_21[p]=Math.round(div.offsetHeight*12/16)*16/12/1000;}win.body().removeChild(div);return _21;};var _22=null;b._getCachedFontMeasurements=function(_23){if(_23||!_22){_22=b._getFontMeasurements();}return _22;};var _24=null,_25={};b._getTextBox=function(_26,_27,_28){var m,s,al=arguments.length;var i;if(!_24){_24=_19.create("div",{style:{position:"absolute",top:"-10000px",left:"0"}},win.body());}m=_24;m.className="";s=m.style;s.borderWidth="0";s.margin="0";s.padding="0";s.outline="0";if(al>1&&_27){for(i in _27){if(i in _25){continue;}s[i]=_27[i];}}if(al>2&&_28){m.className=_28;}m.innerHTML=_26;if(m["getBoundingClientRect"]){var bcr=m.getBoundingClientRect();return {l:bcr.left,t:bcr.top,w:bcr.width||(bcr.right-bcr.left),h:bcr.height||(bcr.bottom-bcr.top)};}else{return _1a.getMarginBox(m);}};b._computeTextLocation=function(_29,_2a,_2b,_2c){var loc={},_2d=_29.align;switch(_2d){case "end":loc.x=_29.x-_2a;break;case "middle":loc.x=_29.x-_2a/2;break;default:loc.x=_29.x;break;}var c=_2c?0.75:1;loc.y=_29.y-_2b*c;return loc;};b._computeTextBoundingBox=function(s){if(!g._base._isRendered(s)){return {x:0,y:0,width:0,height:0};}var loc,_2e=s.getShape(),_2f=s.getFont()||g.defaultFont,w=s.getTextWidth(),h=g.normalizedLength(_2f.size);loc=b._computeTextLocation(_2e,w,h,true);return {x:loc.x,y:loc.y,width:w,height:h};};b._isRendered=function(s){var p=s.parent;while(p&&p.getParent){p=p.parent;}return p!==null;};var _30=0;b._getUniqueId=function(){var id;do{id=_16._scopeName+"xUnique"+(++_30);}while(dom.byId(id));return id;};b._fixMsTouchAction=function(_31){var r=_31.rawNode;if(typeof r.style.msTouchAction!="undefined"){r.style.msTouchAction="none";}};_17.mixin(g,{defaultPath:{type:"path",path:""},defaultPolyline:{type:"polyline",points:[]},defaultRect:{type:"rect",x:0,y:0,width:100,height:100,r:0},defaultEllipse:{type:"ellipse",cx:0,cy:0,rx:200,ry:100},defaultCircle:{type:"circle",cx:0,cy:0,r:100},defaultLine:{type:"line",x1:0,y1:0,x2:100,y2:100},defaultImage:{type:"image",x:0,y:0,width:0,height:0,src:""},defaultText:{type:"text",x:0,y:0,text:"",align:"start",decoration:"none",rotated:false,kerning:true},defaultTextPath:{type:"textpath",text:"",align:"start",decoration:"none",rotated:false,kerning:true},defaultStroke:{type:"stroke",color:"black",style:"solid",width:1,cap:"butt",join:4},defaultLinearGradient:{type:"linear",x1:0,y1:0,x2:100,y2:100,colors:[{offset:0,color:"black"},{offset:1,color:"white"}]},defaultRadialGradient:{type:"radial",cx:0,cy:0,r:100,colors:[{offset:0,color:"black"},{offset:1,color:"white"}]},defaultPattern:{type:"pattern",x:0,y:0,width:0,height:0,src:""},defaultFont:{type:"font",style:"normal",variant:"normal",weight:"normal",size:"10pt",family:"serif"},getDefault:(function(){var _32={};return function(_33){var t=_32[_33];if(t){return new t();}t=_32[_33]=new Function();t.prototype=g["default"+_33];return new t();};})(),normalizeColor:function(_34){return (_34 instanceof _18)?_34:new _18(_34);},normalizeParameters:function(_35,_36){var x;if(_36){var _37={};for(x in _35){if(x in _36&&!(x in _37)){_35[x]=_36[x];}}}return _35;},makeParameters:function(_38,_39){var i=null;if(!_39){return _17.delegate(_38);}var _3a={};for(i in _38){if(!(i in _3a)){_3a[i]=_17.clone((i in _39)?_39[i]:_38[i]);}}return _3a;},formatNumber:function(x,_3b){var val=x.toString();if(val.indexOf("e")>=0){val=x.toFixed(4);}else{var _3c=val.indexOf(".");if(_3c>=0&&val.length-_3c>5){val=x.toFixed(4);}}if(x<0){return val;}return _3b?" "+val:val;},makeFontString:function(_3d){return _3d.style+" "+_3d.variant+" "+_3d.weight+" "+_3d.size+" "+_3d.family;},splitFontString:function(str){var _3e=g.getDefault("Font");var t=str.split(/\s+/);do{if(t.length<5){break;}_3e.style=t[0];_3e.variant=t[1];_3e.weight=t[2];var i=t[3].indexOf("/");_3e.size=i<0?t[3]:t[3].substring(0,i);var j=4;if(i<0){if(t[4]=="/"){j=6;}else{if(t[4].charAt(0)=="/"){j=5;}}}if(j<t.length){_3e.family=t.slice(j).join(" ");}}while(false);return _3e;},cm_in_pt:72/2.54,mm_in_pt:7.2/2.54,px_in_pt:function(){return g._base._getCachedFontMeasurements()["12pt"]/12;},pt2px:function(len){return len*g.px_in_pt();},px2pt:function(len){return len/g.px_in_pt();},normalizedLength:function(len){if(len.length===0){return 0;}if(len.length>2){var _3f=g.px_in_pt();var val=parseFloat(len);switch(len.slice(-2)){case "px":return val;case "pt":return val*_3f;case "in":return val*72*_3f;case "pc":return val*12*_3f;case "mm":return val*g.mm_in_pt*_3f;case "cm":return val*g.cm_in_pt*_3f;}}return parseFloat(len);},pathVmlRegExp:/([A-Za-z]+)|(\d+(\.\d+)?)|(\.\d+)|(-\d+(\.\d+)?)|(-\.\d+)/g,pathSvgRegExp:/([A-Za-z])|(\d+(\.\d+)?)|(\.\d+)|(-\d+(\.\d+)?)|(-\.\d+)/g,equalSources:function(a,b){return a&&b&&a===b;},switchTo:function(_40){var ns=typeof _40=="string"?g[_40]:_40;if(ns){arr.forEach(["Group","Rect","Ellipse","Circle","Line","Polyline","Image","Text","Path","TextPath","Surface","createSurface","fixTarget"],function(_41){g[_41]=ns[_41];});if(typeof _40=="string"){g.renderer=_40;}else{arr.some(["svg","vml","canvas","canvasWithEvents","silverlight"],function(r){return (g.renderer=g[r]&&g[r].Surface===g.Surface?r:null);});}}}});return g;});},"dojox/gfx/renderer":function(){define(["./_base","dojo/_base/lang","dojo/_base/sniff","dojo/_base/window","dojo/_base/config"],function(g,_42,has,win,_43){var _44=null;has.add("vml",function(_45,_46,_47){_47.innerHTML="<v:shape adj=\"1\"/>";var _48=("adj" in _47.firstChild);_47.innerHTML="";return _48;});return {load:function(id,_49,_4a){if(_44&&id!="force"){_4a(_44);return;}var _4b=_43.forceGfxRenderer,_4c=!_4b&&(_42.isString(_43.gfxRenderer)?_43.gfxRenderer:"svg,vml,canvas,silverlight").split(","),_4d,_4e;while(!_4b&&_4c.length){switch(_4c.shift()){case "svg":if("SVGAngle" in win.global){_4b="svg";}break;case "vml":if(has("vml")){_4b="vml";}break;case "silverlight":try{if(has("ie")){_4d=new ActiveXObject("AgControl.AgControl");if(_4d&&_4d.IsVersionSupported("1.0")){_4e=true;}}else{if(navigator.plugins["Silverlight Plug-In"]){_4e=true;}}}catch(e){_4e=false;}finally{_4d=null;}if(_4e){_4b="silverlight";}break;case "canvas":if(win.global.CanvasRenderingContext2D){_4b="canvas";}break;}}if(_4b==="canvas"&&_43.canvasEvents!==false){_4b="canvasWithEvents";}if(_43.isDebug){}function _4f(){_49(["dojox/gfx/"+_4b],function(_50){g.renderer=_4b;_44=_50;_4a(_50);});};if(_4b=="svg"&&typeof window.svgweb!="undefined"){window.svgweb.addOnLoad(_4f);}else{_4f();}}};});},"dojox/gfx/matrix":function(){define(["./_base","dojo/_base/lang"],function(g,_51){var m=g.matrix={};var _52={};m._degToRad=function(_53){return _52[_53]||(_52[_53]=(Math.PI*_53/180));};m._radToDeg=function(_54){return _54/Math.PI*180;};m.Matrix2D=function(arg){if(arg){if(typeof arg=="number"){this.xx=this.yy=arg;}else{if(arg instanceof Array){if(arg.length>0){var _55=m.normalize(arg[0]);for(var i=1;i<arg.length;++i){var l=_55,r=m.normalize(arg[i]);_55=new m.Matrix2D();_55.xx=l.xx*r.xx+l.xy*r.yx;_55.xy=l.xx*r.xy+l.xy*r.yy;_55.yx=l.yx*r.xx+l.yy*r.yx;_55.yy=l.yx*r.xy+l.yy*r.yy;_55.dx=l.xx*r.dx+l.xy*r.dy+l.dx;_55.dy=l.yx*r.dx+l.yy*r.dy+l.dy;}_51.mixin(this,_55);}}else{_51.mixin(this,arg);}}}};_51.extend(m.Matrix2D,{xx:1,xy:0,yx:0,yy:1,dx:0,dy:0});_51.mixin(m,{identity:new m.Matrix2D(),flipX:new m.Matrix2D({xx:-1}),flipY:new m.Matrix2D({yy:-1}),flipXY:new m.Matrix2D({xx:-1,yy:-1}),translate:function(a,b){if(arguments.length>1){return new m.Matrix2D({dx:a,dy:b});}return new m.Matrix2D({dx:a.x,dy:a.y});},scale:function(a,b){if(arguments.length>1){return new m.Matrix2D({xx:a,yy:b});}if(typeof a=="number"){return new m.Matrix2D({xx:a,yy:a});}return new m.Matrix2D({xx:a.x,yy:a.y});},rotate:function(_56){var c=Math.cos(_56);var s=Math.sin(_56);return new m.Matrix2D({xx:c,xy:-s,yx:s,yy:c});},rotateg:function(_57){return m.rotate(m._degToRad(_57));},skewX:function(_58){return new m.Matrix2D({xy:Math.tan(_58)});},skewXg:function(_59){return m.skewX(m._degToRad(_59));},skewY:function(_5a){return new m.Matrix2D({yx:Math.tan(_5a)});},skewYg:function(_5b){return m.skewY(m._degToRad(_5b));},reflect:function(a,b){if(arguments.length==1){b=a.y;a=a.x;}var a2=a*a,b2=b*b,n2=a2+b2,xy=2*a*b/n2;return new m.Matrix2D({xx:2*a2/n2-1,xy:xy,yx:xy,yy:2*b2/n2-1});},project:function(a,b){if(arguments.length==1){b=a.y;a=a.x;}var a2=a*a,b2=b*b,n2=a2+b2,xy=a*b/n2;return new m.Matrix2D({xx:a2/n2,xy:xy,yx:xy,yy:b2/n2});},normalize:function(_5c){return (_5c instanceof m.Matrix2D)?_5c:new m.Matrix2D(_5c);},isIdentity:function(_5d){return _5d.xx==1&&_5d.xy==0&&_5d.yx==0&&_5d.yy==1&&_5d.dx==0&&_5d.dy==0;},clone:function(_5e){var obj=new m.Matrix2D();for(var i in _5e){if(typeof (_5e[i])=="number"&&typeof (obj[i])=="number"&&obj[i]!=_5e[i]){obj[i]=_5e[i];}}return obj;},invert:function(_5f){var M=m.normalize(_5f),D=M.xx*M.yy-M.xy*M.yx;M=new m.Matrix2D({xx:M.yy/D,xy:-M.xy/D,yx:-M.yx/D,yy:M.xx/D,dx:(M.xy*M.dy-M.yy*M.dx)/D,dy:(M.yx*M.dx-M.xx*M.dy)/D});return M;},_multiplyPoint:function(_60,x,y){return {x:_60.xx*x+_60.xy*y+_60.dx,y:_60.yx*x+_60.yy*y+_60.dy};},multiplyPoint:function(_61,a,b){var M=m.normalize(_61);if(typeof a=="number"&&typeof b=="number"){return m._multiplyPoint(M,a,b);}return m._multiplyPoint(M,a.x,a.y);},multiplyRectangle:function(_62,_63){var M=m.normalize(_62);_63=_63||{x:0,y:0,width:0,height:0};if(m.isIdentity(M)){return {x:_63.x,y:_63.y,width:_63.width,height:_63.height};}var p0=m.multiplyPoint(M,_63.x,_63.y),p1=m.multiplyPoint(M,_63.x,_63.y+_63.height),p2=m.multiplyPoint(M,_63.x+_63.width,_63.y),p3=m.multiplyPoint(M,_63.x+_63.width,_63.y+_63.height),_64=Math.min(p0.x,p1.x,p2.x,p3.x),_65=Math.min(p0.y,p1.y,p2.y,p3.y),_66=Math.max(p0.x,p1.x,p2.x,p3.x),_67=Math.max(p0.y,p1.y,p2.y,p3.y);return {x:_64,y:_65,width:_66-_64,height:_67-_65};},multiply:function(_68){var M=m.normalize(_68);for(var i=1;i<arguments.length;++i){var l=M,r=m.normalize(arguments[i]);M=new m.Matrix2D();M.xx=l.xx*r.xx+l.xy*r.yx;M.xy=l.xx*r.xy+l.xy*r.yy;M.yx=l.yx*r.xx+l.yy*r.yx;M.yy=l.yx*r.xy+l.yy*r.yy;M.dx=l.xx*r.dx+l.xy*r.dy+l.dx;M.dy=l.yx*r.dx+l.yy*r.dy+l.dy;}return M;},_sandwich:function(_69,x,y){return m.multiply(m.translate(x,y),_69,m.translate(-x,-y));},scaleAt:function(a,b,c,d){switch(arguments.length){case 4:return m._sandwich(m.scale(a,b),c,d);case 3:if(typeof c=="number"){return m._sandwich(m.scale(a),b,c);}return m._sandwich(m.scale(a,b),c.x,c.y);}return m._sandwich(m.scale(a),b.x,b.y);},rotateAt:function(_6a,a,b){if(arguments.length>2){return m._sandwich(m.rotate(_6a),a,b);}return m._sandwich(m.rotate(_6a),a.x,a.y);},rotategAt:function(_6b,a,b){if(arguments.length>2){return m._sandwich(m.rotateg(_6b),a,b);}return m._sandwich(m.rotateg(_6b),a.x,a.y);},skewXAt:function(_6c,a,b){if(arguments.length>2){return m._sandwich(m.skewX(_6c),a,b);}return m._sandwich(m.skewX(_6c),a.x,a.y);},skewXgAt:function(_6d,a,b){if(arguments.length>2){return m._sandwich(m.skewXg(_6d),a,b);}return m._sandwich(m.skewXg(_6d),a.x,a.y);},skewYAt:function(_6e,a,b){if(arguments.length>2){return m._sandwich(m.skewY(_6e),a,b);}return m._sandwich(m.skewY(_6e),a.x,a.y);},skewYgAt:function(_6f,a,b){if(arguments.length>2){return m._sandwich(m.skewYg(_6f),a,b);}return m._sandwich(m.skewYg(_6f),a.x,a.y);}});g.Matrix2D=m.Matrix2D;return m;});},"dojox/gfx/utils":function(){define(["dojo/_base/kernel","dojo/_base/lang","./_base","dojo/_base/html","dojo/_base/array","dojo/_base/window","dojo/_base/json","dojo/_base/Deferred","dojo/_base/sniff","require","dojo/_base/config"],function(_70,_71,g,_72,arr,win,_73,_74,has,_75,_76){var gu=g.utils={};_71.mixin(gu,{forEach:function(_77,f,o){o=o||_70.global;f.call(o,_77);if(_77 instanceof g.Surface||_77 instanceof g.Group){arr.forEach(_77.children,function(_78){gu.forEach(_78,f,o);});}},serialize:function(_79){var t={},v,_7a=_79 instanceof g.Surface;if(_7a||_79 instanceof g.Group){t.children=arr.map(_79.children,gu.serialize);if(_7a){return t.children;}}else{t.shape=_79.getShape();}if(_79.getTransform){v=_79.getTransform();if(v){t.transform=v;}}if(_79.getStroke){v=_79.getStroke();if(v){t.stroke=v;}}if(_79.getFill){v=_79.getFill();if(v){t.fill=v;}}if(_79.getFont){v=_79.getFont();if(v){t.font=v;}}return t;},toJson:function(_7b,_7c){return _73.toJson(gu.serialize(_7b),_7c);},deserialize:function(_7d,_7e){if(_7e instanceof Array){return arr.map(_7e,_71.hitch(null,gu.deserialize,_7d));}var _7f=("shape" in _7e)?_7d.createShape(_7e.shape):_7d.createGroup();if("transform" in _7e){_7f.setTransform(_7e.transform);}if("stroke" in _7e){_7f.setStroke(_7e.stroke);}if("fill" in _7e){_7f.setFill(_7e.fill);}if("font" in _7e){_7f.setFont(_7e.font);}if("children" in _7e){arr.forEach(_7e.children,_71.hitch(null,gu.deserialize,_7f));}return _7f;},fromJson:function(_80,_81){return gu.deserialize(_80,_73.fromJson(_81));},toSvg:function(_82){var _83=new _74();if(g.renderer==="svg"){try{var svg=gu._cleanSvg(gu._innerXML(_82.rawNode));_83.callback(svg);}catch(e){_83.errback(e);}}else{if(!gu._initSvgSerializerDeferred){gu._initSvgSerializer();}var _84=gu.toJson(_82);var _85=function(){try{var _86=_82.getDimensions();var _87=_86.width;var _88=_86.height;var _89=gu._gfxSvgProxy.document.createElement("div");gu._gfxSvgProxy.document.body.appendChild(_89);win.withDoc(gu._gfxSvgProxy.document,function(){_72.style(_89,"width",_87);_72.style(_89,"height",_88);},this);var ts=gu._gfxSvgProxy[dojox._scopeName].gfx.createSurface(_89,_87,_88);var _8a=function(_8b){try{gu._gfxSvgProxy[dojox._scopeName].gfx.utils.fromJson(_8b,_84);var svg=gu._cleanSvg(_89.innerHTML);_8b.clear();_8b.destroy();gu._gfxSvgProxy.document.body.removeChild(_89);_83.callback(svg);}catch(e){_83.errback(e);}};ts.whenLoaded(null,_8a);}catch(ex){_83.errback(ex);}};if(gu._initSvgSerializerDeferred.fired>0){_85();}else{gu._initSvgSerializerDeferred.addCallback(_85);}}return _83;},_gfxSvgProxy:null,_initSvgSerializerDeferred:null,_svgSerializerInitialized:function(){gu._initSvgSerializerDeferred.callback(true);},_initSvgSerializer:function(){if(!gu._initSvgSerializerDeferred){gu._initSvgSerializerDeferred=new _74();var f=win.doc.createElement("iframe");_72.style(f,{display:"none",position:"absolute",width:"1em",height:"1em",top:"-10000px"});var _8c;if(has("ie")){f.onreadystatechange=function(){if(f.contentWindow.document.readyState=="complete"){f.onreadystatechange=function(){};_8c=setInterval(function(){if(f.contentWindow[_70.scopeMap["dojo"][1]._scopeName]&&f.contentWindow[_70.scopeMap["dojox"][1]._scopeName].gfx&&f.contentWindow[_70.scopeMap["dojox"][1]._scopeName].gfx.utils){clearInterval(_8c);f.contentWindow.parent[_70.scopeMap["dojox"][1]._scopeName].gfx.utils._gfxSvgProxy=f.contentWindow;f.contentWindow.parent[_70.scopeMap["dojox"][1]._scopeName].gfx.utils._svgSerializerInitialized();}},50);}};}else{f.onload=function(){f.onload=function(){};_8c=setInterval(function(){if(f.contentWindow[_70.scopeMap["dojo"][1]._scopeName]&&f.contentWindow[_70.scopeMap["dojox"][1]._scopeName].gfx&&f.contentWindow[_70.scopeMap["dojox"][1]._scopeName].gfx.utils){clearInterval(_8c);f.contentWindow.parent[_70.scopeMap["dojox"][1]._scopeName].gfx.utils._gfxSvgProxy=f.contentWindow;f.contentWindow.parent[_70.scopeMap["dojox"][1]._scopeName].gfx.utils._svgSerializerInitialized();}},50);};}var uri=(_76["dojoxGfxSvgProxyFrameUrl"]||_75.toUrl("dojox/gfx/resources/gfxSvgProxyFrame.html"));f.setAttribute("src",uri.toString());win.body().appendChild(f);}},_innerXML:function(_8d){if(_8d.innerXML){return _8d.innerXML;}else{if(_8d.xml){return _8d.xml;}else{if(typeof XMLSerializer!="undefined"){return (new XMLSerializer()).serializeToString(_8d);}}}return null;},_cleanSvg:function(svg){if(svg){if(svg.indexOf("xmlns=\"http://www.w3.org/2000/svg\"")==-1){svg=svg.substring(4,svg.length);svg="<svg xmlns=\"http://www.w3.org/2000/svg\""+svg;}if(svg.indexOf("xmlns:xlink=\"http://www.w3.org/1999/xlink\"")==-1){svg=svg.substring(4,svg.length);svg="<svg xmlns:xlink=\"http://www.w3.org/1999/xlink\""+svg;}if(svg.indexOf("xlink:href")===-1){svg=svg.replace(/href\s*=/g,"xlink:href=");}svg=svg.replace(/<img\b([^>]*)>/gi,"<image $1 />");svg=svg.replace(/\bdojoGfx\w*\s*=\s*(['"])\w*\1/g,"");svg=svg.replace(/\b__gfxObject__\s*=\s*(['"])\w*\1/g,"");svg=svg.replace(/[=]([^"']+?)(\s|>)/g,"=\"$1\"$2");}return svg;}});return gu;});},"dojox/gfx/Moveable":function(){define(["dojo/_base/lang","dojo/_base/declare","dojo/_base/array","dojo/_base/event","dojo/topic","dojo/touch","dojo/dom-class","dojo/_base/window","./Mover"],function(_8e,_8f,arr,_90,_91,_92,_93,win,_94){return _8f("dojox.gfx.Moveable",null,{constructor:function(_95,_96){this.shape=_95;this.delay=(_96&&_96.delay>0)?_96.delay:0;this.mover=(_96&&_96.mover)?_96.mover:_94;this.events=[this.shape.on(_92.press,_8e.hitch(this,"onMouseDown"))];},destroy:function(){arr.forEach(this.events,function(_97){_97.remove();});this.events=this.shape=null;},onMouseDown:function(e){if(this.delay){this.events.push(this.shape.on(_92.move,_8e.hitch(this,"onMouseMove")),this.shape.on(_92.release,_8e.hitch(this,"onMouseUp")));this._lastX=e.clientX;this._lastY=e.clientY;}else{new this.mover(this.shape,e,this);}_90.stop(e);},onMouseMove:function(e){var _98=e.clientX,_99=e.clientY;if(Math.abs(_98-this._lastX)>this.delay||Math.abs(_99-this._lastY)>this.delay){this.onMouseUp(e);new this.mover(this.shape,e,this);}_90.stop(e);},onMouseUp:function(e){this.events.pop().remove();},onMoveStart:function(_9a){_91.publish("/gfx/move/start",_9a);_93.add(win.body(),"dojoMove");},onMoveStop:function(_9b){_91.publish("/gfx/move/stop",_9b);_93.remove(win.body(),"dojoMove");},onFirstMove:function(_9c){},onMove:function(_9d,_9e){this.onMoving(_9d,_9e);this.shape.applyLeftTransform(_9e);this.onMoved(_9d,_9e);},onMoving:function(_9f,_a0){},onMoved:function(_a1,_a2){}});});},"dojo/touch":function(){define(["./_base/kernel","./aspect","./dom","./dom-class","./_base/lang","./on","./has","./mouse","./domReady","./_base/window"],function(_a3,_a4,dom,_a5,_a6,on,has,_a7,_a8,win){var _a9=has("touch");var _aa=has("ios")<5;var _ab=navigator.msPointerEnabled;var _ac,_ad,_ae,_af,_b0,_b1,_b2,_b3;var _b4;function _b5(_b6,_b7,_b8){if(_ab&&_b8){return function(_b9,_ba){return on(_b9,_b8,_ba);};}else{if(_a9){return function(_bb,_bc){var _bd=on(_bb,_b7,_bc),_be=on(_bb,_b6,function(evt){if(!_b4||(new Date()).getTime()>_b4+1000){_bc.call(this,evt);}});return {remove:function(){_bd.remove();_be.remove();}};};}else{return function(_bf,_c0){return on(_bf,_b6,_c0);};}}};function _c1(_c2){do{if(_c2.dojoClick){return _c2;}}while(_c2=_c2.parentNode);};function _c3(e,_c4,_c5){var _c6=_c1(e.target);_ad=!e.target.disabled&&_c6&&_c6.dojoClick;if(_ad){var _c7=(_ad=="useTarget");_ae=(_c7?_c6:e.target);if(_c7){e.preventDefault();}_af=e.touches?e.touches[0].pageX:e.clientX;_b0=e.touches?e.touches[0].pageY:e.clientY;_b1=(typeof _ad=="object"?_ad.x:(typeof _ad=="number"?_ad:0))||4;_b2=(typeof _ad=="object"?_ad.y:(typeof _ad=="number"?_ad:0))||4;if(!_ac){_ac=true;function _c8(e){if(_c7){_ad=dom.isDescendant(win.doc.elementFromPoint((e.changedTouches?e.changedTouches[0].pageX:e.clientX),(e.changedTouches?e.changedTouches[0].pageY:e.clientY)),_ae);}else{_ad=_ad&&e.target==_ae&&Math.abs((e.changedTouches?e.changedTouches[0].pageX:e.clientX)-_af)<=_b1&&Math.abs((e.changedTouches?e.changedTouches[0].pageY:e.clientY)-_b0)<=_b2;}};win.doc.addEventListener(_c4,function(e){_c8(e);if(_c7){e.preventDefault();}},true);win.doc.addEventListener(_c5,function(e){_c8(e);if(_ad){_b3=(new Date()).getTime();var _c9=(_c7?_ae:e.target);if(_c9.tagName==="LABEL"){_c9=dom.byId(_c9.getAttribute("for"))||_c9;}setTimeout(function(){on.emit(_c9,"click",{bubbles:true,cancelable:true,_dojo_click:true});},0);}},true);function _ca(_cb){win.doc.addEventListener(_cb,function(e){if(!e._dojo_click&&(new Date()).getTime()<=_b3+1000&&!(e.target.tagName=="INPUT"&&_a5.contains(e.target,"dijitOffScreen"))){e.stopPropagation();e.stopImmediatePropagation&&e.stopImmediatePropagation();if(_cb=="click"&&(e.target.tagName!="INPUT"||e.target.type=="radio"||e.target.type=="checkbox")&&e.target.tagName!="TEXTAREA"&&e.target.tagName!="AUDIO"&&e.target.tagName!="VIDEO"){e.preventDefault();}}},true);};_ca("click");_ca("mousedown");_ca("mouseup");}}};var _cc;if(_a9){if(_ab){_a8(function(){win.doc.addEventListener("MSPointerDown",function(evt){_c3(evt,"MSPointerMove","MSPointerUp");},true);});}else{_a8(function(){_cc=win.body();win.doc.addEventListener("touchstart",function(evt){_b4=(new Date()).getTime();var _cd=_cc;_cc=evt.target;on.emit(_cd,"dojotouchout",{relatedTarget:_cc,bubbles:true});on.emit(_cc,"dojotouchover",{relatedTarget:_cd,bubbles:true});_c3(evt,"touchmove","touchend");},true);function _ce(evt){var _cf=_a6.delegate(evt,{bubbles:true});if(has("ios")>=6){_cf.touches=evt.touches;_cf.altKey=evt.altKey;_cf.changedTouches=evt.changedTouches;_cf.ctrlKey=evt.ctrlKey;_cf.metaKey=evt.metaKey;_cf.shiftKey=evt.shiftKey;_cf.targetTouches=evt.targetTouches;}return _cf;};on(win.doc,"touchmove",function(evt){_b4=(new Date()).getTime();var _d0=win.doc.elementFromPoint(evt.pageX-(_aa?0:win.global.pageXOffset),evt.pageY-(_aa?0:win.global.pageYOffset));if(_d0){if(_cc!==_d0){on.emit(_cc,"dojotouchout",{relatedTarget:_d0,bubbles:true});on.emit(_d0,"dojotouchover",{relatedTarget:_cc,bubbles:true});_cc=_d0;}if(!on.emit(_d0,"dojotouchmove",_ce(evt))){evt.preventDefault();}}});on(win.doc,"touchend",function(evt){_b4=(new Date()).getTime();var _d1=win.doc.elementFromPoint(evt.pageX-(_aa?0:win.global.pageXOffset),evt.pageY-(_aa?0:win.global.pageYOffset))||win.body();on.emit(_d1,"dojotouchend",_ce(evt));});});}}var _d2={press:_b5("mousedown","touchstart","MSPointerDown"),move:_b5("mousemove","dojotouchmove","MSPointerMove"),release:_b5("mouseup","dojotouchend","MSPointerUp"),cancel:_b5(_a7.leave,"touchcancel",_a9?"MSPointerCancel":null),over:_b5("mouseover","dojotouchover","MSPointerOver"),out:_b5("mouseout","dojotouchout","MSPointerOut"),enter:_a7._eventHandler(_b5("mouseover","dojotouchover","MSPointerOver")),leave:_a7._eventHandler(_b5("mouseout","dojotouchout","MSPointerOut"))};1&&(_a3.touch=_d2);return _d2;});},"dojox/gfx/Mover":function(){define(["dojo/_base/lang","dojo/_base/array","dojo/_base/declare","dojo/on","dojo/touch","dojo/_base/event"],function(_d3,arr,_d4,on,_d5,_d6){return _d4("dojox.gfx.Mover",null,{constructor:function(_d7,e,_d8){this.shape=_d7;this.lastX=e.clientX;this.lastY=e.clientY;var h=this.host=_d8,d=document,_d9=on(d,_d5.move,_d3.hitch(this,"onFirstMove"));this.events=[on(d,_d5.move,_d3.hitch(this,"onMouseMove")),on(d,_d5.release,_d3.hitch(this,"destroy")),on(d,"dragstart",_d3.hitch(_d6,"stop")),on(d,"selectstart",_d3.hitch(_d6,"stop")),_d9];if(h&&h.onMoveStart){h.onMoveStart(this);}},onMouseMove:function(e){var x=e.clientX;var y=e.clientY;this.host.onMove(this,{dx:x-this.lastX,dy:y-this.lastY});this.lastX=x;this.lastY=y;_d6.stop(e);},onFirstMove:function(){this.host.onFirstMove(this);this.events.pop().remove();},destroy:function(){arr.forEach(this.events,function(_da){_da.remove();});var h=this.host;if(h&&h.onMoveStop){h.onMoveStop(this);}this.events=this.shape=null;}});});},"dojo/text":function(){define(["./_base/kernel","require","./has","./request"],function(_db,_dc,has,_dd){var _de;if(1){_de=function(url,_df,_e0){_dd(url,{sync:!!_df}).then(_e0);};}else{if(_dc.getText){_de=_dc.getText;}else{console.error("dojo/text plugin failed to load because loader does not support getText");}}var _e1={},_e2=function(_e3){if(_e3){_e3=_e3.replace(/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,"");var _e4=_e3.match(/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im);if(_e4){_e3=_e4[1];}}else{_e3="";}return _e3;},_e5={},_e6={};_db.cache=function(_e7,url,_e8){var key;if(typeof _e7=="string"){if(/\//.test(_e7)){key=_e7;_e8=url;}else{key=_dc.toUrl(_e7.replace(/\./g,"/")+(url?("/"+url):""));}}else{key=_e7+"";_e8=url;}var val=(_e8!=undefined&&typeof _e8!="string")?_e8.value:_e8,_e9=_e8&&_e8.sanitize;if(typeof val=="string"){_e1[key]=val;return _e9?_e2(val):val;}else{if(val===null){delete _e1[key];return null;}else{if(!(key in _e1)){_de(key,true,function(_ea){_e1[key]=_ea;});}return _e9?_e2(_e1[key]):_e1[key];}}};return {dynamic:true,normalize:function(id,_eb){var _ec=id.split("!"),url=_ec[0];return (/^\./.test(url)?_eb(url):url)+(_ec[1]?"!"+_ec[1]:"");},load:function(id,_ed,_ee){var _ef=id.split("!"),_f0=_ef.length>1,_f1=_ef[0],url=_ed.toUrl(_ef[0]),_f2="url:"+url,_f3=_e5,_f4=function(_f5){_ee(_f0?_e2(_f5):_f5);};if(_f1 in _e1){_f3=_e1[_f1];}else{if(_ed.cache&&_f2 in _ed.cache){_f3=_ed.cache[_f2];}else{if(url in _e1){_f3=_e1[url];}}}if(_f3===_e5){if(_e6[url]){_e6[url].push(_f4);}else{var _f6=_e6[url]=[_f4];_de(url,!_ed.async,function(_f7){_e1[_f1]=_e1[url]=_f7;for(var i=0;i<_f6.length;){_f6[i++](_f7);}delete _e6[url];});}}else{_f4(_f3);}}};});},"dojo/request":function(){define(["./request/default!"],function(_f8){return _f8;});},"dojo/request/default":function(){define(["exports","require","../has"],function(_f9,_fa,has){var _fb=has("config-requestProvider"),_fc;if(1){_fc="./xhr";}else{if(0){_fc="./node";}}if(!_fb){_fb=_fc;}_f9.getPlatformDefaultId=function(){return _fc;};_f9.load=function(id,_fd,_fe,_ff){_fa([id=="platform"?_fc:_fb],function(_100){_fe(_100);});};});},"url:demos/gfxserialization/resources/shapes.json":"[\n {\n   shape:{ type:'rect', r:8, x:10,y:20,width:80,height:80},\n   fill:'rgba(238,223,204,.6)',\n   stroke:{color:'#CDC0B0', width:2}\n },\n {\n   shape:{type:'polyline', points:[117.639953710391,195.182708784827,82.3600462896092,195.182708784827,49.4625123637738,182.438136245216,23.390346181097,158.670216307581,7.66473825540938,127.088938262093,4.40951907567668,91.9595287066958,14.064324029914,58.0264090606251,35.3252182099305,29.8724351619895,65.3208000460332,11.2999571923546,99.9999999999999,4.81729121517272,134.679199953967,11.2999571923545,164.674781790069,29.8724351619893,185.935675970086,58.0264090606249,195.590480924323,91.9595287066956,192.335261744591,127.088938262092,176.609653818903,158.670216307581,150.537487636226,182.438136245216,117.639953710391,195.182708784827]},\n   fill:'rgba(205,205,180,.6)',\n   stroke:{color:'#8B8B7A', width:2},\n   transform:{xx:0.5,yy:0.5,dx:70,dy:35}\n },\n {\n   shape:{type:'path', path:\"M 10.499686,177.03840 L 31.174931,178.56990 C 52.615925,154.32116 61.039171,82.595924 187.38789,96.634671 C 182.79339,403.95560 48.021426,436.37234 56.444675,499.41907 C 59.507674,535.15406 87.840417,557.10556 118.47041,558.38181 C 215.21014,555.06356 210.87089,424.63084 240.99038,95.868921 L 365.80760,95.868921 C 359.17110,211.75239 341.04836,327.63586 339.00636,441.22208 C 340.53786,516.77606 386.48285,557.10556 446.97708,557.61606 C 546.52456,560.93431 577.92030,444.79558 577.92030,395.27709 L 556.47931,395.27710 C 554.43731,436.11709 534.78306,465.47083 492.92207,467.25758 C 378.82535,468.78908 441.61683,266.63113 442.38258,97.400421 L 577.92030,98.166171 L 577.15455,11.636437 C 13.807491,8.9075799 85.312284,-2.1366151 10.499686,177.03840 z\"}, \n   fill:'rgba(162,205,90)',\n   stroke:{color:'rgb(110,139,61)', width:4},\n   transform:{xx:0.2,yy:0.2,dx:170,dy:95}\n },\n {\n   shape:{type:'path', path:\"M694.594,104.102v60.604h40.403v-60.604H694.594z M694.998,471.96c-0.812,17.886-11.512,56.267-45.76,80.509l26.369,36.766c0,0,62.211-66.451,59.391-114.733V184.906h-40.4L694.998,471.96zM1046.902,335.198c0,73.13-60.609,121.206-121.207,121.206c-70.703,0-118.781-60.604-118.781-121.206c0-65.651,53.125-118.778,118.781-118.778C998.82,216.419,1046.902,277.023,1046.902,335.198z M1087.302,335.198c0-85.854-68.278-159.182-161.606-159.182c-65.656,0-141.411,40.403-159.185,136.359v48.076c0,5.054,2.623,15.148,5.051,22.625c25.251,80.809,98.578,113.732,154.134,113.732C1011.544,496.811,1087.302,428.531,1087.302,335.198z M280.47,94v126.057v71.61v89.591c-18.989,46.672-65.653,75.151-112.322,75.151c-70.703,0-118.78-60.604-118.78-121.206c0-65.651,53.128-118.779,118.78-118.779c30.608,0,56.867,10.708,77.064,27.268l7.072-45.048c-24.141-14.238-52.722-22.619-84.139-22.619c-65.65-0.009-141.404,40.395-159.18,136.351v48.076c0,5.054,2.623,15.149,5.052,22.625c25.252,80.809,98.578,113.733,154.129,113.733c42.524,0,82.729-16.869,112.322-45.232v36.355h50.499V94.011H280.47V94z M632.775,335.198c0,73.13-60.604,121.206-121.207,121.206c-70.703,0-118.78-60.604-118.78-121.206c0-65.651,53.125-118.778,118.78-118.778C584.699,216.419,632.775,277.023,632.775,335.198z M673.178,335.198c0-85.854-68.275-159.182-161.609-159.182c-65.651,0-141.406,40.403-159.182,136.359v48.076c0,5.054,2.623,15.148,5.052,22.625c25.25,80.809,98.578,113.732,154.129,113.732C597.423,496.811,673.178,428.531,673.178,335.198z M993.773,115.415h-131.31c-2.432,2.623-5.053,2.623-5.053,7.674c0,7.476,2.621,7.476,2.621,10.102h131.309c2.433-2.623,5.053-2.623,5.053-10.102C996.394,118.041,993.773,118.041,993.773,115.415z M579.65,115.415H448.34c-2.426,2.623-5.049,2.623-5.049,7.674c0,7.476,2.623,7.476,2.623,10.102h131.307c2.43-2.623,5.053-2.623,5.053-10.102C582.273,118.041,579.65,118.041,579.65,115.415z\"},\n   fill:'#010101',\n   transform:{xx:0.2,yy:0.2,dx:50,dy:150}\n }\n]\n\n"}});require(["dojo/ready","dojo/_base/sniff","dojo/on","dojo/aspect","dojo/string","dojo/json","dojo/dom","dojo/dom-geometry","dojo/dom-attr","dojo/_base/array","dojox/gfx","dojox/gfx/matrix","dojox/gfx/utils","dojox/gfx/Moveable","dojo/text!./resources/shapes.json"],function(_101,has,on,_102,_103,json,dom,_104,_105,_106,gfx,_107,_108,_109,lion){var _10a=[],cc,_10b,_10c,_10d;var _10e=function(){_108.fromJson(_10a[0],lion);_106.forEach(_10a[0].children,function(s){var v=new _109(s);_102.after(v,"onMoved",copy);});cc=_10a[1].createGroup();_10a[1].createImage({src:"./resources/specimen.png",width:300,height:300});};var copy=function(){if(_10c){clearTimeout(_10c);}var f=function(){var c=_108.serialize(_10a[0]);dojo.byId("textview").innerHTML=json.stringify(c);cc.clear();_108.deserialize(cc,c);};if(_10d){_10c=setTimeout(f,200);}else{f();}};_101(function(){var box;_106.forEach(["surface","overview"],function(id){box=_104.getContentBox(dom.byId(id));_10a.push(gfx.createSurface(id,box.width,box.height));});_10b=dom.byId("overview");_10e();copy();var cbox=dom.byId("bufferCheck");if(has("ie")<9){_105.set(cbox,"checked",true);}on(cbox,"click",function(){_10d=_105.get(cbox,"checked");});_10d=_105.get(cbox,"checked");});});