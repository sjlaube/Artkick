define.amd.jQuery=!0;
require("jquery dojo/ready dojo/dom dojo/dom-style dojo/dom-class dojo/dom-attr dojo/dom-construct dojo/dom-prop dojo/domReady dijit/registry dijit/form/Button dojo/on dojo/mouse dojo/hash dojox/mobile dojox/mobile/bookmarkable dojox/mobile/IconMenu dojo/date/stamp dojo/data/ItemFileWriteStore dojo/data/ItemFileReadStore dojo/_base/connect dijit/form/Select dojox/form/Rating dojox/form/PasswordValidator dojox/mobile/Carousel dojox/mobile/LongListMixin dojox/mobile/ScrollableView dojo/html dojox/gesture/swipe dojo/fx dojox/mobile/Accordion dojo/_base/lang dojo/dom-geometry dojox/widget/Standby dojo/window".split(" "),function(a,
b,c,d,e,g,k,m,w,f,ca,h,da,ea,fa,ha,ia,ja,s,N,C,ka,O,la,ma,na,oa,pa,P,qa,ra,sa,ta,t){b(function(){function b(){window.removePlayers={};var a=new s({data:{items:[]}});D.setStore(null);D.setStore(a);dojo.io.script.get({url:base+"player/getPlayers?email="+window.email+"&token="+window.token,callbackParamName:"callback",timeout:8E3,trytimes:5,error:function(a){console.log("timeout!getplayers"+l);this.trytimes--;0<this.trytimes?dojo.io.script.get(this):alert("Network problem7. Please check your connection and restart the app.")},
load:function(b){b=b.players;for(var c in b)a.newItem({label:b[c].nickname,paccount:b[c].account,onClick:function(){var a=this.paccount;window.removePlayers[a]=window.removePlayers[a]?!1:!0}}),window.removePlayers[b[c].account]=!1;dijit.registry.byId("select_player").getShowingView()}})}function c(){window.ownedPlayers={};var a=new s({data:{items:[]}});E.setStore(null);E.setStore(a);dojo.io.script.get({url:base+"player/getOwnedPlayers?email="+window.email+"&token="+window.token,callbackParamName:"callback",
timeout:8E3,trytimes:5,error:function(a){console.log("timeout!getOwnedPlayers"+l);this.trytimes--;0<this.trytimes?dojo.io.script.get(this):alert("Network problem8. Please check your connection and restart the app.")},load:function(b){b=b.players;for(var c in b)a.newItem({label:b[c].nickname,paccount:b[c].account,onClick:function(){var a=this.paccount;window.ownedPlayers[a]=window.ownedPlayers[a]?!1:!0}}),window.ownedPlayers[b[c].account]=!1;c=dijit.registry.byId("select_player").getShowingView();
0==b.length&&(myalert("You have no registered TVs"),F.hide(),c.performTransition("OptionsList",-1,"slide",null))}})}function e(){window.loadcatview=!0;a("#catList").html("");x=dojo.window.getBox();dojo.io.script.get({url:l=base+"content/getViewlistsByCategory2?catName=Spotlight&featured=true",callbackParamName:"callback",timeout:8E3,trytimes:5,error:function(a){console.log("timeout!getviewlists"+l);this.trytimes--;0<this.trytimes?dojo.io.script.get(this):alert("Network problem9a. Please check your connection and restart the app.")},
load:function(b){lists=b.viewlists;for(var c in lists){console.log(lists[c].coverImage);var e="images/ARTKICKlogoFULLCOLOR-APP_50x50.png",e=lists[c].coverImage?lists[c].coverImage:"";lists[c].name.split(" ").slice(0,-1).join(" ");lists[c].name.split(" ").slice(-1).join(" ");var f=lists[c].name;b=dojo.create("div",{},"catList");g.set(b,"class","categoryclass2");var e=dojo.create("img",{id:lists[c].id,src:e,onclick:function(){window.moregridpages=!1;dijit.registry.byId("ImageView").getShowingView();
window.currCat="Home";gotoView("select_category","blankview");window.currList=this.id;window.switchView=!0;window.restart=!1;window.spotlightlist=!0;updateImages(-1)},margin:"0px"},b),n=dojo.create("div",{id:"sux"+c,onclick:function(){submenuclick(this.id)}},b);newimg3=dojo.create("img",{src:"images/vertical-3dot-menu.png"},n);g.set(newimg3,"class","submenuclass");lists[c].curatornote&&(newimg4=dojo.create("img",{src:"images/note-white.png"},n),g.set(newimg4,"class","submenunote"));f=dojo.create("div",
{innerHTML:f},n);imgsize=window.computer?Math.min(228,275):Math.min(x.w/3-5,275);d.set(b,"width",imgsize+"px");g.set(f,"class","imagetxt");g.set(e,"class","featuredclass");a(".featuredclass").css("width",imgsize+"px");a(".featuredclass").css("height",imgsize+"px")}}})}function k(){if("PlaylistView"==currentView)realnode=dojo.byId("listList2").parentNode;else{if("IntroA"==currentView||"newLogin"==currentView||"registeruser"==currentView||"TalkToArt"==currentView)return;realnode="ImageView"==currentView?
dojo.byId("ImageList"):"GridView"==currentView?dojo.byId("Picturegrid").parentNode:"SearchView"==currentView?dojo.byId("searchGrid").parentNode:"select_category"==currentView?dojo.byId("test1").parentNode:dojo.byId(currentView)}var a=-dojo.position(realnode).h+80;0>=scrollpos&&scrollpos>a&&dijit.byId(currentView).scrollTo({y:scrollpos})}window.base="http://ancient-caverns-7624.herokuapp.com/api/v1.1/";var m=f.byId("PlaylistView"),w=f.byId("ArtistlistView"),Q=f.byId("MuseumlistView");f.byId("playerList");
var G=f.byId("playerList2"),u=f.byId("ImageList");f.byId("catList");var E=f.byId("ownedPlayerList"),D=f.byId("removePlayerList");f.byId("select_player");f.byId("select_player2");var R=f.byId("select_category"),H=f.byId("ImageView"),I=f.byId("OptionsList"),S=f.byId("About");f.byId("Picturegrid");f.byId("Picturegrid2");f.byId("Gettygrid");window.Searchgrid=f.byId("searchGrid");window.Searchgrid2=f.byId("searchGrid2");var J=f.byId("GridView");window.gettyView=f.byId("GettyView");window.progressBar1=
f.byId("gettyprogress");window.progressBar2=f.byId("searchprogress");f.byId("loginPassword");f.byId("Login");var T=f.byId("registernewchromecast");f.byId("quickhint");var K=f.byId("registernewroku"),U=f.byId("Import"),L=f.byId("registernewTV"),V=f.byId("AccountSettings"),W=f.byId("LogOff"),X=f.byId("RegisterNew"),Y=f.byId("add_user_player"),F=f.byId("removeplayer"),Z=f.byId("Slideshow");dijit.registry.byId("fillswitch");window.MyViewlist=f.byId("MyViewLists");window.MyViewlistEdit=f.byId("MyViewListsEdit");
var aa=f.byId("MylistView"),ba=f.byId("MylistViewEdit");window.btn1=f.byId("btn1");button2=f.byId("btn1");window.listList2=f.byId("listList2");window.artistList=f.byId("ArtistList");window.museumList=f.byId("MuseumList");window.commentList=f.byId("comment_list");window.viewlistbutton=f.byId("viewlistbutton");window.sharemenu2=f.byId("Sharemenu2");window.browsesearch=f.byId("browse-search");window.checkforparameters=!0;window.currentView="IntroA";window.lastView="";window.highresolution=!1;window.guest=
!1;window.autoIntro=!0;window.delItem="";window.restart=!1;var z=new O({numStars:5});window.boucingTime=1E3;window.firstdisplay=!0;window.foundIndex=!0;window.selectedPlayers={};window.justLogin=!0;window.justRefresh=!1;window.imageMap={};window.email=null;window.username=null;window.fill=!1;window.ownedPlayers={};window.removePlayers={};window.playerSet={};window.currList=null;window.currImage=null;window.currCat=null;window.currViewList=null;window.owndedPlayers={};window.removePlayers={};window.menushow=
!1;window.justCreatePlayer=!1;window.iframe={};window.url=null;window.shuffle=!1;window.loadartistview=!1;window.loadmuseumview=!1;window.loadcatview=!1;window.api_key="6ab1450c247164d8448624c47e894a6874c43a46";window.switchView=!1;window.sliderIndex=0;window.gridset=!1;window.currGridList=-1;window.transitiontype="slide";window.firstimageview="false";window.bigImg=!1;window.wipemenu=!1;window.wipesharemenu=!1;window.showingmenu="";window.numberplayers=0;window.shownoviewlist=!1;window.userName="";
window.isAdmin=!1;window.gridsize=100;window.moregridpages=!1;window.gettyEditorial="Any";window.gettyEditorialTime="Any";window.gettyEditorialOrientation="Any";window.gettylastQuery="";window.gettysubscribe=!1;window.sharedlist=!1;window.searchboxshow=!1;window.adnumber=0;window.spotlightlist=!1;window.dialMap={};window.firstupdateplayers=!0;window.dialLaunchSerial="none";window.replacesearchID="";window.searchtermindex="";window.blankview2up=!1;window.swipedImages=0;window.swipedGetty=0;window.swipedGettySample=
0;window.searchoptionexist="";window.newgettysubscription="Getty_All4";window.restoreTrans=!1;window.scrollpos=0;window.indialLaunch=!1;window.ScanNetworkComplete=!1;window.VLsharing=!1;window.playertoView="Home";showingScanNetwork=0;window.getCookie=function(a){var b=document.cookie,c=b.indexOf(" "+a+"=");-1==c&&(c=b.indexOf(a+"="));if(-1==c)b=null;else{var c=b.indexOf("=",c)+1,d=b.indexOf(";",c);-1==d&&(d=b.length);b=unescape(b.substring(c,d))}if(null==b)try{b=Android.getCookie(a)}catch(e){}return b};
window.setCookie=function(a,b,c){var d=new Date;d.setDate(d.getDate()+c);c=escape(b)+(null==c?"":"; expires="+d.toUTCString());document.cookie=a+"="+c;try{Android.setCookie(a,b)}catch(e){}};window.checkCookie=function(){var b=getCookie("email"),c=getCookie("token");console.log("checkCookie "+b);var d=f.byId("IntroA"),e=f.byId("ImageView"),n=dojo.byId("splash");f.byId("Sharemenu2");f.byId("OptionsList");window.blankview2up||d.show();e.startup();console.log("email1="+b);null!=b&&""!=b&&"null"!=b&&null!=
c&&""!=c&&"null"!=c?dojo.io.script.get({url:base+"client/verifyUser?email="+b+"&token="+c,callbackParamName:"callback",timeout:8E3,trytimes:5,error:function(a){console.log("timeout!verifyUser"+l);this.trytimes--;0<this.trytimes?dojo.io.script.get(this):alert("Network problem 1. Please check your connection and restart the app.")},load:function(d){console.log("VerifyUserStatus="+d.Status);if("success"==d.Status){window.email=b;-1<window.email.indexOf("@apple.store")&&(window.guest=!0,a("#MyViewlists").hide(),
a("#MySearchlists").hide());window.userID=d.userObj.id;window.isAdmin=d.userObj.isAdmin;if(runInWebview){calliOSFunction("setemail",[window.email],"onSuccess","onError");try{Android.setEmail(window.email)}catch(q){}}window.token=c;e.selected=!0;window.userName=d.userObj.name;window.firstdisplay=!1;n.style.display="none";window.activeplayer="No TV Selected";window.blankview2up&&(window.blankview2up=!1,dojo.style("blankview2","display","none"));console.log("Iv show, calling afterLogin()");window.afterLogin()}else ISgettyad&&
GuestLogin(),n.style.display="none"}}):ISgettyad?GuestLogin():(n.style.visibility="hidden",d.show(),console.log("I0 show"))};window.gotoView=function(b,c){hidemenu();window.scrollpos=0;"SearchView"==c&&(dijit.registry.byId("SearchBox").show(),dijit.byId(c).scrollTo({y:0}));if("select_category"==c||"PlaylistView"==c)findactivePlayer(),loadmetadata();if("ImageView"==b||"PlaylistView"==b||"select_category"==b)window.lastView=b,"dojox/mobile/ScrollableView"==dojo.byId(c).getAttribute("data-dojo-type")&&
dijit.byId(c).scrollTo({y:0});"PlaylistView"==b&&(dojo.style("gettysearchhint","display","none"),dojo.style("searchhint","display","none"));if("Slideshow"==c&&(window.countplayers(),0==window.numberplayers)){myalert("You have no connected TVs<br>Slideshow only works on connected TVs");return}"AccountSettings"==c&&(dojo.byId("useraccount").innerHTML="User: "+window.email);"ImageView"==c&&(window.computer&&(a(".CarouselWrapper").css("width","699px"),a(".CarouselWrapper").css("min-width","699px"),window.onresize()),
window.firstdisplay&&!window.computer&&(setTimeout(function(){dijit.registry.byId("Swipehint").show()},200),setTimeout(function(){dijit.registry.byId("Swipehint").hide()},2E3),window.firstdisplay=!1));"select_player2"==c&&updatePlayers2();("select_player2"==c||"select_player3"==c&&"select_player2"!=b&&"select_wifi"!=b)&&runInWebview&&(window.firstupdateplayers&&(window.firstupdateplayers=!1),ScanNetworkComplete=!1,window.playertoView=c,dialUpdate(),dojo.byId("scanid").innerHTML="Scanning Local Network",
dijit.registry.byId("ScanNetwork").show(),window.showingScanNetwork=setTimeout(function(){dijit.registry.byId("ScanNetwork").hide();ScanNetworkComplete||myalert("Having trouble scanning your local network, please try again")},45E3));"select_category"==c&&(window.currCat="Home",e());if("select_category"==c&&runInWebview){a(window).trigger("resize");calliOSFunction("blescan",[],"onSuccess","onError");try{Android.blescan()}catch(d){}}"select_player3"==c&&ConnectTV();window.currentView=c;dojo.style(dojo.byId(b),
"display","none");dojo.style(dojo.byId(c),"display","block")};window.getDefaults=function(){dojo.io.script.get({url:base+"client/getDefault",callbackParamName:"callback",timeout:8E3,trytimes:10,error:function(a){console.log("timeout!getDefault"+l);this.trytimes--;0<this.trytimes?dojo.io.script.get(this):alert("Network problem2. Please check your connection and restart the app.")},load:function(a){"success"==a.Status&&(window.defImage=a.defaults.image,window.defList=a.defaults.viewlist,window.defCat=
a.defaults.category,window.currImage=window.defImage,window.currCat=window.defCat,window.currList=window.defList)}})};window.syncImage=function(){var a=base+"client/update2?imageID="+window.currImage+"&stretch="+window.fill+"&email="+window.email+"&list="+window.currList+"&cat="+window.currCat+"&token="+window.token,b;for(b in window.selectedPlayers)window.selectedPlayers[b]&&(a+="&players[]="+b);window.guest||""==window.currImage||dojo.io.script.get({url:a,callbackParamName:"callback",load:function(a){}})};
window.getartists=function(){window.contemporary_artists=new N({url:"artist.txt"});window.contemporary_artists.fetch()};window.loadImages=function(b,c,d,e){var n;-1==b&&(window.swipedImages=0,window.swipedGetty=0,window.swipedGettySample=0);null==window.currList&&(window.currList=window.defList);var f=window.currCat;12<f.length&&(f=window.currCat.substr(0,9)+"...");f='<img src="images/Arrows-Back-icon-blue.png" alt="" style="margin-top:5px;margin-left:5px"><span style="font-family:\'Open Sans\', sans-serif;font-weight: 400;position:relative;top:-7px;color:#00C7FF;">'+
f+"</span>";console.log("cat str="+f);a("#viewlistbutton").html(f);var g=base+"client/getViewlist5?id="+window.currList+"&email="+window.email+"&tarImage="+b+"&forward="+c+"&numOfImg="+d+"&include=1&token="+window.token;" Top Lists"!=window.currCat&&(g+="&catName="+window.currCat);console.log("getViewlist5:"+g);a(window).trigger("resize");g=window.shuffle?g+"&shuffle=1":g+"&shuffle=0";"Getty"==window.currCat.substr(0,5)?(dojo.style("resetsearch","display","block"),dojo.style("imagesearch","display",
"none")):(dojo.style("resetsearch","display","none"),dojo.style("imagesearch","display","block"));dojo.io.script.get({url:g,timeout:8E3,trytimes:5,callbackParamName:"callback",error:function(a){console.log("timeout!"+g);"unkown viewlist"==a.Message&&myalert("This viewlist is no longer available");this.trytimes--;0<this.trytimes?dojo.io.script.get(this):alert("Network problem4. Please check your connection and restart the app.")},load:function(a){console.log("viewlist5 return:"+a.Status);if("unkown viewlist!"==
a.Message)dojo.style(dojo.byId("blankview"),"display","none"),gotoCategory("0"),myalert("This viewlist is no longer available");else if(0==a.imageSet.length)myalert("This viewlist is empty"),dojo.style(dojo.byId("blankview"),"display","none"),gotoCategory("0");else{window.imageMap={};window.currViewList=a.name;window.currImage==window.tarImage&&(window.foundIndex=!0);window.isgettyviewlist=!1;console.log("looking at viewlist: "+currViewList);a.searchTerm?"getty"==a.searchTerm.getty_db&&(console.log("getty viewlist"),
window.isgettyviewlist=!0):console.log("not getty viewlist");var b=0,d;for(d in a.imageSet)b++,imageMap[a.imageSet[d].id]=a.imageSet[d],n=a.imageSet[d].thumbnail,window.highresolution&&(n=a.imageSet[d].url),image={alt:a.imageSet[d].id,src:n},window.imageCurrStore.newItem(image),d==a.imageSet.length-1&&(window.currStartImg=a.imageSet[0].id,window.absStartImg=a.startImage,window.currEndImg=a.imageSet[d].id,window.absEndImg=a.endImage,window.listSize=a.imageNum,0==c?0==e&&1<a.imageSet.length?(window.currImage=
a.imageSet[d-1].id,window.sliderIndex=d-1,window.currAbsIndex=a.tarIndex-1,window.prevImg=a.imageSet[1].id):(window.currImage=a.imageSet[d].id,window.sliderIndex=d,window.currAbsIndex=a.tarIndex,window.prevImg=a.imageSet[0].id):0==e&&1<a.imageSet.length?(window.currImage=a.imageSet[1].id,window.sliderIndex=1,window.prevImg=a.imageSet[1].id,window.currAbsIndex=a.tarIndex+1):("1"==a.backward?(window.currImage=a.imageSet[1].id,window.sliderIndex=1,window.prevImg=a.imageSet[1].id):(window.currImage=a.imageSet[0].id,
window.sliderIndex=0,window.prevImg=a.imageSet[0].id),window.currAbsIndex=a.tarIndex),window.VLsharing||(u.setStore(null),u.setStore(window.imageCurrStore)));window.VLsharing||syncImage();window.foundIndex||window.currImage==window.tarImage||u.currentView.goTo(1);loadmetadata();window.bigImg?bigimage():smallimage();adjustSize();window.switchView&&(window.switchView=!1,setTimeout(function(){dijit.registry.byId("blankview").getShowingView();ISgettyad?(window.sharedlist=!1,window.restart=!1,window.justLogin=
!1,gotoView("blankview","ImageView")):!window.restart||window.sharedlist||window.spotlightlist?(window.sharedlist=!1,gotoView("blankview","ImageView")):(window.restart=!1,window.justLogin=!1,gotoView("blankview","select_category"),window.hint1=getCookie("hint1"),"false"==window.hint1&&(setCookie("hint1",!0,365),dojo.style("hint1","display","block")));hidemenu();dijit.registry.byId("tabnowshowing").set("selected",!0)},50));VLsharing=!1}}})};window.changeview=function(){window.xxx=u.currentView;u.currentView.goTo(1)};
window.updateImages=function(b){window.imageCurrStore=new s({data:{items:[]}});var c=get("currList"),d=get("currImage"),e=get("currCat");if(window.justLogin||window.justRefresh)window.restart=!0;window.guest&&0>email.indexOf("apple.store")?(console.log("guest"),window.switchView=!0,dijit.registry.byId("shuffletab").set("label","Shuffle"),ISgettyad&&window.restart?(window.tarImage=d,window.currList=c,window.currCat="Home",b=window.tarImage,gotoView("splash","blankview")):gotoView(currentView,"blankview"),
loadImages(b,1,15,1)):window.justLogin||window.justRefresh?(window.justRefresh=!1,dojo.io.script.get({url:base+"client/getUserStatus?email="+window.email+"&token="+window.token,callbackParamName:"callback",timeout:8E3,trytimes:5,error:function(a){console.log("timeout!getUserStatus"+l);this.trytimes--;0<this.trytimes?dojo.io.script.get(this):alert("Network problem5. Please check your connection and restart the app.")},load:function(b){console.log("getUserStatus:"+b.Status);if("success"==b.Status)if(window.tarImage=
b.curr_image,window.currList=b.curr_list,window.currCat=b.curr_cat,window.gettysubscribe=b.subscribed,window.adnumber=0,window.subscriptions=b.subscriptions,window.newsubscriptions=b.newSubscriptions,window.subscriptionSource=b.subsSrc,0==subscriptions.length?(clearInterval(window.AdInterval),dojo.style("gettyad","display","block"),window.AdInterval=setInterval(changeAd,5E3)):(dojo.style("gettyad","display","none"),"Getty_All"==subscriptions[0]&&"artkick-trial"!=b.subsSrc?dojo.style("inappsubscribe",
"display","none"):dojo.style("inappsubscribe","display","block")),window.temptarImage=b.curr_image,window.tempcurrList=b.curr_list,window.tempcurrCat=b.curr_cat,b.viewlist?(window.gname=b.viewlist.name,window.gimage=b.viewlist.coverImage):(window.gname="No previous getty search",window.gimag="images/blank.png"),window.previousgettysearch=b.gettyHistory?b.gettyHistory:"",window.gettylists=b.gettyLists?b.gettyLists:"",window.searchlists=b.searchLists?b.searchLists:"",window.fill="true"==b.fill,window.highresolution=
"true"==b.hires,window.shuffle="true"==b.shuffle,console.log("currList:"+window.currList+" currCat:"+window.currCat+" tarImage:"+window.tarImage),window.shuffle?(dijit.registry.byId("shuffletab").set("label","Shuffle On"),window.$("#myshuffle").addClass("mblTabBarButtonLabel2")):(dijit.registry.byId("shuffletab").set("label","Shuffle"),a("#myshuffle").removeClass("mblTabBarButtonLabel2")),window.highresolution?dojo.byId("hires-switch").setAttribute("src","images/checkbox_on.png"):dojo.byId("hires-switch").setAttribute("src",
"images/checkbox_off.png"),a("#slideshowvalue").val(b.autoInterval),subscription_categories(),c&&d&&e&&window.checkforparameters)window.tarImage=d,window.currList=c,window.currCat="Home",window.checkforparameters=!1,window.sharedlist=!0,"My Viewlists"!=e||window.guest?loadImages(window.tarImage,1,15,1):dojo.io.script.get({url:base+"user/saveAsMyViewlist?email="+window.email+"&token="+window.token+"&listId="+c,callbackParamName:"callback",load:function(a){console.log(a.Message);"failure"==a.Status?
-1<a.Message.indexOf("this is your own viewlist")||(window.tarImage=window.temptarImage,window.currList=window.tempcurrList,window.currCat=window.tempcurrCat,myalert(a.Message)):"error, list doesn't exist!"==a.Message?(window.tarImage=window.temptarImage,window.currList=window.tempcurrList,window.currCat=window.tempcurrCat,console.log("non existent list"),myalert("Shared Viewlist no longer exists")):usermessage(a.name+" added to My Viewlists");loadImages(window.tarImage,1,15,1)}});else{window.freeTrialEligible=
!1;window.showfewdays=!1;if(b.artkick_all_expire){var r=(new Date).getTime(),r=Math.floor((b.artkick_all_expire-r)/864E5);console.log("time remaining on sub="+r);1<r?usermessage(r+" days left on your Getty trial subscription"):0<=r&&(0==r?dojo.byId("gettydaysremaining").innerHTML="today.":dojo.byId("gettydaysremaining").innerHTML="tomorrow.",dijit.registry.byId("GettySubscribeRemind").show(),showfewdays=!0)}console.log("user times"+b.use_times);0!=b.use_times%5||b.didReview||0!=showfewdays||runInWebview&&
dijit.registry.byId("AskReview").show();0==newsubscriptions.length?loadImages(window.tarImage,1,15,1):completeTransaction(newsubscriptions[0],!0)}else window.tarImage=window.defImage,window.currList=window.defList,window.currCat=window.defCat,loadImages(window.tarImage,1,15,1)}})):"Getty"==currCat.substr(0,5)&&-1==b?(usermessage("Getting latest images"),updatecurrentsearch(lists[searchtermindex],b)):loadImages(b,1,15,1)};window.goToViewlists=function(){window.foundIndex=!0;window.justLogin=!1;window.currentView=
"PlaylistView";"Getty Entertainment"==window.currCat?dojo.byId("PlaylistHeaderName").innerHTML="Entertainment":30>window.currCat.length?dojo.byId("PlaylistHeaderName").innerHTML=window.currCat:dojo.byId("PlaylistHeaderName").innerHTML=window.currCat.substring(0,27)+"...";hidemenu();null==window.currCat&&(window.currCat=window.defCat);var a=dijit.byId("PlaylistView").containerNode;dojo.setStyle(a,{webkitTransform:"",transform:'translate3d("0px","0px","0px")',top:10,left:0});updateLists(window.currCat)};
window.updateLists=function(b){var c,e;c=2;e=dojo.window.getBox();500<e.w&&(c=3);700<e.w&&(c=4);imagewidth=Math.floor((e.w-30)/c);window.computer&&(imagewidth=Math.floor(223));console.log("size="+imagewidth+" dojo="+e.w);imageheight=imagewidth;"My Viewlists"==b?l=base+"user/getMyViewlists?email="+window.email+"&token="+window.token:"Getty"==b.substr(0,5)?(window.gettydomain=b.substr(6).toLowerCase(),l=base+"user/getMyViewlists?email="+window.email+"&token="+window.token+"&category="+gettydomain):
l="My Searches"==b?base+"user/getMyViewlists?email="+window.email+"&token="+window.token+"&category=artkick":base+"content/getViewlistsByCategory2?catName="+b+"&featured=true";"Getty"!=b.substr(0,5)||window.guest?(dojo.style("gettysearchhint","display","none"),dojo.style("searchhint","width",bodywidth+"px"),dojo.style("searchhint","display","block")):(dojo.style("searchhint","display","none"),dojo.style("gettysearchhint","width",bodywidth+"px"),dojo.style("gettysearchhint","display","block"));a("#listList2").html("");
standby.show();dojo.io.script.get({url:l,callbackParamName:"callback",timeout:8E3,trytimes:5,error:function(a){console.log("timeout!getviewlists"+l);this.trytimes--;0<this.trytimes?dojo.io.script.get(this):alert("Network problem9. Please check your connection and restart the app.")},load:function(a){window.lists=a.viewlists;0==window.lists.length&&myalert("There are no viewlists in "+b+". Tap the search icon <img src='images/search-icon-blue2.png'> to create one.");if("My Viewlists"==b){var c=dojo.create("div",
{},"listList2");g.set(c,"class","imagediv");var e=dojo.create("img",{id:"top_"+window.email,src:"images/Star-shaped_designs_on_crostata.jpg",onclick:function(){window.moregridpages=!1;gotoView("PlaylistView","blankview");window.currList=this.id;window.switchView=!0;updateImages(-1)},margin:"0px"},c);a=dojo.create("div",{innerHTML:"My Likes"},c);g.set(a,"class","imagetxt");d.set(e,"width",imagewidth+"px");d.set(c,"width",imagewidth+"px");d.set(e,"height",imageheight+"px");d.set(c,"height",imageheight+
45+"px")}else"My Searches"!=b&&"Getty"!=b.substr(0,5)&&"Sample"!=b.substr(0,6)&&(c=dojo.create("div",{},"listList2"),g.set(c,"class","imagediv"),a="Most Popular"," Top Lists"==b&&(a="Most Popular Across Artkick"),e=dojo.create("img",{id:"topLiked_"+b+window.email,src:"images/Topliked/"+b.trim()+".jpg",onclick:function(){window.moregridpages=!1;gotoView("PlaylistView","blankview");window.currList=this.id;window.switchView=!0;updateImages(-1)},margin:"0px"},c),a=dojo.create("div",{innerHTML:a},c),g.set(a,
"class","imagetxt"),d.set(e,"width",imagewidth+"px"),d.set(c,"width",imagewidth+"px"),d.set(e,"height",imageheight+"px"),d.set(c,"height",imageheight+45+"px"));for(var f in lists){"10 Most Important Paintings of All Time"==lists[f].name&&(lists[f].curatornote="This is a list of the most important paintings of all time.  It was creating by a set of <i>experts</i> who made up this list.<p>They come from around the world and created this list</p>");var e="images/ARTKICKlogoFULLCOLOR-APP_50x50.png",e=
lists[f].coverImage?lists[f].coverImage:"",c=lists[f].name.split(" ").slice(0,-1).join(" "),p=lists[f].name.split(" ").slice(-1).join(" ");a=lists[f].name;var q=lists[f].name;"Artists"==b&&("Elder"==p&&(c="Pieter",p="Brueghel the Elder"),"Younger"==p&&(c="Pieter",p="Brueghel the Younger"),q="<i><small>"+c+" </small></i><bold>"+p+"</bold>");lists[f].imageNum&&(a=q+"<br><i><small>"+lists[f].imageNum+" pictures</small></i>");"My Viewlists"==b&&lists[f].private_user!=window.email&&(a=lists[f].name+"<br><i><small>by "+
lists[f].private_name+"</small></i></br>");c=dojo.create("div",{},"listList2");g.set(c,"class","imagediv");e=dojo.create("img",{id:lists[f].id,alt:f,src:e,onclick:function(){window.moregridpages=!1;dijit.registry.byId("ImageView").getShowingView();window.searchtermindex=this.alt;gotoView("PlaylistView","blankview");window.currList=this.id;window.switchView=!0;updateImages(-1)},margin:"0px"},c);p=dojo.create("div",{id:"sub"+f,onclick:function(){submenuclick(this.id)}},c);q=dojo.create("img",{src:"images/vertical-3dot-menu.png"},
p);g.set(q,"class","submenuclass");lists[f].curatornote&&(newimg4=dojo.create("img",{src:"images/note-white.png"},p),g.set(newimg4,"class","submenunote"));a=dojo.create("div",{innerHTML:a},p);g.set(a,"class","imagetxt");d.set(e,"width",imagewidth+"px");d.set(c,"width",imagewidth+"px");d.set(e,"height",imageheight+"px");d.set(c,"height",imageheight+45+"px");lists[f].searchTerm&&lists[f].searchTerm.EditorialSegments&&(overlay="images/GettyImages.png",q=dojo.create("img",{src:overlay},p),g.set(q,"class",
"imagetxt2"),d.set(q,"class","imagetxt2"),d.set(q,"width",imagewidth/2+"px"),d.set(c,"height",imageheight+45+"px"))}standby.hide()}});gotoView("select_category","PlaylistView")};window.rememberSelectPlayers=function(a){var b=base+"client/selectPlayers?email="+window.email+"&token="+window.token,c=0,d;for(d in window.selectedPlayers)window.selectedPlayers[d]&&(b+="&players[]="+d,c++);0==c&&(b+="&players[]=");dojo.io.script.get({url:b,callbackParamName:"callback",timeout:8E3,trytimes:5,error:function(a){console.log("timeout!SelectPlayers"+
b);this.trytimes--;0<this.trytimes?dojo.io.script.get(this):alert("Network problem11. Please check your connection and restart the app.")},load:function(b){a&&updatePlayers()}})};window.loadmetadata=function(){dojo.byId("MediumDateSize");dojo.byId("ArtLocation");dojo.byId("viewtableline1");dojo.byId("viewtableline2");dojo.byId("viewtableline3");dojo.byId("viewtableline4");dojo.byId("viewtableline5");dojo.byId("viewtableline6");dojo.byId("viewtableline7");dojo.byId("viewtableline8");var a="",b="",
c="";disp="";b="No Title";c=window.imageMap[window.currImage].thumbnail;imageMap[currImage].Title&&(b=imageMap[currImage].Title.replace("'","",""));imageMap[currImage]["Artist First N"]&&(a=imageMap[currImage]["Artist First N"]+" ");imageMap[currImage]["Artist Last N"]&&(a+=imageMap[currImage]["Artist Last N"]);window.imageMap[window.currImage].icon&&(c=window.imageMap[window.currImage].icon);disp="<b>"+b+"</b><br>"+a;document.getElementById("showingsrc").setAttribute("src",c);document.getElementById("showingsrc2").setAttribute("src",
c);c=Object.keys(selectedPlayers).length;disp=b.length+a.length<bodywidth/7?"<b>"+b+"</b>-"+a:"<b>"+b.substring(0,bodywidth/7-5)+"...</b>-"+a;disp2=1<c?window.activeplayer+" +"+(c-1)+" others<br>"+disp:window.activeplayer+"<br>"+disp;dojo.byId("showingtitle").innerHTML=disp2;dojo.byId("showingtitle2").innerHTML=disp2;a=window.currViewList;"Most liked"==a?a=" Top Lists"==window.currCat?"Most Popular Across Artkick":"Most Popular in "+window.currCat:"My Top Rated"==a&&(a="My Likes");dojo.byId("imageListName").innerHTML=
a;dijit.registry.byId("ImageViewHeader").set("label",window.currAbsIndex+"/"+window.listSize)};window.updatePlayers2=function(){console.log("update players2");window.indialLaunch&&(window.indialLaunch=!1,syncImage(),setTimeout(function(){syncImage()},2E3));thisurl=base+"player/getPlayers?email="+window.email+"&token="+window.token;dojo.io.script.get({url:thisurl,callbackParamName:"callback",timeout:8E3,trytimes:5,error:function(a){console.log("timeout!Getplayers  "+thisurl);this.trytimes--;0<this.trytimes?
dojo.io.script.get(this):alert("Network problem12. Please check your connection and restart the app.")},load:function(b){(new Date).getTime();window.activeplayer="No TV Selected";G.destroyDescendants();G.destroyRecursive(!0);a("#playerList2").html("");window.playerlist=b.players;window.numberplayers=b.players.length;0<numberplayers?(dojo.style("haveTVfooter","display","block"),dojo.style("noTVfooter","display","none"),dojo.style("haveTVfooter2","display","block"),dojo.style("noTVfooter2","display",
"none")):(dojo.style("haveTVfooter","display","none"),dojo.style("haveTVfooter2","display","none"),window.guest||(dojo.style("noTVfooter2","display","block"),dojo.style("noTVfooter","display","block")));for(var c in dialMap)checkDial(c);var d=dojo.create("div",{innerHTML:b.players.length+" Screens Connected to Artkick",className:"wificlass",id:"devicescan"},"playerList2");for(c in b.players){d=b.players[c];d.account in selectedPlayers?(console.log(d.account+"in"),xclass="images/checkbox_on.png",window.playerSet["s"+
d.account]=!0,window.activeplayer=d.nickname):(console.log(d.account+"out"),xclass="images/checkbox_off.png",window.playerSet["s"+d.account]=!1);var e=d.curr_image.thumbnail;d.curr_image.icon&&(e=d.curr_image.icon);0==d.online&&(d.state="stopped",playerlist[c].state="stopped");"stopped"!=d.state&&"unknown"!=d.state||!d.uuid||"unknown"==d.uuid||(e="Android"==window.platform?"images/cast_off.png":"images/airplay.png",xclass="images/checkbox_off.png",d.account in selectedPlayers&&delete selectedPlayers[d.account]);
d.autoInterval||(d.autoInterval=0);var f=dojo.create("div",{id:"s"+d.account},"playerList2");g.set(f,"class","mblListItem2");dojo.style(f,"height","60px");var h=dojo.create("span",{classname:"iconsright"},f);dojo.create("img",{id:"img"+d.account,className:"iconclass",zindex:950,src:e,onclick:function(){changeplayerstatus(this.id)}},h);dojo.create("img",{id:"sd"+c,className:"playerdetailclass",zindex:950,src:"images/settings_device.png",onclick:function(){playerDetail(this.id)}},h);dojo.create("img",
{src:xclass,className:"checkboxclass",id:"icon"+d.account,onclick:function(){playerClick(this.id,!1)}},f);dojo.create("span",{id:"ptitle"+d.account,className:"playertitleclass2",innerHTML:d.nickname},f);newspan=dojo.create("div",{},f);selectauto=dojo.create("select",{id:"qd"+c,onchange:function(){setAuto2(this.value,this.id)},className:"myselect"},newspan);dojo.create("option",{value:"0",label:"Off"},selectauto);dojo.create("option",{value:"-1",label:"Every Morning"},selectauto);dojo.create("option",
{value:"30000",label:"Every 30 Seconds"},selectauto);dojo.create("option",{value:"60000",label:"Every Minute"},selectauto);dojo.create("option",{value:"120000",label:"Every 2 Minutes"},selectauto);dojo.create("option",{value:"300000",label:"Every 5 Minutes"},selectauto);dojo.create("option",{value:"600000",label:"Every 10 Minutes"},selectauto);dojo.create("option",{value:"1800000",label:"Every 30 Minutes"},selectauto);dojo.create("option",{value:"3600000",label:"Every Hour"},selectauto);dojo.create("option",
{value:"43200000",label:"Every 12 Hours"},selectauto);a(selectauto).val(d.autoInterval)}d=dojo.create("div",{className:"mblListItem2",onclick:function(){lastView="select_player2";gotoView(currentView,"select_player3")}},"playerList2");dojo.create("img",{src:"images/add_device.png",height:"30px"},d);dojo.create("span",{innerHTML:"Add a TV or Screen",className:"adddevice"},d);if(window.justLogin)window.justLogin=!1;else{for(c in selectedPlayers){found=!1;for(var k in playerlist)c==playerlist[k].account&&
(found=!0);found||(console.log("didn't find player: "+c),delete selectedPlayers[c])}window.activeplayer="No active TV";for(c in b.players)if(d=b.players[c],d.account in selectedPlayers&&(window.activeplayer=d.nickname),f=dojo.byId("s"+d.account),1==window.numberplayers&&(selectedPlayers[playerlist[0].account]=1,rememberSelectPlayers(!1)),window.justCreatePlayer){if(!window.autoIntro)break;rememberSelectPlayers(!1);1==window.numberplayers&&(window.currList=window.defList,window.currImage=window.defImage,
window.currCat=window.defCat);window.shuffle&&mediashuffle();window.justCreatePlayer=!1;window.switchView=!0;k=dijit.registry.byId("IntroA").getShowingView();window.currentView="blankview";I.hide();k.performTransition("blankview",1,"",null);loadmetadata();updateImages(-1)}}}})};window.production=!0;window.addEventListener("resize",checkOrientation,!1);window.addEventListener("orientationchange",checkOrientation,!1);0<window.base.indexOf("ancient")&&(window.production=!1,dojo.byId("gettyad").setAttribute("src",
"http://stage.artkick.net/images/GettyAds/GettyTrial_0.jpg"));window.adURL="http://stage.artkick.net/images/GettyAds";window.production&&(window.adURL="http://prod.artkick.net/images/GettyAds");window.BrowserDetect.init();console.log("OS is="+window.BrowserDetect.OS+" browser="+window.BrowserDetect.browser+" version="+window.BrowserDetect.version);console.log("place1");"iPhone"!=window.BrowserDetect.OS.substr(0,6)?(window.platform="Android",dojo.style("twittershare","display","none"),dojo.style("facebookshare",
"margin-right","30px"),dojo.style("facebookshare","margin-left","20px"),dojo.byId("emailShare").innerHTML='<a class="mblIconMenuItemAnchor" role="presentation"><table class="mblIconMenuItemTable" role="presentation"><tbody><tr><td><img alt="" src="images/share_android.png" class="mblImageIcon"><div class="mblIconMenuItemLabel">More</div></td></tr></tbody></table></a>'):window.platform="IOS";window.computer=!1;"IOS"!=window.platform&&(dojo.style("restoreTransDiv","display","none"),dojo.style("subrestore",
"display","none"));"IOS"==window.platform&&calliOSFunction("setProducts",["Getty_All4"],"onSuccess","onError");if("Windows"==window.BrowserDetect.OS||"Mac"==window.BrowserDetect.OS)window.computer=!0;window.computer?(dojo.style("splash","display","none"),a("#realcontent").css("width","699px"),a("#realcontent").css("min-width","699px"),a(".CarouselWrapper").css("width","699px"),a(".CarouselWrapper").css("min-width","699px"),a(".mmmmblCarouselHeaderBar").css("display","block"),a(".mblCarouselBtnContainer").css("float",
"none")):a(".mmmmblCarouselHeaderBar").css("display","none");window.bodywidth=dojo.byId("realcontent").clientWidth;window.bodyheight=dojo.byId("realcontent").clientHeight;a(".mblCarousel").css("height",bodyheight+"px");a("#gettyPopUpAd").css("width","699px");var M=!1,y=get("currList"),A=get("currImage"),B=get("currCat"),M=get("once");window.ISgettyad=!1;window.Showgettyad=get("gettyad");y&&(window.ISgettyad=!0);console.log("start, check currList="+y+"image"+A+"cat:"+B);if(y&&A&&B&&!M){var l="artkick://?currList="+
y+"&currImage="+A+"&currCat="+B+"&once=true";window.computer||openCustomURLinIFrame(l)}hidemenu();window.standby=new t({target:"PlaylistView"});document.body.appendChild(standby.domNode);standby.set("color","black");window.standby2=new t({target:"MylistViewEdit"});document.body.appendChild(standby2.domNode);standby2.set("color","black");window.standby3=new t({target:"MylistView"});document.body.appendChild(standby3.domNode);standby3.set("color","black");window.standby4=new t({target:"GridView"});
document.body.appendChild(standby4.domNode);standby4.set("color","black");window.standby5=new t({target:"InAppSubscribe"});document.body.appendChild(standby5.domNode);standby5.set("color","black");window.standby6=new t({target:"InAppSubscribe2"});document.body.appendChild(standby6.domNode);standby6.set("color","black");notiosapp="unknown";window.runInWebview=!1;androidapp=/Android.*Version/.test(navigator.userAgent);(iosv=/(iPhone|iPod|iPad)/.test(navigator.userAgent))&&(notiosapp=/Version/.test(navigator.userAgent));
androidapp&&(runInWebview=!0);0==notiosapp&&(runInWebview=!0);runInWebview||(dojo.style("import1","display","none"),dojo.style("import2","display","none"),dojo.style("import3","display","none"),dojo.style("import4","display","none"),dojo.style("emailShare","display","none"),dojo.style("facebookshare","margin-left","60px"));a(window).trigger("resize");getDefaults();checkCookie();a(".mblTabBarButtonLabel").each(function(b,c){"Shuffle On"==c.innerHTML&&(console.log("found:"+c.className),c.id="myshuffle");
a(".categoryclass").css("margin","-2px");a(".mblToolBarButton").css("background-color","transparent");a(".mblToolBarButton").css("background-image","none");a(".mblToolBarButton").css("border-width","0px");a(".mblToolBarButton").css("border-style","none");a(".mblToolBarButton").css("box-shadow","none");a(".mblToolBarButton").css("margin-left","-5px");a(".mblToolBarButton").css("margin-top","10px");a(".mblToolBarButton").css("font-family","Roboto");a(".mblToolBarButton").css("font-weight","700");a(".mblToolBarButton").css("font-size",
"15px")});dojo.byId("baseurlname").innerHTML="DB:"+window.base.substring(7,23);console.log("database:"+window.base);e();h(K,"beforeTransitionIn",function(){window.currentView="registernewroku"});h(U,"beforeTransitionIn",function(){window.currentView="Import"});h(X,"beforeTransitionIn",function(){window.autoIntro=!0;window.currentView="RegisterNew"});h(Z,"beforeTransitionIn",function(){0==window.numberplayers&&alert("no registered players");window.currentView="Slideshow"});h(K,"beforeTransitionOut",
function(){rememberSelectPlayers(!1)});h(L,"beforeTransitionOut",function(){rememberSelectPlayers(!1)});h(L,"beforeTransitionIn",function(){window.currentView="registernewTV"});h(T,"beforeTransitionIn",function(){console.log("new chromecast");window.currentView="registernewchromecast";window.updatePlayerLoop=setInterval(updatePlayers,1500);if(runInWebview){calliOSFunction("sayHello",["On",window.email],"onSuccess","onError");try{Android.setEmail(window.email),Android.setButtonVisible()}catch(a){}}});
window.updatePlayers=function(){dojo.io.script.get({url:base+"client/getSelectedPlayers?email="+window.email+"&token="+window.token,callbackParamName:"callback",timeout:8E3,trytimes:5,error:function(a){console.log("timeout!getselectedPlayers"+l);this.trytimes--;0<this.trytimes?dojo.io.script.get(this):alert("Network problem13. Please check your connection and restart the app.")},load:function(a){if("success"==a.Status){for(var b in a.selectedPlayers)""!=a.selectedPlayers[b]&&(selectedPlayers[a.selectedPlayers[b]]=
1);updatePlayers2()}}})};window.showquickhint=function(){hintsrc="images/Artkick_Hints.jpg";x=dojo.window.getBox();600<x.w&&(hintsrc="images/Android_Hints.jpg");document.getElementById("hinturl").setAttribute("src",hintsrc);gotoView(currentView,"quickhint")};window.afterLogin=function(){dojo.style(dojo.byId("OptionsList"),"display","none");gotoView(window.currentView,"blankview");H.hide();console.log("afterlogin:"+base+"client/getSelectedPlayers?email="+window.email+"&token="+window.token);dojo.io.script.get({url:base+
"client/getSelectedPlayers?email="+window.email+"&token="+window.token,callbackParamName:"callback",timeout:8E3,trytimes:5,error:function(a){console.log("timeout!getSelectedPlayers - window after login"+l);this.trytimes--;0<this.trytimes?dojo.io.script.get(this):alert("Network problem14. Please check your connection and restart the app.")},load:function(a){if("success"==a.Status){window.selectedPlayers={};for(var b in a.selectedPlayers)""!=a.selectedPlayers[b]&&(selectedPlayers[a.selectedPlayers[b]]=
1);updatePlayers()}window.switchView=!0;updateImages(window.tarImage)}})};h(H,"beforeTransitionIn",function(){window.currentView="ImageView";dijit.registry.byId("tabnowshowing").set("selected",!0);hidemenu()});h(R,"beforeTransitionIn",function(){window.currentView="select_category";window.foundIndex=!0;window.justLogin=!1;hidemenu();e()});h(m,"beforeTransitionIn",function(){window.currentView="PlaylistView"});h(w,"beforeTransitionIn",function(){window.currentView="ArtistlistView";dijit.registry.byId("tabcategory5").set("selected",
!0)});h(Q,"beforeTransitionIn",function(){window.currentView="MuseumlistView";dijit.registry.byId("tabcategory6").set("selected",!0)});h(V,"beforeTransitionIn",function(){window.currentView="AccountSettings";dojo.byId("useraccount").innerHTML="User: "+window.email});h(S,"beforeTransitionIn",function(){window.currentView="About"});h(W,"beforeTransitionIn",function(){window.currentView="LogOff"});h(I,"beforeTransitionIn",function(){window.currentView="OptionsList"});h(Y,"beforeTransitionIn",function(){window.currentView=
"add_user_player";dojo.byId("addPlayerEmail").value="";c()});h(F,"beforeTransitionIn",function(){window.currentView="removeplayer";b()});h(aa,"beforeTransitionIn",function(){window.currentView="MylistView";showmyviewlists()});h(ba,"beforeTransitionIn",function(){window.lastView=window.currentView;window.currentView="MylistViewEdit";editmyviewlists()});h(J,"beforeTransitionIn",function(){window.wipemenu?showmenu():(window.currentView="GridView",dijit.registry.byId("gridshowing").set("selected",!0),
window.gridPages=Math.ceil(window.listSize/window.gridsize),hidebutton("GridView",!1),window.currGridList=window.currList,window.targImageGrid=-1,window.moregridpages=!1,standby4.show(),loadGrid(0,Picturegrid,window.currList))});h(document,"mousewheel",function(b){0!=b.deltaY&&(window.scrollpos=0>b.deltaY?scrollpos+50:scrollpos-50,k());0!=b.deltaX&&"ImageView"==currentView&&(0<b.deltaX?a(".nextButton").click():a(".prevButton").click())});h(document,"keydown",function(b){"ImageView"==currentView&&
("Right"==b.keyIdentifier?a(".nextButton").click():"Left"==b.keyIdentifier&&a(".prevButton").click());"dojox/mobile/ScrollableView"==dojo.byId(currentView).getAttribute("data-dojo-type")&&("Down"==b.keyIdentifier?window.scrollpos=scrollpos-50:"Up"==b.keyIdentifier&&(window.scrollpos=scrollpos+50),k())});dojo.connect(Picturegrid,P.end,function(a){window.paneHeight=dojo.coords(Picturegrid).h;window.scrollHeight=-dojo.coords(Picturegrid).y;window.buttonHeight=window.morebuttoncoords.t;Math.abs(a.dx)<
Math.abs(a.dy)&&0>a.dy&&scrollHeight<window.buttonHeight&&1200>window.buttonHeight-scrollHeight&&(window.moregridpages=!0,loadGrid(1,Picturegrid,window.currList))});window.hidebutton=function(a,b){d.set(dijit.registry.byId(a).domNode,{visibility:b?"hidden":"visible",display:b?"none":"block"})};window.loadGrid=function(b,c,d){var e=(new Date).getTime();void 0!=window.GridClickTime&&e-window.GridClickTime<window.boucingTime&&console.log("returning from loadgrid");window.GridClickTime=e;window.coords=
c;console.log("entering loadgrid, coordinates height:"+window.coords.scrollHeight+" Top:"+window.coords.scrollTop+" listID:"+d+" moregridpages="+window.moregridpages);include=forward=1;console.log("page="+b+" current grid page="+window.currGridPage);0==b?(window.targImageGrid=-1,forward=include=1,window.currGridPage=1):1==b?(include=0,forward=1,window.targImageGrid=window.lastGridImage,window.currGridPage+=1):-1==b&&(forward=include=0,window.targImageGrid=window.firstGridImage,--window.currGridPage);
var f=base+"client/getViewlist6?id="+d+"&email="+window.email+"&tarImage="+window.targImageGrid+"&forward="+forward+"&numOfImg="+window.gridsize+"&include="+include+"&token="+window.token;" Top Lists"!=window.currCat&&(f+="&catName="+window.currCat);f=window.shuffle?f+"&shuffle=1":f+"&shuffle=0";window.imageCurrStore=new s({data:{items:[]}});b=window.currViewList;"Most liked"==b?(b="Most Popular",b=" Top Lists"==window.currCat?"Most Popular Across Artkick":"Most Popular in "+window.currCat):"My Top Rated"==
b&&(b="My Likes");dojo.byId("GridViewHeader").innerHTML=b;dijit.registry.byId("gridshowing").set("selected",!0);1!=window.moregridpages&&(dojo.empty(c),J.scrollTo({y:0}),console.log("emptied:"+c));window.morebutton&&dojo.destroy(window.morebutton);b=77;var g,h,k;bodyheight>bodywidth?(h=bodywidth/4-4,g=(bodyheight-80)/5):(h=bodywidth/5-5,g=(bodyheight-80)/4);a(".imageclass").css("height",g+"px");a(".imageclass").css("width",h+"px");b=Math.sqrt((bodyheight-115)*(bodywidth-0)/20*.8);console.log("ht:"+
bodyheight+"Wd:"+bodywidth+"dim="+b+"remainder:"+bodywidth%b);var l="";dojo.io.script.get({url:f,callbackParamName:"callback",timeout:8E3,trytimes:5,error:function(a){console.log("timeout!loadgrid"+f);this.trytimes--;0<this.trytimes?dojo.io.script.get(this):alert("Network problem15. Please check your connection and restart the app.")},load:function(a){if(0!=a.imageSet.length){for(var b in a.imageSet){k=a.imageSet[b].thumbnail;a.imageSet[b].icon&&(k=a.imageSet[b].icon);var e=dojo.create("div",{classname:"griddiv"},
c);console.log("currLIst="+d);window.pic=dojo.create("img",{className:"imageclass",id:a.imageSet[b].id+"~"+d,alt:a.imageSet[b].thumbnail,src:k,onclick:function(){window.editlist?clickdelete(this.parentNode,"ckc"+this.id.split("~").slice(0,-1).join("~")):(window.tarImage=this.id.split("~").slice(0,-1).join("~"),window.currImage=null,window.gridset=!0,window.switchView=!0,window.currList=this.id.split("~").slice(-1).join("~"),updateImages(this.id.split("~").slice(0,-1).join("~")),"GridView"==window.currentView?
gotoView("GridView","blankview"):"GettyView"==window.currentView?(gettyReset(),gotoView("GettyView","blankview")):"SearchView"==window.currentView&&gotoView("SearchView","blankview"))},width:h+"px",height:h+"px",hspace:"0px",vspace:"0px",margin:"2px"},e);console.log("added id:"+a.imageSet[b].id);window.editlist&&dojo.create("img",{classname:"checkclass",id:"ckc"+a.imageSet[b].id,src:"images/GrayTrash_25x25.png",onclick:function(){clickdelete(this.parentNode,this.id)},width:"20px",height:"20px",zindex:950},
e);""==l&&(l=pic)}window.currGridPage<window.gridPages&&10>window.currGridPage?(window.moregridpages=!0,b=dojo.create("img",{id:"morebutton"+pic,classname:"moregrid",src:"images/morebutton.png",onclick:function(){window.moregridpages=!0;loadGrid(1,Picturegrid,window.currList)},width:h+"px",height:g+"px",hspace:"0px",vspace:"0px"},c),window.morebutton="morebutton"+pic,window.morebuttoncoords=dojo.coords(b)):window.morebutton="";window.firstGridImage=a.imageSet[0].id;window.lastGridImage=a.imageSet[a.imageSet.length-
1].id;console.log("displaying picturegrid");dojo.style(dojo.byId(c),"display","block")}standby4.hide()}})};h(z,"click",function(){imageMap[window.currImage]["User Rating"]=z.value;dojo.io.script.get({url:base+"client/rateImage?imageId="+window.currImage+"&email="+window.email+"&rating="+z.value+"&token="+window.token,callbackParamName:"callback",timeout:8E3,trytimes:5,error:function(a){console.log("timeout!rateImage"+l);this.trytimes--;0<this.trytimes?dojo.io.script.get(this):alert("Network problem16. Please check your connection and restart the app.")},
load:function(a){}})});window.doPrev=function(a){if(void 0!=window.prevImg&&window.prevImg!=a)window.currAbsIndex--;else if(a==window.currStartImg&&a!=window.absStartImg){var b={items:[]};window.imageCurrStore=new s({data:b});window.switchView=!0;gotoView("ImageView","blankview");loadImages(window.currStartImg,0,15,0)}else a==window.currEndImg&&a!=window.absEndImg&&(b={items:[]},window.imageCurrStore=new s({data:b}),window.switchView=!0,gotoView("ImageView","blankview"),loadImages(window.currEndImg,
1,15,0));window.prevImg=a};window.doNext=function(a){window.prevImg=a;window.currAbsIndex++};C.subscribe("/dojox/mobile/deleteListItem",function(a){showDeleteButton(a)});C.subscribe("/dojox/mobile/viewChanged",function(a){window.swipedImages++;if(void 0!=imageMap[currImage].gettyDomain&&"photos"!=imageMap[currImage].gettyDomain&&"Getty_All"!=subscriptions[0]&&(void 0==subscriptions[0]?window.swipedGetty++:imageMap[currImage].gettyDomain.toLowerCase()!=subscriptions[0].substr(6).toLowerCase()&&window.swipedGetty++,
3<window.swipedGetty)){popGettyAd();return}if("I"!=(a+"").split(", ")[1][0]&&(window.currImage=a.getChildren()[0].alt,window.foundIndex||window.currImage==window.tarImage)){hidemenu();window.foundIndex=!0;window.currImage=a.getChildren()[0].alt;loadmetadata();a=base+"client/update2?imageID="+a.getChildren()[0].alt+"&stretch="+window.fill+"&email="+window.email+"&list="+window.currList+"&cat="+window.currCat+"&token="+window.token;for(var b in window.selectedPlayers)window.window.selectedPlayers[b]&&
(a+="&players[]="+b);dojo.io.script.get({url:a,callbackParamName:"callback",load:function(a){}})}})})});function mytest(){alert("mytest")}function testlaunch(){ret=open("http://www.artkick.com","_blank")}
function showiframe(a){if(runInWebview){calliOSFunction("loadLink",[a],"onSuccess","onError");try{Android.loadLink(a)}catch(b){}}else return dijit.registry.byId("ImageView"),ret=window.iframe=dojo.create("iframe",{src:a,style:"border: 0; width: 100%;height:700px"}),dijit.registry.byId("displayiframe").set("content",window.iframe),gotoView(currentView,"iframeview"),ret}
function showfullimage(){var a=dijit.registry.byId("ImageView");hidebutton("GridView",!0);document.getElementById("fullurl").setAttribute("src",window.imageMap[window.currImage].url);window.currentView="fullimageview";a.performTransition("fullimageview",1,"flip",null)}
function bigimage(){gotoView("GridView","ImageView");adjustSize();window.bigImg=!0;$("#myTabBar").hide();window.computer&&($(".mmmmblCarouselHeaderBar").css("display","none"),$(".mblCarouselItemImage.big").css("width",bodywidth+"px"),$(".mblCarouselItemImage.big").css("height",bodyheight-50+"px"));$("#ImageViewHeader").hide();$(".CarouselMeta").hide();$(".thumbDiv").hide();$(".mblCarouselItemImage.big").show();$("#ImageList").css("margin-top","-45px");$(".arrow").show()}
function smallimage(){window.bigImg=!1;$("#myTabBar").show();window.computer&&$(".mmmmblCarouselHeaderBar").css("display","block");$("#ImageViewHeader").show();$(".CarouselMeta").show();$(".thumbDiv").show();$(".mblCarouselItemImage.big").hide();$("#ImageList").css("margin-top","0px");dijit.registry.byId("tabnowshowing").set("selected",!0);$(".arrow").hide()}
function destroyiframe(){dijit.registry.byId("iframeview");hidebutton("GridView",!0);dojo.destroy(window.iframe);gotoView("iframeview",window.lastView)}function destroyfullimageview(){var a=dijit.registry.byId("fullimageview");window.currentView="ImageView";a.performTransition("ImageView",-1,"flip",null)}function showviewlistmenu(){var a=dijit.registry.byId("Viewlistmenu");window.viewmenushow||window.systemmenushow?hidemenu():(a.show(),window.viewmenushow=!0)}
function showsharemenu(){window.wipemenu&&showmenu();window.sharemenushow?hidemenu():(dijit.registry.byId("Sharemenu2").show(),window.sharemenushow=!0)}
function showmenu(){var a="wipemenu";window.guest?(guestmessage(),window.guestmenu=!0):(a="select_category"==window.currentView?"wipemenu3":"PlaylistView"==window.currentView?"wipemenu2a":"wipemenu",dojo.style(a,"margin-left",window.bodywidth-230+"px"),"ImageView"==currentView?dojo.style(a,"top","60px"):dojo.style(a,"top","47px"),window.wipemenu?(window.wipemenu=!1,dojo.style(window.showingmenu,"height",""),dojo.style(window.showingmenu,"display","block"),a={node:showingmenu,duration:100},dojo.fx.wipeOut(a).play()):
(window.showingmenu=a,hidemenu(),window.wipemenu=!0,dojo.style(a,"display","none"),a={node:a,duration:100},dojo.fx.wipeIn(a).play()))}function showviewlistmenu2(){var a=dijit.registry.byId("Viewlistmenu2");window.viewmenushow2||window.systemmenushow2?hidemenu():(a.show(),window.viewmenushow2=!0)}
function hidemenu(){window.sharemenushow||(dijit.registry.byId("Sharemenu2").hide(),dojo.style("Sharemenu2","display","none"));dijit.registry.byId("SearchBox").hide();window.searchboxshow=!1;window.sharemenushow=!1;window.systemmenushow=!1;window.viewmenushow=!1;window.systemmenushow2=!1;window.viewmenushow2=!1;window.wipemenu&&showmenu()}
function swapview(a){dijit.registry.byId("ImageView");dijit.registry.byId("blankview");window.currList=a;hidemenu();gotoView("ImageView","blankview");window.switchView=!0;updateImages(-1)}function callmyListView(){window.guest?(guestmessage(),window.guestmenu=!0):(window.wipemenu&&showmenu(),dijit.registry.byId(window.currentView).performTransition("MylistView",1,"none",null))}
function callEditmyListView(){window.wipemenu&&showmenu();"My Searches"==currCat&&(window.editmylistdomain="artkick");"My Viewlists"==currCat&&(window.editmylistdomain="personal");"Getty"==currCat.substr(0,5)&&(window.editmylistdomain=currCat.substr(6).toLowerCase());dijit.registry.byId(window.currentView).performTransition("MylistViewEdit",1,"none",null)}
function goToShare(){var a=dijit.registry.byId("ImageView").getShowingView();hidemenu();window.currentView="Share";a.performTransition("Share",1,"fade",null)}function notimplemented(){alert("Feature not yet implemented");hidemenu()}
function refreshView(){window.email&&"InAppSubscribe"!=currentView&&"InAppSubscribe2"!=currentView&&!window.restoreTrans&&(dijit.registry.byId("GuestMessage").hide(),function(a,b,c,d,e,g,k){a.localAnalyticsObject=e;a[e]=a[e]||function(){(a[e].q=a[e].q||[]).push(arguments)};a[e].l=1*new Date;g=b.createElement(c);k=b.getElementsByTagName(c)[0];g.async=1;g.src=d;k.parentNode.insertBefore(g,k)}(window,document,"script","//www.google-analytics.com/analytics.js","ga"),ga("create","UA-44460273-1","artkick.net"),
ga("require","displayfeatures"),ga("send","pageview"),window.switchView=!0,window.spotlightlist=!1,window.guest&&0>email.indexOf("apple.store")?(cleanUp(),dojo.style("searchmenu","display","none"),GuestLogin()):(window.firstupdateplayers=!1,dijit.registry.byId("IntroA"),$("select").blur(),0==window.subscriptions.length?(window.adnumber=0,clearInterval(window.AdInterval),dojo.style("gettyad","display","block"),window.AdInterval=setInterval(changeAd,5E3)):(clearInterval(window.AdInterval),dojo.style("gettyad",
"display","none"))))}function setCookie(a,b,c){var d=new Date;d.setDate(d.getDate()+c);c=escape(b)+(null==c?"":"; expires="+d.toUTCString());document.cookie=a+"="+c;try{Android.setCookie(a,b)}catch(e){}}
function cleanUp(){window.foundIndex=!1;window.selectedPlayers={};window.justLogin=!0;window.firstdisplay=!0;window.justRefresh=!1;window.imageMap={};window.email=null;window.fill=!1;window.ownedPlayers={};window.removePlayers={};window.playerSet={};window.currList=null;window.currImage=null;window.currCat=null;window.currViewList=null;window.owndedPlayers={};window.removePlayers={};window.menushow=!1;window.justCreatePlayer=!1;window.loadartistview=!1;window.loadmuseumview=!1;window.loadcatview=
!1;window.wipemenu=!1;window.shownoviewlist=!1;window.restart=!1;window.highresolution=!1;window.guest=!1;window.isAdmin=!1;window.userID="";window.gettysubscribe=!1;window.sharedlist=!1;window.searchboxshow=!1;$("#addPlayerEmail").attr("value","");getDefaults();window.adnumber=0;window.spotlightlist=!1;window.firstupdateplayers=!0;window.dialLaunchSerial="none";window.restoreTrans=!1;subscriptions=[];newsubscriptions=[]}
function sendfeedback(){window.location="mailto:feedback@artkick.com?Subject=Artkick%20feedback";window.currentView="ImageView";currView.performTransition("ImageView",1,"",null)}function openCustomURLinIFrame(a){var b=document.documentElement,c=document.createElement("IFRAME");c.setAttribute("src",a);b.appendChild(c);c.parentNode.removeChild(c)}window.calliOSFunction=function(a,b,c,d){var e={};e.functionname=a;c&&(e.success=c);d&&(e.error=d);b&&(e.args=b);a="js2ios://"+JSON.stringify(e);openCustomURLinIFrame(a)};
function onSuccess(a){a&&(JSON.parse(a),hidemenu())}function onError(a){a&&(JSON.parse(a),hidemenu())}function get(a){if(a=(new RegExp("[?&]"+encodeURIComponent(a)+"=([^&]*)")).exec(location.search))return decodeURIComponent(a[1])}function usermessage(a){var b=dijit.registry.byId("UserMessage");dojo.byId("UserMessage").innerHTML=a;setTimeout(function(){b.show()},100);setTimeout(function(){b.hide()},2E3)}
window.myalert=function(a){var b=dijit.registry.byId("Myalert");dojo.byId("myContent").innerHTML=a;dijit.registry.byId(window.currentView).show();b.show()};window.guestmessage=function(a){a=dijit.registry.byId("GuestMessage");dijit.registry.byId(window.currentView).show();a.show()};window.gotoSignin=function(){dijit.registry.byId("GuestMessage").hide();cleanUp();gotoView(window.currentView,"IntroA")};function setAutoIntro(a){window.autoIntro=a}
function gotoCategory(a){"Home"==window.currCat&&"0"==a?gotoView("ImageView","select_category"):(0!=a?window.currCat=a:dojo.style(dojo.byId("ImageView"),"display","none"),goToViewlists())}function doquickhint(){1==window.firstimageview?(window.firstimageview=!1,gotoView("quickhint","select_category")):gotoView("quickhint","OptionsList")}function callHelp(){hidemenu();runInWebview?showiframe("http://artkick.zendesk.com"):open("http://artkick.zendesk.com","_blank")}
window.adjustSize=function(){var a,b;$(".mblCarouselItemImage.big").css("height",$(window).height()+"px");$(".mblCarouselItemImage.big").css("width",$(window).width()+"px");$(".mblCarouselSlot.mblCarouselItem").css("width",$(window).width()+4+"px");$(".mblCarouselSlot.mblCarouselItem").css("margin-left","0%");$(".mblCarousel").css("height",1.5*bodyheight+"px");dojo.style("SearchBox","width",.95*bodywidth+"px");$(".thumbDiv").css("height",.5*$(window).height()+"px");$(".categoryclass").css("margin",
"-2px");$(".mblToolBarButton").css("background-color","transparent");$(".mblToolBarButton").css("background-image","none");$(".mblToolBarButton").css("border-width","0px");$(".mblToolBarButton").css("border-style","none");$(".mblToolBarButton").css("box-shadow","none");$(".mblToolBarButton").css("margin-left","-5px");$(".mblToolBarButton").css("margin-top","10px");$(".mblToolBarButton").css("font-family","Roboto");$(".mblToolBarButton").css("font-weight","700");$(".mblToolBarButton").css("font-size",
"15px");$(".mblTabBar").css("height","34px");$(".mblTabBarButton").css("font-family","Roboto");$(".mblTabBarButton").css("font-weight","700");$(".mblTabBarButton").css("font-size","15px");$("#ImageViewHeader").addClass("mblHeadingCenterTitle");700<bodywidth?$(".newcategoryclass").css("width",bodywidth/4-7):500<bodywidth?$(".newcategoryclass").css("width",bodywidth/3-7):$(".newcategoryclass").css("width",bodywidth/2-7);bodyheight>bodywidth?(b=bodywidth/4-4,imgsize=a=(bodyheight-80)/5):(b=bodywidth/
5-5,a=(bodyheight-80)/4,imgsize=b);$(".imageclass").css("height",a+"px");$(".imageclass").css("width",b+"px");imgsize=Math.min(bodywidth/3-10,imgsize);$(".featuredclass").css("width",imgsize+"px");$(".featuredclass").css("height",imgsize+"px");$(".categoryclass2").css("width",imgsize+"px");placeSubscribe()};$(window).resize(function(){console.log("resized");adjustSize()});var previousOrientation=window.orientation;
window.checkOrientation=function(){window.orientation!==previousOrientation&&(previousOrientation=window.orientation,dojox.mobile.resizeAll(),adjustSize())};
function copyright(){var a=dijit.registry.byId("CopyrightMessage"),b="Public Domain";window.imageMap[window.currImage].Copyright&&(b=window.imageMap[window.currImage].Copyright);window.imageMap[window.currImage]["Copyright Detail"]&&(b=window.imageMap[window.currImage]["Copyright Detail"]);dojo.byId("copyrightinformation").innerHTML=b;dijit.registry.byId(window.currentView).show();a.show()}function keypressed(a){console.log("key "+a)}
function FirefoxError(){dojo.style("Firefoxgo","display","block")};window.backbutton=function(){adjustSize();var a=(new Date).getTime();if(!(void 0!=window.BackClickTime&&a-window.BackClickTime<window.boucingTime)){window.BackClickTime=a;if(window.sharemenushow&&(hidemenu(),"ImageView"==window.currentView))return;if(window.wipemenu)showmenu();else if(window.guestmenu)dijit.registry.byId("GuestMessage").hide(),window.guestmenu=!1;else if(window.bigImg)smallimage();else if(window.showAddComment)dijit.registry.byId("AddComment").hide(),window.showAddComment=!1;else if(window.searchboxshow)dijit.registry.byId("SearchBox").hide(),
window.searchboxshow=!1;else switch(window.currentView){case "Intro1":gotoView("Intro1","Intro0");break;case "Intro2":gotoView("Intro2","Intro0");break;case "Intro3":gotoView("Intro3","Intro0");break;case "Login":gotoView("Login","newLogin");break;case "newLogin":gotoView("newLogin","IntroA");break;case "select_category":case "Intro0":if(window.searchboxshow)dijit.registry.byId("SearchBox").hide(),window.searchboxshow=!1;else try{Android.exitArtkick()}catch(b){}break;case "Options":gotoView("Options",
"OptionsList");break;case "add_user_player":gotoView("add_user_player","OptionsList");break;case "reset_password":gotoView("reset_password","Login");break;case "PlaylistView":"none"==dijit.registry.byId("viewlistMenu").domNode.style.display&&"none"==dijit.registry.byId("CuratorNotes").domNode.style.display?gotoView("PlaylistView","select_category"):(dijit.registry.byId("viewlistMenu").hide(),dijit.registry.byId("CuratorNotes").hide());break;case "ArtistlistView":gotoView("ArtistlistView","select_category");
break;case "MuseumlistView":gotoView("MuseumlistView","select_category");break;case "MylistView":dijit.registry.byId("AddUserList").hide();DonePersonalViewlists();break;case "select_player":gotoView("select_player","OptionsList");break;case "registeruser":gotoView("registeruser","IntroA");break;case "LogOff":gotoView("LogOff","OptionsList");break;case "Import":gotoView("Import",lastView);break;case "registernewroku":gotoView("registernewroku","RegisterNew");break;case "registernewchromecast":try{Android.setEmail(window.email),
Android.setButtonInvisible()}catch(c){}dijit.registry.byId("registernewchromecast").performTransition("registernewTV",1,"",null);break;case "removeplayer":gotoView("removeplayer","OptionsList");break;case "ImageView":"PlaylistView"==lastView?gotoCategory("0"):gotoView("ImageView","select_category");break;case "iframeview":destroyiframe();break;case "AccountSettings":gotoView("AccountSettings",window.lastView);break;case "TestingSettings":gotoView("TestingSettings",window.lastView);break;case "OptionsList":gotoView("OptionsList",
window.lastView);break;case "RegisterNew":gotoView("RegisterNew","OptionsList");break;case "About":gotoView("About","select_category");break;case "Options":gotoView("Options","OptionsList");break;case "GridView":dijit.registry.byId("tabnowshowing").set("selected",!0);gotoView("GridView","ImageView");break;case "TalkToArt":gotoView("TalkToArt",lastView);break;case "fullimageview":gotoView("fullimageview","ImageView");break;case "quickhint":1==window.firstimageview?(window.firstimageview=!1,gotoView("quickhint",
"select_category")):gotoView("quickhint","OptionsList");break;case "registernewTV":gotoView("registernewTV",lastView);break;case "select_player2":rememberSelectPlayers(!1);updatePlayers();"select_player2"==lastView?gotoView("select_player2","select_category"):gotoView("select_player2",lastView);break;case "registernewroku2":gotoView("registernewroku2","registernewroku");break;case "registrationHelp":gotoView("registrationHelp","registernewTV");break;case "Slideshow":gotoView("Slideshow",lastView);
break;case "show_comments":gotoView("show_comments",lastView);break;case "MylistViewEdit":updateLists(currCat);dijit.registry.byId("DeleteViewlist").hide();dijit.registry.byId("RenameViewlist").hide();gotoView("MylistViewEdit","PlaylistView");break;case "GettyView":dojo.style(dojo.byId("GettyView"),"display","none");gotoCategory("Getty Images");dojo.byId("gettysearchbox").value="";break;case "EditListView":doneeditviewlist(!1);break;case "TVDetail":gotoView("TVDetail","select_player2");break;case "RegCodeInstall":gotoView("RegCodeInstall",
"select_player2");break;case "GettySubscribe":gotoView("GettySubscribe","select_category");break;case "GettyLoadDefault":gotoView("GettyLoadDefault","select_category");break;case "InAppSubscribe":gotoView(currentView,"select_category");break;case "InAppSubscribe2":gotoView(currentView,"select_category");break;case "select_player3":dojo.style("screentype","display","block");dojo.style("SmartTVtype","display","none");gotoView(currentView,"select_category");break;case "SearchView":dojo.style(dojo.byId("SearchView"),
"display","none");dojo.byId("searchbox2").value="";dojo.byId("gettysearchbox").value="";dijit.registry.byId("SearchBox").hide();window.searchboxshow=!1;dijit.registry.byId("IVGettySearchBox").hide();if("select_category"==lastView){gotoView("SearchView",window.lastView);break}updateLists(currCat);break;case "ConnectSmartTV":gotoView(currentView,"select_player3");break;case "select_wifi":gotoView(currentView,"select_player3")}}};window.BrowserDetect={init:function(){this.browser=this.searchString(this.dataBrowser)||"An unknown browser";this.version=this.searchVersion(navigator.userAgent)||this.searchVersion(navigator.appVersion)||"an unknown version";this.OS=this.searchString(this.dataOS)||"an unknown OS"},searchString:function(a){for(var b=0;b<a.length;b++){var c=a[b].string,d=a[b].prop;this.versionSearchString=a[b].versionSearch||a[b].identity;if(c){if(-1!=c.indexOf(a[b].subString))return a[b].identity}else if(d)return a[b].identity}},
searchVersion:function(a){var b=a.indexOf(this.versionSearchString);if(-1!=b)return parseFloat(a.substring(b+this.versionSearchString.length+1))},dataBrowser:[{string:navigator.userAgent,subString:"Chrome",identity:"Chrome"},{string:navigator.userAgent,subString:"OmniWeb",versionSearch:"OmniWeb/",identity:"OmniWeb"},{string:navigator.vendor,subString:"Apple",identity:"Safari",versionSearch:"Version"},{prop:window.opera,identity:"Opera",versionSearch:"Version"},{string:navigator.vendor,subString:"iCab",
identity:"iCab"},{string:navigator.vendor,subString:"KDE",identity:"Konqueror"},{string:navigator.userAgent,subString:"Firefox",identity:"Firefox"},{string:navigator.vendor,subString:"Camino",identity:"Camino"},{string:navigator.userAgent,subString:"Netscape",identity:"Netscape"},{string:navigator.userAgent,subString:"MSIE",identity:"Explorer",versionSearch:"MSIE"},{string:navigator.userAgent,subString:"Gecko",identity:"Mozilla",versionSearch:"rv"},{string:navigator.userAgent,subString:"Mozilla",
identity:"Netscape",versionSearch:"Mozilla"}],dataOS:[{string:navigator.platform,subString:"Win",identity:"Windows"},{string:navigator.platform,subString:"Mac",identity:"Mac"},{string:navigator.userAgent,subString:"iPhone",identity:"iPhone/iPod"},{string:navigator.userAgent,subString:"iPad",identity:"iPhone/iPod"},{string:navigator.platform,subString:"Linux",identity:"Linux"}]};
window.tellbrowser={init:function(){var a=navigator.userAgent,b=navigator.appName,c=""+parseFloat(navigator.appVersion),d=parseInt(navigator.appVersion,10),e,g;-1!=(e=a.indexOf("Opera"))?(b="Opera",c=a.substring(e+6),-1!=(e=a.indexOf("Version"))&&(c=a.substring(e+8))):-1!=(e=a.indexOf("MSIE"))?(b="Microsoft Internet Explorer",c=a.substring(e+5)):-1!=(e=a.indexOf("Chrome"))?(b="Chrome",c=a.substring(e+7)):-1!=(e=a.indexOf("Safari"))?(b="Safari",c=a.substring(e+7),-1!=(e=a.indexOf("Version"))&&(c=a.substring(e+
8))):-1!=(e=a.indexOf("Firefox"))?(b="Firefox",c=a.substring(e+8)):(d=a.lastIndexOf(" ")+1)<(e=a.lastIndexOf("/"))&&(b=a.substring(d,e),c=a.substring(e+1),b.toLowerCase()==b.toUpperCase()&&(b=navigator.appName));-1!=(g=c.indexOf(";"))&&(c=c.substring(0,g));-1!=(g=c.indexOf(" "))&&(c=c.substring(0,g));d=parseInt(""+c,10);isNaN(d)&&(c=""+parseFloat(navigator.appVersion),d=parseInt(navigator.appVersion,10));alert("Browser name  = "+b+"  Full version  = "+c+"  Major version = "+d+"  navigator.appName = "+
navigator.appName+"  navigator.userAgent = "+navigator.userAgent+"  ")}};function changeAd(){adbase=adURL+"/GettyTrial_";window.adnumber++;2<window.adnumber&&(window.adnumber=0,clearInterval(window.AdInterval),dojo.style("gettyad","display","none"));dojo.byId("gettyad").setAttribute("src",adbase+window.adnumber+".jpg")}function adclick(){gotoView("select_category","GettySubscribe")}
function popGettyAd(){-1<currCat.indexOf("Sample-Getty")?(gettycat=currCat.substr(13).toLowerCase(),url=adURL+"/browser/"+gettycat,dojo.byId("gettyPopUpAd").setAttribute("src",url+".png")):"gettyimages"==imageMap[currImage].Source&&""!=imageMap[currImage].gettyDomain?(url=adURL+"/browser/"+imageMap[currImage].gettyDomain.toLowerCase(),dojo.byId("gettyPopUpAd").setAttribute("src",url+".png")):dojo.byId("gettyPopUpAd").setAttribute("src",adURL+"/browser/all.png");if(!window.computer){var a=Math.min(699,
window.bodywidth);dojo.style("gettyPopUpAd","width",a+"px")}dojo.style("gettyoverlayback","display","block");checkload()}function checkload(){loc=dojo.byId("gettyPopUpAd").getBoundingClientRect();0==loc.height?setTimeout(checkload,500):placeSubscribe()}
window.placeSubscribe=function(){window.adlocation=dojo.byId("gettyPopUpAd").getBoundingClientRect();adlocation.height=document.getElementById("gettyPopUpAd").offsetHeight;window.computer?(dojo.style("gettyPopUpSubscribe","top",adlocation.height-100+"px"),dojo.style("gettyPopUpSubscribe","left",adlocation.left+18+"px"),dojo.style("gettyPopUpNothanks","top",adlocation.height-55+"px")):(dojo.style("gettyPopUpSubscribe","font-size","15px"),dojo.style("gettyPopUpSubscribe","top",adlocation.height-62+
"px"),dojo.style("gettyPopUpSubscribe","left",adlocation.left+18+"px"),dojo.style("gettyPopUpNothanks","font-size","12px"),dojo.style("gettyPopUpNothanks","top",adlocation.height-38+"px"));dojo.style("gettyPopUpNothanks","left",adlocation.left+18+"px")};window.ConnectTV=function(){dijit.registry.byId("ConnectATV").hide();$("#playerList3").html("");newdevicecnt=0;for(var a in dialMap){console.log("TV: "+dialMap[a].friendlyName);var b=checkDial(a);console.log("checkDial for :"+a+" returned:"+b);if(("Eureka Dongle"==dialMap[a].modelName||"Chromecast"==dialMap[a].modelName||"Roku"==dialMap[a].manufacturer||"Artkick"==dialMap[a].manufacturer)&&!b){iconsrc="images/ConnectButton.png";if(dialMap[a].modelName){var c=dojo.create("div",{},"playerList3");c.setAttribute("class",
"mblListItem2");iconsrc="images/connect_streaming.png";dojo.create("img",{id:"dialx"+a,className:"iconclass3",zindex:950,src:iconsrc,onclick:function(){playerInstall(this.id)}},c)}dojo.create("span",{id:"dialq"+a,className:"playertitleclass2b",innerHTML:dialMap[a].friendlyName,onclick:function(){playerInstall(this.id)}},c);dialMap[a].originalName&&dojo.create("div",{id:"diale"+a,className:"playertitleclass3a",innerHTML:dialMap[a].originalName,onclick:function(){playerInstall(this.id)}},c);newdevicecnt++}}0==
newdevicecnt?(dojo.style("NoscreensFound","display","block"),dojo.style("screensFound","display","none")):(dojo.style("NoscreensFound","display","none"),dojo.style("screensFound","display","block"))};
function ConnectScreen(a){dojo.style("regPlayerCode2b","display","block");dojo.style("ConnectButton","display","block");window.NewPlayerName=a;switch(a){case "SmartTV":dojo.style("screentype","display","none");dojo.style("SmartTVtype","display","block");break;case "Sony":dojo.byId("SmartTVInstructions").innerHTML='<p class="Instruction">1.  Access the Sony Opera Store by clicking the SEN button on your remore, then scroll through the applications and click the Opera Store icon.<p>\t\t<p class="Instruction">2.  Search for Artkick and click to install the Artkick application on your TV</p>\t\t<p class="Instruction">3.  Start the Artkick application on your TV, find the registration code, and type it here:</p>';
dojo.byId("SmartTVName").innerHTML="Sony SmartTV";gotoView(currentView,"ConnectSmartTV");break;case "Sharp":dojo.byId("SmartTVInstructions").innerHTML='<p class="Instruction">1.  Open SmartCentral by pressing the SmartCentral button on your remote. <p>\t\t<p class="Instruction">2.  Click the Social & Life Icon.</p>\t\t<p class="Instruction">3.  Start the Artkick application on your TV, find the registration code, and type it here:</p>';dojo.byId("SmartTVName").innerHTML="Sharp SmartTV";gotoView(currentView,
"ConnectSmartTV");break;case "LG":dojo.byId("SmartTVInstructions").innerHTML='<p class="Instruction">1.  Press the SmartTV button on your remote and select "more" at the bottom of the page. <p>\t\t<p class="Instruction">2.  Use Search to locate & install the Artkick application</p>\t\t<p class="Instruction">3.  Start the Artkick application on your TV, find the registration code, and type it here:</p>';dojo.byId("SmartTVName").innerHTML="LG SmartTV";gotoView(currentView,"ConnectSmartTV");break;case "Samsung":dojo.byId("SmartTVInstructions").innerHTML=
'<p class="Instruction">1.  Open SmartHub by pressing the SmartHub button on your remote and then click the Samsung Apps icon.<p>\t\t<p class="Instruction">2.  Search for "Artkick" and then click "Install"</p>\t\t<p class="Instruction">3.  Start the Artkick application on your TV, find the registration code, and type it here:</p>';dojo.byId("SmartTVName").innerHTML="Samsung SmartTV";gotoView(currentView,"ConnectSmartTV");break;case "Other":case "OtherDevice":dojo.byId("SmartTVInstructions").innerHTML=
'<p class="Instruction">1.  Find and install the Artkick app for your device/cable box<p>\t\t<p class="Instruction">2.  Start the Artkick application on your TV, find the registration code, and type it here:</p>';dojo.byId("SmartTVName").innerHTML="Other Device";gotoView(currentView,"ConnectSmartTV");break;case "ScreenSaver":dojo.byId("SmartTVInstructions").innerHTML='<p class="Instruction">1.  On your personal computer browse to artkick.com/downloads<p>\t\t<p class="Instruction">2.  Click on the appropriate link to download either the PC or MAC screensaver.</p>\t<p class="Instruction">3. Open your "Downloads" directory and click on the Artkick software to install it.  It will automatically install as a screensaver.</p><p class="Instruction">4a.  On a PC right-click on the desktop and then click "Personalize."  Then click the "Screen Saver" icon and select "Artkick" as your screensaver and set the wait time to 1 minute.\t</p><p class="Instruction">4b. On a Mac open "System Preferences" then click "Desktop & Screensaver."  Scroll to the bottom of the list and select the Artkick screensaver.  Set the time to 1 minute.</p><p class="Instruction">5.  The screensaver will start and display a registration code, and type it here:</p>';
dojo.byId("SmartTVName").innerHTML="Screensaver";gotoView(currentView,"ConnectSmartTV");break;case "Fire":dojo.byId("SmartTVInstructions").innerHTML='<p class="Instruction">1.  Browse to amazon.com and search for Artkick.<p>\t\t<p class="Instruction">2.  Click on Artkick for FireTV.</p>\t<p class="Instruction">3.  On the right side of the screen select your FireTV from the pull down list and click "Deliver". Within a few minutes the Artkick app will appear on your FireTV. </p>\t<p class="Instruction">4.  Start the Artkick application on your FireTV, find the registration code, and type it here:</p>';
dojo.byId("SmartTVName").innerHTML="Amazon FireTV";gotoView(currentView,"ConnectSmartTV");break;case "AppleTV":dojo.byId("SmartTVInstructions").innerHTML='<p class="Instruction">1.  AppleTV does not allow 3rd party apps like Artkick.<p>\t\t<p class="Instruction">2. Use can use your AppleTV with Artkick in Airplay mirroring mode.</p>\t<p class="Instruction">3. Open the IOS Control Center by swiping up from the bottom of the screen.  </p>\t<p class="Instruction">4. Tap Airplay/AppleTV and then turn on Mirroring.</p><p class="Instruction">5. The Artkick images on your phone or tablet will display on your TV.  Artkick slideshow mode does not work with Airplay</p>',
dojo.byId("SmartTVName").innerHTML="AppleTV",dojo.style("regPlayerCode2b","display","none"),dojo.style("ConnectButton","display","none"),gotoView(currentView,"ConnectSmartTV")}};window.dialsearch=function(a){jsonStr=a?a:'[{"uuid":"af2249bb-907e-7e33-e9ca-b2789f721cb6","friendlyName":"Chromecast EO","modelName":"Eureka Dongle","state":"running","serialNumber":"af2249bb907e7e33e9cab2789f721cb6","IpAddress":"192.168.2.228"},{"uuid":"01a130c9-2401-1025-8029-b83e59ec86e3","originalName":"Roku 1XC399075049","friendlyName":"Family room roku","modelName":"Roku Streaming Player 2710X","state":"running","serialNumber":"1XC399075049","IpAddress":"192.168.2.190"},{"uuid":"02706104-1801-1019-8022-b0a737125377","originalName":"Roku 2L6446071970","friendlyName":"Guest bedroom Roku2","modelName":"Roku Stick","state":"stopped","serialNumber":"2L6446071970","IpAddress":"192.168.2.143"},{"uuid":"01a130c9-1801-1020-80f3-b83e59ec760b","originalName":"Roku 1XC396073971","friendlyName":"Nancy\'s Office","modelName":"Roku Streaming Player 2710X","state":"running","serialNumber":"1XC396073971","IpAddress":"192.168.2.126"},{"uuid":"015d80c1-9000-105d-80df-b83e591640e1","friendlyName":"Roku 1GH31T024031","modelName":"Roku 3","state":"stopped","serialNumber":"1GH31T024031","IpAddress":"192.168.2.135"},{"uuid":"010d3053-9c01-1061-80c6-cc6da03af95d","originalName":"Roku 13C1CW090566","friendlyName":"Game room Roku","modelName":"Roku Streaming Player 3100X","state":"running","serialNumber":"13C1CW090566","IpAddress":"192.168.2.122"},{"uuid":"015d70c4-7800-10ba-8082-b83e593b7e51","originalName":"Roku 1GG34N047746","friendlyName":"Artkick Office Roku","modelName":"Roku 3","state":"running","serialNumber":"1GG34N047746","IpAddress":"192.168.2.218"},{"uuid":"fa0afb3d-17e7-2b96-0000-0000019acabf","friendlyName":"Sheldon\'s Fire TV","modelName":"FireTV","state":"unknown","serialNumber":"Sheldon\'s Fire TV","IpAddress":"192.168.2.192"},{"uuid":"c0e8cf53-a757-309c-ba2e-36f59e0ad101","friendlyName":"Shel\'s Office","modelName":"Eureka Dongle","state":"running","serialNumber":"c0e8cf53a757309cba2e36f59e0ad101","IpAddress":"192.168.2.132"},{"uuid":"582F7F3F-D867-DE98-BE41-E1CCBF15CFF9", "friendlyName":"Artkick Screen 1ZGI","modelName":"Artkick", "state":"running","serialNumber":"b827eb823348","manufacturer":"Artkick"},{"uuid":"7E04EB2C-B69C-EADD-CCB5-41FD59FCA03D", "friendlyName":"Artkick Screen XE0W","modelName":"Artkick", "state":"stopped","serialNumber":"b827ebc458c0","manufacturer":"Artkick"}]';
window.dialMap=JSON.parse(jsonStr);runInWebview&&showingScanNetwork&&clearInterval(showingScanNetwork);window.ScanNetworkComplete=!0;for(var b in dialMap)console.log("TV: "+dialMap[b].friendlyName),-1<dialMap[b].friendlyName.toLowerCase().indexOf("roku")&&(dialMap[b].manufacturer="Roku"),-1<dialMap[b].friendlyName.toLowerCase().indexOf("samsung")&&(dialMap[b].manufacturer="Samsung"),-1<dialMap[b].friendlyName.toLowerCase().indexOf("aquos")&&(dialMap[b].manufacturer="Sharp"),-1<dialMap[b].friendlyName.toLowerCase().indexOf("vizio")&&
(dialMap[b].manufacturer="Vizio"),-1<dialMap[b].friendlyName.toLowerCase().indexOf("bravia")&&(dialMap[b].manufacturer="Sony"),-1<dialMap[b].friendlyName.toLowerCase().indexOf("apple")&&(dialMap[b].manufacturer="Apple",dialMap[b].modelName="Apple TV"),dialMap[b].modelName&&(-1<dialMap[b].modelName.toLowerCase().indexOf("roku")&&(dialMap[b].manufacturer="Roku"),-1<dialMap[b].modelName.toLowerCase().indexOf("firetv")&&(dialMap[b].manufacturer="Amazon"),-1<dialMap[b].modelName.toLowerCase().indexOf("eureka")&&
(dialMap[b].manufacturer="Google"),-1<dialMap[b].modelName.toLowerCase().indexOf("chromecast")&&(dialMap[b].manufacturer="Google")),dialMap[b].ArtkickID||(dialMap[b].serialNumber?dialMap[b].ArtkickID=dialMap[b].serialNumber:dialMap[b].modelName?1==modelnamecount(dialMap[b].modelName)?dialMap[b].ArtkickID=dialMap[b].modelName:dialMap[b].ArtkickID=dialMap[b].modelName+dialMap[b].IpAddress:dialMap[b].ArtkickID=dialMap[b].IpAddress);dijit.registry.byId("ScanNetwork").hide();indialLaunch?(updatePlayers(),
gotoView(currentView,"select_category")):"select_player2"==playertoView?updatePlayers():"select_player3"==playertoView?ConnectTV():(usermessage("Your new Artkick Window is now connected"),window.indialLaunch=!0,updatePlayers())};function modelnamecount(a){var b=0,c;for(c in dialMap)a==dialMap[c].modelName&&b++;return b}
function playerInstall(a){window.playeruuid="unknown";"unknown"!=a?(nid=a.substr(5),swid=dialMap[nid].manufacturer,console.log("installing "+nid+" "+dialMap[nid].friendlyName),dojo.byId("regPlayerName2").value=dialMap[nid].friendlyName,dojo.byId("tvinstallheading").innerHTML="Connect "+swid,dojo.byId("screenIDcode").innerHTML=dialMap[nid].friendlyName,window.playeruuid=dialMap[nid].ArtkickID,serialnumber=dialMap[nid].serialNumber):(swid=a,dojo.byId("tvinstallheading").innerHTML="Connect Display",
dojo.byId("regPlayerName2").value="");switch(swid){case "Amazon":console.log("Amazon");"FireTV"==dialMap[nid].modelName&&"unknown"==dialMap[nid].state?myalert('Goto Amazon.com with a browser on a PC or Mac and search for "Artkick for FireTV" and click the "Deliver" button, then restart Artkick on your phone or tablet'):(window.dialLaunchSerial="Fire"+serialnumber,dialLaunch(dialMap[nid].uuid,dialMap[nid].friendlyName));break;case "Vizio":console.log("Vizio");dojo.byId("helpcontents").innerHTML="Install and start Artkick on your display device. A registration code will appear.";
gotoView(currentView,"RegCodeInstall");break;case "Google":console.log("Chromecast");window.dialLaunchSerial="chromecast"+serialnumber;dialLaunch(dialMap[nid].uuid,dialMap[nid].friendlyName);break;case "Artkick":console.log("Artkick screen");window.dialLaunchSerial="artkick"+serialnumber;dialLaunch(dialMap[nid].uuid,dialMap[nid].friendlyName);break;case "Samsung":dojo.byId("helpcontents").innerHTML="Install Artkick from the Samsung Store.<br> Access the store by clicking the SmartHub remote button, scroll through the applications and click the Artkick Icon. <br> Start Artkick and a registration code will appear on screen";
gotoView(currentView,"RegCodeInstall");console.log("Samsung");break;case "Sony":dojo.byId("helpcontents").innerHTML="Install Artkick from the Opera Store.<br> Access the store by clicking the SEN remote button, scroll through the applications and click the Opera Store Icon. Search the Opera Store for Artkick and install the app.<br> Start Artkick and a registration code will appear on screen";gotoView(currentView,"RegCodeInstall");console.log("Samsung");break;case "Roku":console.log("Roku");window.dialLaunchSerial=
"Roku"+serialnumber;dialLaunch(dialMap[nid].uuid,dialMap[nid].friendlyName);break;case "Sharp":console.log("Sharp");dojo.byId("helpcontents").innerHTML="Open SmartCentral, click Social and Life icon and click the Artkick icon. A registration code will appear";gotoView(currentView,"RegCodeInstall");break;case "Apple":console.log("Apple");dojo.byId("helpcontents").innerHTML="Wipe up from bottom of screen; Tap Airplay";gotoView(currentView,"RegCodeInstall");break;default:console.log("default"),dojo.byId("helpcontents").innerHTML=
"Install and start Artkick on your display device. A registration code will appear.",gotoView(currentView,"RegCodeInstall")}}
window.checkDial=function(a){uuid=dialMap[a].ArtkickID;state=dialMap[a].state;if(("Apple TV"==dialMap[a].modelName||"Apple TV"==dialMap[a].friendlyName)&&"IOS"!=window.platform)return!0;if("unknown"==uuid)return!1;for(var b in playerlist)if("Amazon"==playerlist[b].account.substr(0,6)&&(playerlist[b].uuid=playerlist[b].nickname),playerlist[b].uuid&&uuid==playerlist[b].uuid)return pid="img"+playerlist[b].account,playerlist[b].dialuuid=dialMap[a].uuid,dialMap[a].state&&(playerlist[b].state=dialMap[a].state,
"running"==dialMap[a].state&&(playerlist[b].online=!0)),dialMap[a].originalName&&(playerlist[b].originalName=dialMap[a].originalName),"unkown"==playerlist[b].state&&(playerlist[b].state="unknown"),!0;return!1};window.dialReady=function(){dijit.registry.byId("ScanNetwork").hide();window.firstupdateplayers=!1;window.email&&(myalert("dialready, calling updateplayers"),updatePlayers())};
function dialLaunch(a,b){console.log("dialLaunching uuid="+a);for(i in dialMap)dialMap[i].uuid==a&&(dialMap[i].state="running");if(runInWebview){calliOSFunction("launchApp",[a],"onSuccess","onError");try{Android.launchApp(a)}catch(c){}}dojo.byId("scanid").innerHTML="Installing "+b+", Please wait";window.indialLaunch=!0;dijit.registry.byId("ScanNetwork").show()}
function dialUpdate(){console.log("updatestate called");calliOSFunction("updatestate",[],"onSuccess","onError");try{Android.updatestate()}catch(a){}}function dialDeletePlayer(a){calliOSFunction("deletechrome",[a],"onSuccess","onError");try{Android.deletechrome(a)}catch(b){}}window.installWindow=function(a){dojo.byId("scanid").innerHTML="Installing "+a+", Please wait";dijit.registry.byId("ScanNetwork").show()};function editviewlist(){window.itemlist=[];window.itemstodelete=0;window.editlist=!0}
function clickdelete(a,b){if(1>dojo.style(a,"opacity")){window.itemstodelete--;dojo.style(a,"opacity","1");var c=window.itemlist.indexOf(b.substr(3));window.itemlist.splice(c,1)}else window.itemstodelete++,dojo.style(a,"opacity",".5"),window.itemlist.push(b.substr(3));dojo.byId("DeleteItemNumber").innerHTML=window.itemstodelete+" items to delete";"GettyView"==currentView?dojo.byId("gettynumberdelete").innerHTML=window.itemstodelete+" items to remove&nbsp&nbsp":dijit.registry.byId("EditListViewHeader").set("label",
window.itemstodelete+" items to delete");console.log("deleting: "+b.substr(3)+" :"+window.itemstodelete+" items")}
function doneeditviewlist(a){window.editlist=!1;if(a){console.log("Now deleting: "+window.itemstodelete+" items");a=base+"user/removeImagesFromList?email="+window.email+"&listId="+window.currList+"&token="+window.token;for(var b in window.itemlist)a+="&imgIds[]="+window.itemlist[b];console.log("delete items url="+a);window.editlist=!1;dojo.io.script.get({url:a,callbackParamName:"callback",load:function(a){"success"==a.Status?(window.itemstodelete=0,dojo.byId("DeleteItemNumber").innerHTML="No items to delete",
dijit.registry.byId("EditListViewHeader").set("label","Tap to Delete Image"),dijit.registry.byId("DeleteItems").hide(),window.editlist=!1,window.itemlist=[],gotoView("EditListView","PlaylistView"),gotoCategory("My Viewlists")):(myalert(a.Message),gotoView("EditListView","PlaylistView"))}})}else dijit.registry.byId("DeleteItems").hide(),gotoView("EditListView","PlaylistView")}
function EditMyViewlistImages(){window.itemlist=[];window.itemstodelete=0;window.editlist=!0;window.currList=window.thislist.id;dijit.registry.byId("viewlistMenu").hide();dojo.byId("DeleteItemNumber").innerHTML="No items to delete";dijit.registry.byId("EditListViewHeader").set("label","Tap to Delete Image");loadGrid(0,Picturegrid2,window.currList);gotoView(currentView,"EditListView")}
function EditListViewDone(){0<window.itemstodelete?dijit.registry.byId("DeleteItems").show():doneeditviewlist(!1)};function SendToArt(){window.ticket={requester:{name:window.username,email:window.email},subject:"Input from app",body:dojo.byId("ArtText").value};var a=dojo.byId("ArtText").value,b=base+"client/feedback?text="+encodeURIComponent(a)+"&email="+window.email+"&token="+window.token;dojo.io.script.get({url:b,callbackParamName:"callback",timeout:8E3,trytimes:5,error:function(a){console.log("timeout!feedback"+b);this.trytimes--;0<this.trytimes?dojo.io.script.get(this):alert("Network problem32. Please check your connection and restart the app.")},
load:function(a){}});dojo.byId("ArtText").value="";hidemenu();dijit.registry.byId("newFeedback").hide()}function CancelToArt(){hidemenu();dojo.byId("ArtText").value="";gotoView("TalkToArt","ImageView")}function SendToReview(){dijit.registry.byId("AskReview").hide();MarkAsReviewed();if("IOS"==window.platform)showiframe("http://itunes.apple.com/app/id711576101");else if("Android"==window.platform)try{Android.editStore()}catch(a){}}
function ReviewNoThanks(){dijit.registry.byId("AskReview").hide();MarkAsReviewed()}function MarkAsReviewed(){var a=base+"client/setReviewed?didReview=true&email="+window.email+"&token="+window.token;dojo.io.script.get({url:a,callbackParamName:"callback",timeout:8E3,trytimes:5,error:function(b){console.log("timeout!feedback"+a);this.trytimes--;0<this.trytimes?dojo.io.script.get(this):alert("Network problem32a. Please check your connection and restart the app.")},load:function(a){}})};window.gettyDefault=function(a){var b={items:[{name:"Celebrities",segment:"entertainment",date:"Any",orientation:"horizontal",query:"Celebrities bestof"},{name:"Red Carpet Events",segment:"entertainment",date:"Any",orientation:"horizontal",query:"bestof Red Carpet Events"},{name:"Backstage Parties",segment:"entertainment",date:"Any",orientation:"horizontal",query:"Backstage Party"},{name:"Emmy Awards",segment:"entertainment",date:"Any",orientation:"horizontal",query:"66th Annual Primetime Emmy Awards bestof"},
{name:"MTV Music Video Awards",segment:"entertainment",date:"Any",orientation:"horizontal",query:"MTV Music Video Awards bestof"},{name:"New York Fashion Week",segment:"entertainment",date:"Any",orientation:"Any",query:"bestof New York Fashion Week Catwalk"},{name:"Paris Fashion Week",segment:"entertainment",date:"Any",orientation:"Any",query:"bestof Paris Fashion Week Catwalk"},{name:"Chanel Couture",segment:"entertainment",date:"Any",orientation:"Any",query:"Chanel Couture Catwalk Full Length"},
{name:"Victoria's Secret Fashion Show",segment:"entertainment",date:"Any",orientation:"Any",query:"Victoria Secret Fashion Show"},{name:"British Royals",segment:"entertainment",date:"Any",orientation:"horizontal",query:"bestof British Royals"},{name:"Angelina Jolie",segment:"entertainment",date:"Any",orientation:"horizontal",query:"bestof Angelina Jolie"},{name:"Taylor Swift",segment:"entertainment",date:"Any",orientation:"horizontal",query:"bestof Taylor Swift"},{name:"Kate Upton",segment:"entertainment",
date:"Any",orientation:"horizontal",query:"Kate Upton"},{name:"Heidi Klum",segment:"entertainment",date:"Any",orientation:"horizontal",query:"Heidi Klum"},{name:"Kim Kardashian",segment:"entertainment",date:"Any",orientation:"horizontal",query:"Kim Kardashian bestof"},{name:"Beyonce",segment:"entertainment",date:"Any",orientation:"horizontal",query:"Beyonce bestof"},{name:"David Beckham",segment:"entertainment",date:"Any",orientation:"horizontal",query:"David Beckham bestof"},{name:"Ariana Grande",
segment:"entertainment",date:"Any",orientation:"horizontal",query:"Ariana Grande bestof"}]},c={items:[{name:"Google",segment:"news",date:"any",orientation:"horizontal",query:"Google"},{name:"Apple Computers",segment:"news",date:"any",orientation:"horizontal",query:"Apple Computers"},{name:"USA Business",segment:"news",date:"any",orientation:"horizontal",query:"USA Business"},{name:"Barack Obama",segment:"news",date:"any",orientation:"horizontal",query:"Barack Obama"},{name:"USA Politics",segment:"news",
date:"any",orientation:"horizontal",query:"USA Politics"},{name:"Europe Politics",segment:"news",date:"any",orientation:"horizontal",query:"Europe Politics"},{name:"Ukraine",segment:"news",date:"any",orientation:"horizontal",query:"Ukraine"},{name:"Israel",segment:"news",date:"any",orientation:"horizontal",query:"Israel"},{name:"Syria",segment:"news",date:"any",orientation:"horizontal",query:"Syria"},{name:"Crime",segment:"news",date:"any",orientation:"horizontal",query:"Crime"},{name:"Earthquakes",
segment:"news",date:"any",orientation:"horizontal",query:"Earthquake"},{name:"Crime",segment:"news",date:"any",orientation:"horizontal",query:"Crime"},{name:"Asia",segment:"news",date:"any",orientation:"horizontal",query:"Asia"},{name:"Best of News",segment:"news",date:"any",orientation:"horizontal",query:"bestof News"}]},d={items:[{name:"Best of Major League Baseball",segment:"sports",date:"12M",orientation:"horizontal",query:"bestof Major league baseball"},{name:"Yankees",segment:"sports",date:"1D",
orientation:"horizontal",query:"Yankees"},{name:"Best of NCAA College Football",segment:"sports",date:"12M",orientation:"horizontal",query:"bestof NCAA college football"},{name:"Florida State Seminoles",segment:"sports",date:"12M",orientation:"horizontal",query:"Florida State Seminoles NCAA college football"},{name:"Superbowl Halftime Show",segment:"sports",date:"12M",orientation:"horizontal",query:" Superbowl Halftime Show"},{name:"Dallas Cowboys",segment:"sports",date:"12M",orientation:"horizontal",
query:"Dallas cowboys NFL"},{name:"Best of US PGA Tour",segment:"sports",date:"12M",orientation:"horizontal",query:"bestof US PGA tour"},{name:"Best of Extreme Sports",segment:"sports",date:"12M",orientation:"horizontal",query:"bestof extreme sports"},{name:"Best of Soccer",segment:"sports",date:"12M",orientation:"horizontal",query:"bestof soccer"},{name:"All Real Madrid",segment:"sports",date:"any",orientation:"horizontal",query:"Real Madrid"},{name:"Stock Car Racing",segment:"sports",date:"12M",
orientation:"horizontal",query:"stock car racing"},{name:"Best of Tennis",segment:"sports",date:"12M",orientation:"horizontal",query:"bestof tennis"},{name:"Best of NBA",segment:"sports",date:"12M",orientation:"horizontal",query:"bestof NBA"},{name:"F1 Motor Sports",segment:"sports",date:"12M",orientation:"horizontal",query:"F1 motor sports"},{name:"Best of NFL",segment:"sports",date:"12M",orientation:"horizontal",query:"bestof NFL"},{name:"Best of Sports",segment:"sports",date:"12M",orientation:"horizontal",
query:"bestpix"},{name:"2014 World Series",segment:"sports",date:"12M",orientation:"horizontal",query:"Baseball World Series San Francisco Giants"}]};"Entertainment"==a?window.gettyDefaultList=b.items:"Sports"==a?window.gettyDefaultList=d.items:"News"==a&&(window.gettyDefaultList=c.items);gotoView(currentView,"GettyLoadDefault");window.thankyou=dojo.create("div",{innerHTML:"Thank you for subscribing to<br>Getty "+a,className:"gettyDefaultClass4",id:"Class4"+a},"gettydefault");window.loadingdefaultid=
dojo.create("div",{innerHTML:"Loading default Viewlists, please wait...",className:"gettyDefaultClass5"},"gettydefault");for(var e in gettyDefaultList)newgitem=dojo.create("div",{className:"gettyDefaultClass6"},"gettydefault"),b=gettyDefaultList[e].name,circle=dojo.create("img",{src:"images/waitcircle2.gif",className:"gettyDefaultClass2"},newgitem),window.doneid=dojo.create("img",{src:"images/check.png",className:"gettyDefaultClass2a"},newgitem),b=dojo.create("div",{innerHTML:b,className:"gettyDefaultClass"},
newgitem),doGettySearch(gettyDefaultList[e],a,circle,doneid,b)};
function doGettySearch(a,b,c,d,e){console.log("doing search for="+a.name);var g="http://salty-chamber-1299.herokuapp.com/getty/search2?email="+window.email+"&query="+a.query+"&token="+window.token+"&category="+b.toLowerCase()+"&EditorialSegments="+a.segment+"&date="+a.date+"&orientation="+a.orientation+"&name="+a.name;console.log("url="+g);dojo.io.script.get({url:g,callbackParamName:"callback",timeout:3E4,trytimes:5,error:function(a){console.log("timeout!search"+g);this.trytimes--;0<this.trytimes?
dojo.io.script.get(this):alert("Network problem91a. Please check your connection and restart the app.")},load:function(b){"success"==b.Status&&(console.log("Added viewlist "+a.name+" id="+b.listId),dojo.style(c,"display","none"),dojo.style(d,"display","block"))}})};window.gettySearch=function(){gettyReset();gotoView("select_category","GettyView")};
function gettysearchclick(){dojo.style("gettyadvanced","display","block");$("#prevGettySearches").html("");progressBar2.set("value",0);progressBar2.set("label","0%");dojo.byId("gettynumberdelete").innerHTML="Tap image to remove&nbsp&nbsp";dojo.style("gettynumberdelete","display","none");window.itemstodelete=0;for(var a in previousgettysearch){var b="Editorial";"Creative"==previousgettysearch[a].EditorialSegments&&(b="Creative");b=previousgettysearch[a].query+" <small>("+b+","+previousgettysearch[a].orientation+
","+previousgettysearch[a].date+")</small>";console.log("pg:"+b);dojo.create("div",{id:"getty"+a,innerHTML:"<a style='font-size:12px'>&nbsp;&nbsp"+b+"<br></a>",onclick:function(){loadgettysearch(this.id)}},"prevGettySearches")}}
function loadgettysearch(a){a=a.substr(5);console.log("loaded getty search for:"+a);window.gettylastQuery=previousgettysearch[a].query;window.gettyEditorial=previousgettysearch[a].EditorialSegments;window.gettyEditorialTime=previousgettysearch[a].date;window.gettyEditorialOrientation=previousgettysearch[a].orientation;$("#editorialValue").val(gettyEditorial);$("#dateValue").val(gettyEditorialTime);$("#orientationValue").val(gettyEditorialOrientation);dojo.byId("gettysearchbox").value=window.gettylastQuery;
setEditorial(window.gettyEditorial)}
window.gettyusersearch=function(){var a;console.log("gettyusersearch");a=(new Date).getTime();if(!(void 0!=window.searchClickTime&&7E3>a-window.searchClickTime)&&(window.searchClickTime=a,a=dojo.byId("searchbox2").value,""!=a||""!=window.gettylastQuery)){""==a&&(a=window.gettylastQuery,dojo.byId("gettysearchbox").value=a,window.gettylastQuery="");gettyEditorial=gettydomain;"Bestof"==window.gettyBestOf&&0>a.indexOf("bestof")&&(a+=" bestof");var b="http://salty-chamber-1299.herokuapp.com/getty/search2?email="+window.email+
"&query="+a+"&token="+window.token+"&category="+window.gettydomain+"&EditorialSegments="+window.gettyEditorial+"&date="+window.gettyEditorialTime+"&orientation="+gettyEditorialOrientation;replacesearchID&&""!=window.replacesearchID&&(b+="&listId="+window.replacesearchID);console.log("searching getty for:"+b);v=0;dojo.style("searchprogressdiv","display","block");var c=setInterval(function(){progressBar2.set("value",v);progressBar2.set("label",v+"%");100<=v&&clearTimeout(c);v+=10},750);dojo.io.script.get({url:b,
callbackParamName:"callback",timeout:3E4,trytimes:5,error:function(a){console.log("timeout!search"+b);this.trytimes--;0<this.trytimes?dojo.io.script.get(this):alert("Network problem91. Please check your connection and restart the app.")},load:function(a){"success"==a.Status?(dojo.style("searchprogressdiv","display","none"),dojo.byId("searchresults").innerHTML=a.imageNum+" images found",dojo.style("searchresults","display","block"),window.replacesearchID="",gotoView(window.currentView,"SearchView"),
$("#searchGrid").css("top","210px"),window.IVsearchboxshow=!1,progressBar2.set("value",100),progressBar2.set("label","Complete"),clearTimeout(c),window.currList=a.id,window.currCat="Getty News","sports"==gettydomain&&(window.currCat="Getty Sports"),"entertainment"==gettydomain&&(window.currCat="Getty Entertainment"),window.currViewList="Last Getty Search",window.currGridList=-1,window.moregridpages=!1,0<a.imageNum&&loadGrid(0,searchGrid,a.listId)):"no image found!"==a.Message?(dojo.style("searchprogressdiv",
"display","none"),dojo.byId("searchresults").innerHTML="No matching images found",dojo.style("searchresults","display","block"),progressBar2.set("value",100),progressBar2.set("label","Complete"),clearTimeout(c)):(progressBar2.set("value",100),progressBar2.set("label","Complete"),clearTimeout(c),myalert(a.Message));"ImageView"==currentView?dojo.style("SearchBox","top","60px"):dojo.style("SearchBox","top","50px")}})}};
function setEditorial(a){console.log("Editorial search domain: "+a);window.gettyEditorial=a;"Any"==a?(dojo.style("editorialselected","display","block"),dojo.style("creativeselected","display","none"),dojo.style("EditorialTime","display","block"),dojo.style("orientationValue","top","-16px")):(dojo.style("creativeselected","display","block"),dojo.style("editorialselected","display","none"),dojo.style("EditorialTime","display","none"),dojo.style("orientationValue","top","9px"))}
function setEditorialTime(a){console.log("Editorial search domain: "+a);window.gettyEditorialTime=a}function setEditorialOrientation(a){console.log("Editorial search domain: "+a);window.gettyEditorialOrientation=a}function setBestOf(a){"Bestof"==a?console.log("Bestof set"):console.log("Recent set");window.gettyBestOf=a}
window.gettyReset=function(){$("#editorialValue").val("Any");$("#dateValue").val("Any");$("#orientationValue").val("horizontal");$("#BestOfVAlue").val("Bestof");window.bestofflag=!1;bestofswitch();window.gettyEditorial="Any";window.gettyEditorialTime="Any";window.gettyEditorialOrientation="horizontal";window.gettyBestOf="Bestof";dojo.empty(Gettygrid);dojo.byId("gettysearchbox").value="";gettyView.scrollTo({y:0});progressBar2.set("value",0);progressBar2.set("label","0%");window.itemstodelete=0;dojo.style("gettyadvanced",
"display","none");dojo.style("editorialselected","display","block");dojo.style("creativeselected","display","none");dojo.byId("gettynumberdelete").innerHTML="Tap image to remove&nbsp&nbsp";dojo.style("gettynumberdelete","display","none")};function gettyload(){loadGrid(0,Gettygrid,window.currList)}
function gettyuserrefresh(a){console.log("getty user refresh hit, newlist:"+a);if(window.guest)guestmessage(),window.guestmenu=!0;else if(window.searchboxshow)hidemenu();else{window.wipemenu&&showmenu();window.newgettylist=!1;""!=searchtermindex&&(searchterm=lists[searchtermindex].searchTerm)&&("Getty"==currCat.substr(0,5)?($("#dateValue").val(searchterm.date),$("#orientationValue").val(searchterm.orientation),mybest=-1<searchterm.query.indexOf("bestof"),a=dijit.registry.byId("bestof-switch"),mybest?
(window.bestofflag=!0,a.set("label","On"),window.gettyBestOf="Bestof"):(a.set("label","Off"),window.bestofflag=!1,window.gettyBestOf=""),dojo.byId("searchbox2").value=searchterm.query.replace("bestof",""),$("#searchSelectValue3").val(currCat)):(dojo.byId("searchbox2").value=searchterm.query,$("#searchSelectValue3").val("Artkick")));if("Getty"==currCat.substr(0,5)){window.gettydomain=currCat.substr(6).toLowerCase();$("#gettybuttons").show();switch(gettydomain){case "news":dojo.byId("gettysubdomain").innerHTML=
"News";break;case "entertainment":dojo.byId("gettysubdomain").innerHTML="Entertainment";break;case "sports":dojo.byId("gettysubdomain").innerHTML="Sports"}progressBar2.set("value",0);progressBar2.set("label","0%");dojo.style("SearchBox","height","240px")}else progressBar2.set("value",0),progressBar2.set("label","0%"),$("#gettybuttons").hide();dijit.registry.byId("SearchBox").show();window.searchboxshow=!0;dojo.empty(searchGrid);"ImageView"==currentView?dojo.style("SearchBox","top","60px"):dojo.style("SearchBox",
"top","50px");window.replacesearchID=window.currList;dojo.style("searchresults","display","none")}}
function gettyclearsearch(){window.gettylastQuery="";window.gettyEditorial="Any";window.gettyEditorialTime="Any";window.gettyEditorialOrientation="Any";window.bestofflag=!1;bestofswitch();window.gettyBestOf="Bestof";$("#BestOfValue").val(gettyBestOf);$("#editorialValue").val(gettyEditorial);$("#dateValue").val(gettyEditorialTime);$("#orientationValue").val(gettyEditorialOrientation);dojo.byId("gettysearchbox").value=""}
function gettydonesearch(){dijit.registry.byId("IVGettySearchBox").hide();dijit.registry.byId("SearchBox").hide();window.searchboxshow=!1;window.newgettylist&&(window.newgettylist=!1)}function Gsearch(a){currCat=a;window.lastView="PlaylistView";dijit.registry.byId("IVGettySearchBox").hide();window.searchboxshow=!1;dijit.registry.byId("SearchBox").hide();dojo.style("gNews","display"," block");dojo.style("gEntertainment","display","block");dojo.style("gSports","display","block");showsearch()}
function updatecurrentsearch(a,b){var c=a.searchTerm;"Bestof"==window.gettyBestOf&&0>c.query.indexOf("bestof")&&(c.query+=" bestof");var d="http://salty-chamber-1299.herokuapp.com/getty/search2?email="+window.email+"&query="+c.query+"&token="+window.token+"&listId="+a.id+"&category="+window.gettydomain+"&EditorialSegments="+c.EditorialSegments+"&date="+c.date+"&orientation="+c.orientation;console.log("update search with:"+d);dojo.io.script.get({url:d,callbackParamName:"callback",timeout:3E4,trytimes:5,
error:function(a){console.log("timeout!search"+d);this.trytimes--;0<this.trytimes?dojo.io.script.get(this):alert("Network problem92. Please check your connection and restart the app.")},load:function(c){"success"==c.Status?loadImages(b,1,15,1):(a.searchTerm.date="Any",updatecurrentsearch(a,b))}})}
window.bestofswitch=function(){var a=dijit.registry.byId("bestof-switch");window.bestofflag?(a.set("label","Off"),window.bestofflag=!1,window.gettyBestOf=""):(window.bestofflag=!0,a.set("label","On"),window.gettyBestOf="Bestof")};
function gettysubs(a,b){console.log("subscribing to: "+a);for(i=1;5>i;i++){var c="g"+i+"b",d=dojo.byId(c),c="g"+i+"c",e=dojo.byId(c),c="g"+i+"a";dojo.byId(c);i==b?(dojo.style(d,"color","#00C7FF"),dojo.style(e,"color","#00C7FF"),document.getElementById(c).setAttribute("src","images/button_on.png"),window.newgettysubscription=a):(dojo.style(d,"color","white"),dojo.style(e,"color","white"),document.getElementById(c).setAttribute("src","images/button_off.png"))}}
function gettySubscribeBoxClick(){dijit.registry.byId("GettySubscribeBox").hide();runInWebview?window.guest?myalert("Please log into Artkick and then click menu/subscribe"):DoSubscribe():open("http://www.artkick.com","_blank")};(function(){var a=function(a){if(!a||!a.canvas||!a.path)throw"ImgZoom constructor: missing arguments canvas or path";this.canvas=a.canvas;this.canvas.width=this.canvas.clientWidth;this.canvas.height=this.canvas.clientHeight;this.context=this.canvas.getContext("2d");this.desktop=a.desktop||!1;this.position={x:0,y:0};this.scale={x:.5,y:.5};this.imgTexture=new Image;this.imgTexture.src=a.path;this.lastY=this.lastX=this.lastZoomScale=null;this.init=this.mdown=!1;this.checkRequestAnimationFrame();requestAnimationFrame(this.animate.bind(this));
this.setEventListeners()};a.prototype={animate:function(){if(!this.init&&this.imgTexture.width){var a=null,a=this.canvas.clientWidth>this.canvas.clientHeight?this.canvas.clientWidth/this.imgTexture.width:this.canvas.clientHeight/this.imgTexture.height;this.scale.x=a;this.scale.y=a;this.init=!0}this.context.clearRect(0,0,this.canvas.width,this.canvas.height);this.context.drawImage(this.imgTexture,this.position.x,this.position.y,this.scale.x*this.imgTexture.width,this.scale.y*this.imgTexture.height);
requestAnimationFrame(this.animate.bind(this))},gesturePinchZoom:function(a){var c=!1;if(2<=a.targetTouches.length){var d=a.targetTouches[0];a=a.targetTouches[1];d=Math.sqrt(Math.pow(a.pageX-d.pageX,2)+Math.pow(a.pageY-d.pageY,2));this.lastZoomScale&&(c=d-this.lastZoomScale);this.lastZoomScale=d}return c},doZoom:function(a){if(a){a=this.scale.x+a/100;var c=a-this.scale.x,d=this.imgTexture.width*this.scale.x,e=this.imgTexture.height*this.scale.y,g=this.imgTexture.width*c,k=this.imgTexture.height*c,
c=this.position.x+-(-this.position.x+this.canvas.clientWidth/2)/d*g,m=this.position.y+-(-this.position.y+this.canvas.clientHeight/2)/e*k,d=d+g,e=e+k;d<this.canvas.clientWidth||(0<c&&(c=0),c+d<this.canvas.clientWidth&&(c=this.canvas.clientWidth-d),e<this.canvas.clientHeight||(0<m&&(m=0),m+e<this.canvas.clientHeight&&(m=this.canvas.clientHeight-e),this.scale.x=a,this.scale.y=a,this.position.x=c,this.position.y=m))}},doMove:function(a,c){if(this.lastX&&this.lastY){var d=c-this.lastY,e=this.imgTexture.width*
this.scale.x,g=this.imgTexture.height*this.scale.y;this.position.x+=a-this.lastX;this.position.y+=d;0<this.position.x?this.position.x=0:this.position.x+e<this.canvas.clientWidth&&(this.position.x=this.canvas.clientWidth-e);0<this.position.y?this.position.y=0:this.position.y+g<this.canvas.clientHeight&&(this.position.y=this.canvas.clientHeight-g)}this.lastX=a;this.lastY=c},setEventListeners:function(){this.canvas.addEventListener("touchstart",function(a){this.lastZoomScale=this.lastY=this.lastX=null}.bind(this));
this.canvas.addEventListener("touchmove",function(a){a.preventDefault();if(2==a.targetTouches.length)this.doZoom(this.gesturePinchZoom(a));else if(1==a.targetTouches.length){var c=a.targetTouches[0].pageX-this.canvas.getBoundingClientRect().left;a=a.targetTouches[0].pageY-this.canvas.getBoundingClientRect().top;this.doMove(c,a)}}.bind(this));this.desktop&&(window.addEventListener("keyup",function(a){187==a.keyCode||61==a.keyCode?this.doZoom(5):54==a.keyCode&&this.doZoom(-5)}.bind(this)),window.addEventListener("mousedown",
function(a){this.mdown=!0;this.lastY=this.lastX=null}.bind(this)),window.addEventListener("mouseup",function(a){this.mdown=!1}.bind(this)),window.addEventListener("mousemove",function(a){var c=a.pageX-this.canvas.getBoundingClientRect().left,d=a.pageY-this.canvas.getBoundingClientRect().top;a.target==this.canvas&&this.mdown&&this.doMove(c,d);if(0>=c||c>=this.canvas.clientWidth||0>=d||d>=this.canvas.clientHeight)this.mdown=!1}.bind(this)))},checkRequestAnimationFrame:function(){for(var a=0,c=["ms",
"moz","webkit","o"],d=0;d<c.length&&!window.requestAnimationFrame;++d)window.requestAnimationFrame=window[c[d]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[c[d]+"CancelAnimationFrame"]||window[c[d]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(c,d){var k=(new Date).getTime(),m=Math.max(0,16-(k-a)),w=window.setTimeout(function(){c(k+m)},m);a=k+m;return w});window.cancelAnimationFrame||(window.cancelAnimationFrame=function(a){clearTimeout(a)})}};
this.ImgTouchCanvas=a}).call(this);function pinchit(){console.log("pinch");new ImgTouchCanvas({canvas:document.getElementById("mycanvas"),path:"images/MostPopular.jpg",desktop:!0});gotoView(currentView,"pinchtest")};function LoginAlogin(){runInWebview?(dojo.byId("introbuttons-text").innerHTML="Log in using",dojo.style("Introbuttons","display","block"),window.logintype="login",window.introclicktime=(new Date).getTime()):gotoView(currentView,"newLogin")}function LoginAsignup(){runInWebview?(dojo.byId("introbuttons-text").innerHTML="Sign up using",dojo.style("Introbuttons","display","block"),window.logintype="signup",window.introclicktime=(new Date).getTime()):gotoView(currentView,"registeruser")}
function closeLogin(){var a=(new Date).getTime();void 0!=window.introclicktime&&a-window.introclicktime<window.boucingTime||"login"!=window.logintype&&"signup"!=window.logintype||(dojo.style("Introbuttons","display","none"),window.logintype="none")}
function Nlogin(a){"email"==a?"login"==logintype?(gotoView(currentView,"newLogin"),dojo.byId("loginEmail").value="",dojo.byId("loginPassword").value=""):"signup"==logintype&&gotoView(currentView,"registeruser"):"facebook"==a?FBlogin():"google"==a&&Googlelogin();closeLogin()};window.photoimport=function(a){if("flickr"==a){calliOSFunction("loadLink",["http://ancient-caverns-7624.herokuapp.com/flickr?email="+window.email],"onSuccess","onError");try{Android.loadLink("http://ancient-caverns-7624.herokuapp.com/flickr?email="+window.email)}catch(b){}}if("smugmug"==a){calliOSFunction("loadLink",["http://ancient-caverns-7624.herokuapp.com/smugmug?email="+window.email],"onSuccess","onError");try{Android.loadLink("http://ancient-caverns-7624.herokuapp.com/smugmug?email="+window.email)}catch(c){}}if("facebook"==
a){calliOSFunction("importFbPhotos",[],"onSuccess","onError");try{Android.importFbPhotos()}catch(d){}}if("instagram"==a){calliOSFunction("loadLink",["http://ancient-caverns-7624.herokuapp.com/instagram?email="+window.email],"onSuccess","onError");try{Android.loadLink("http://ancient-caverns-7624.herokuapp.com/instagram?email="+window.email)}catch(e){}}if("picasa"==a){calliOSFunction("loadLink",["http://ancient-caverns-7624.herokuapp.com/picasa?email="+window.email],"onSuccess","onError");try{Android.loadLink("http://ancient-caverns-7624.herokuapp.com/picasa?email="+
window.email)}catch(g){}}if("dropbox"==a){calliOSFunction("loadLink",["http://ancient-caverns-7624.herokuapp.com/dropbox?email="+window.email],"onSuccess","onError");try{Android.loadLink("http://ancient-caverns-7624.herokuapp.com/dropbox?email="+window.email)}catch(k){}}};function removePlayerconfirm(){$("#CancelremoveTVbutton").click(function(){return!1});$("#removeTVbutton").click(function(a){a.stopImmediatePropagation()});dijit.registry.byId("ConfirmTVDelete").show()}
function removePlayer(){var a=(new Date).getTime();void 0!=window.rmplayerClickTime&&7E3>a-window.rmplayerClickTime||(window.rmplayerClickTime=a,dijit.registry.byId("ConfirmTVDelete").hide(),key=window.currentplayer.account,dojo.io.script.get({url:base+"player/removePlayer?email="+window.email+"&playerId="+key+"&token="+window.token,callbackParamName:"callback",timeout:8E3,trytimes:5,error:function(a){console.log("timeout!removePlayer"+url);this.trytimes--;0<this.trytimes?dojo.io.script.get(this):
alert("Network problem19. Please check your connection and restart the app.")},load:function(a){"success"==a.Status&&(usermessage(a.Message),"chromecast"!=window.currentplayer.account.substr(0,10)&&"Artkick"!=window.currentplayer.account.substr(0,7)||dialDeletePlayer(window.currentplayer.dialuuid),window.numberPlayers--,delete selectedPlayers[currentplayer.account],rememberSelectPlayers(!0),dojo.destroy(dojo.byId("s"+currentplayer.account)));gotoView("TVDetail","select_player2")}}))}
function addUserToPlayers(){var a=(new Date).getTime();void 0!=window.addUserClickTime&&a-window.addUserClickTime<window.boucingTime||(window.addUserClickTime=a,a=dojo.byId("addPlayerEmail").value,""==a?myalert("You must first search for an Artkick user to add them to a player"):(key=window.currentplayer.account,dojo.io.script.get({url:base+"player/addUserToPlayer?queryEmail="+a+"&playerId="+key+"&token="+window.token+"&myEmail="+window.email,callbackParamName:"callback",load:function(a){usermessage(a.Message);
dojo.byId("addPlayerEmail").value=""}})))}function adduserPlayer(){dijit.registry.byId("SearchUser").show()}
function searchUser(){var a=(new Date).getTime();void 0!=window.searchuClickTime&&a-window.searchuClickTime<window.boucingTime||(window.searchuClickTime=a,a=dojo.byId("addPlayerEmail").value,dojo.io.script.get({url:base+"player/getUser?queryEmail="+a+"&token="+window.token+"&myEmail="+window.email,callbackParamName:"callback",timeout:8E3,trytimes:5,error:function(a){console.log("timeout!getUser"+url);this.trytimes--;0<this.trytimes?dojo.io.script.get(this):alert("Network problem20. Please check your connection and restart the app.")},
load:function(a){"success"==a.Status?(dijit.registry.byId("SearchUser").hide(),addUserToPlayers()):alert(a.Message)}}))}
function createPlayer(){var a=(new Date).getTime();void 0!=window.createPlayerClickTime&&a-window.createPlayerClickTime<window.boucingTime||(window.createPlayerClickTime=a,""==dojo.byId("regPlayerCode").value?alert("Player Code cannot be blank"):""==dojo.byId("regPlayerName").value?myalert("You must name your Roku"):(dijit.registry.byId("registernewroku"),dojo.io.script.get({url:base+"reg/userReg?regCode="+dojo.byId("regPlayerCode").value.toLowerCase()+"&nickname="+dojo.byId("regPlayerName").value+
"&email="+window.email+"&token="+window.token,callbackParamName:"callback",load:function(a){"success"==a.Status?(myalert("Player "+dojo.byId("regPlayerName").value+" is now registered!"),console.log("number players:"+window.numberplayers),0==window.numberplayers&&(console.log("new player"),window.tarImage=window.defImage,window.currList=window.defList,window.currCat=window.defCat),window.numberplayers++,window.justCreatePlayer=!0,window.autoIntro=!0,dojo.byId("regPlayerCode").value="",dojo.byId("regPlayerName").value=
"",window.shuffle&&mediashuffle(),updatePlayers(),dojo.byId("regPlayerCode").value="",dojo.byId("regPlayerName").value="",dojo.style(dojo.byId("registernewroku"),"display","none"),gotoView("registernewchromecast","blankview"),window.switchView=!0):alert(a.Message)}})))}
function createPlayer2(){var a=(new Date).getTime();void 0!=window.createPlayerClickTime&&a-window.createPlayerClickTime<window.boucingTime||(window.createPlayerClickTime=a,""==dojo.byId("regPlayerCode2b").value?myalert("Registration Code cannot be blank"):(dijit.registry.byId("registernewTV"),dojo.io.script.get({url:base+"reg/userReg?regCode="+dojo.byId("regPlayerCode2b").value.toLowerCase()+"&nickname="+NewPlayerName+"&email="+window.email+"&token="+window.token+"&uuid="+window.playeruuid,callbackParamName:"callback",
load:function(a){"success"==a.Status?(myalert("Player "+dojo.byId("regPlayerName").value+" is now registered!"),0==window.numberplayers&&(window.tarImage=window.defImage,window.currList=window.defList,window.currCat=window.defCat),window.numberplayers++,window.justCreatePlayer=!0,window.autoIntro=!0,window.justLogin=!1,1==window.shuffle&&mediashuffle(),dojo.byId("regPlayerCode2").value="",dojo.byId("regPlayerName2").value="",dojo.style(dojo.byId("registernewTV"),"display","none"),a=a.account,console.log("playeracct="+
a),selectedPlayers[a]=1,rememberSelectPlayers(!0),gotoView("RegCodeInstall","blankview"),window.switchView=!0,syncImage()):myalert(a.Message)}})))}function regnewroku(){dijit.registry.byId("registernewplayer").performTransition("registernewroku",1,"slide",null)}function installartkick(){calliOSFunction("loadLink",["https://owner.roku.com/add/T2ZAW"],"onSuccess","onError");try{Android.loadLink("https://owner.roku.com/add/T2ZAW")}catch(a){}}
function setAuto2(a,b){window.currentplayer=window.playerlist[b.substr(2)];setAuto(a)}
function setOrientation(a){console.log("set orientation to:"+a);key=window.currentplayer.account;dojo.io.script.get({url:base+"client/setOrientation?email="+window.email+"&snumber="+key+"&orientation="+a+"&token="+window.token,callbackParamName:"callback",timeout:8E3,trytimes:5,error:function(a){console.log("timeout!setAuto"+url);this.trytimes--;0<this.trytimes?dojo.io.script.get(this):alert("Network problem22a. Please check your connection and restart the app.")},load:function(a){usermessage("Orientation set")}})}
function setAuto(a){key=window.currentplayer.account;dojo.io.script.get({url:base+"client/setAuto?email="+window.email+"&snumber="+key+"&autoInterval="+a+"&token="+window.token,callbackParamName:"callback",timeout:8E3,trytimes:5,error:function(a){console.log("timeout!setAuto"+url);this.trytimes--;0<this.trytimes?dojo.io.script.get(this):alert("Network problem22. Please check your connection and restart the app.")},load:function(b){usermessage("Slideshow set");currentplayer.autoInterval=a}})}
function setOverlay(a){key=window.currentplayer.account;dojo.io.script.get({url:base+"client/setOverlay?email="+window.email+"&snumber="+key+"&overlay="+a+"&token="+window.token,callbackParamName:"callback",timeout:8E3,trytimes:5,error:function(a){console.log("timeout!setOverlay"+url);this.trytimes--;0<this.trytimes?dojo.io.script.get(this):alert("Network problem22b. Please check your connection and restart the app.")},load:function(b){usermessage("Display Logo set to "+a);currentplayer.logoOn=a}})}
function setStretch(a){key=window.currentplayer.account;dojo.io.script.get({url:base+"client/setStretch?email="+window.email+"&snumber="+key+"&Stretch="+a+"&token="+window.token,callbackParamName:"callback",timeout:8E3,trytimes:5,error:function(a){console.log("timeout!setStretch"+url);this.trytimes--;0<this.trytimes?dojo.io.script.get(this):alert("Network problem22a. Please check your connection and restart the app.")},load:function(b){usermessage("Aspect set");currentplayer.stretch=a}})}
function fillswitch(){window.fill?(dojo.byId("fillswitch4").setAttribute("src","images/checkbox_on.png"),setStretch(!1),window.playerlist[window.currentplayerID].stretch=!1,window.fill=!1):(window.fill=!0,dojo.byId("fillswitch4").setAttribute("src","images/checkbox_off.png"),window.playerlist[window.currentplayerID].stretch=!0,setStretch(!0));syncImage()}
function showlogo(){window.logo?(dojo.byId("fillswitch5").setAttribute("src","images/checkbox_off.png"),setOverlay(!1),window.playerlist[window.currentplayerID].logoOn=!1,window.logo=!1):(window.logo=!0,dojo.byId("fillswitch5").setAttribute("src","images/checkbox_on.png"),window.playerlist[window.currentplayerID].logoOn=!0,setOverlay(!0));syncImage()}
function setCaption(a){key=window.currentplayer.account;dojo.io.script.get({url:base+"client/hideCaption?email="+window.email+"&snumber="+key+"&hide="+a+"&token="+window.token,callbackParamName:"callback",timeout:8E3,trytimes:5,error:function(a){console.log("timeout!setStretch"+url);this.trytimes--;0<this.trytimes?dojo.io.script.get(this):alert("Network problem22c. Please check your connection and restart the app.")},load:function(b){usermessage("Display Captions set to "+!a);currentplayer.hide_caption=
a}})}function showcaptions(){window.hidecaption?(dojo.byId("fillswitch6").setAttribute("src","images/checkbox_on.png"),setCaption(!1),window.playerlist[window.currentplayerID].hide_caption=!0,window.hidecaption=!1):(window.hidecaption=!0,dojo.byId("fillswitch6").setAttribute("src","images/checkbox_off.png"),window.playerlist[window.currentplayerID].hide_caption=!1,setCaption(!0));syncImage()}
function burninsaver(){var a=dijit.registry.byId("burninsaver"),b=document.getElementById("AutoPlaySelect"),c=document.getElementById("AutoPlayFixed");window.burn?(a.set("label","Not Active"),b.style.visibility="visible",c.style.visibility="hidden",window.burn=!1):(a.set("label","Active"),b.style.visibility="hidden",c.style.visibility="visible",setAuto(36E5),window.burn=!0)}
function mediashuffle(){window.shuffle?(window.shuffle=!1,dijit.registry.byId("shuffletab").set("label","Shuffle"),$("#myshuffle").removeClass("mblTabBarButtonLabel2"),usermessage("Shuffle OFF")):(window.shuffle=!0,dijit.registry.byId("shuffletab").set("label","Shuffle On"),$("#myshuffle").addClass("mblTabBarButtonLabel2"),usermessage("Shuffle ON"));gotoView("ImageView","blankview");window.switchView=!0;updateImages(-1)}
function playerDetail(a){console.log("details clicked for player"+window.playerlist[a.substr(2)].nickname);window.currentplayer=window.playerlist[a.substr(2)];window.currentplayerID=a.substr(2);currentplayer.autoInterval||(currentplayer.autoInterval=0);currentplayer.stretch||(currentplayer.stretch=!1);currentplayer.logoOn||(currentplayer.logoOn=!1);currentplayer.hide_caption||(currentplayer.hide_caption=!1);currentplayer.orientation||(currentplayer.orientation="horizontal");$("#slideshowvalue").val(currentplayer.autoInterval);
dojo.byId("devicepencil").setAttribute("src","images/pencil2-gray.png");window.fill=currentplayer.stretch;window.fill?dojo.byId("fillswitch4").setAttribute("src","images/checkbox_off.png"):dojo.byId("fillswitch4").setAttribute("src","images/checkbox_on.png");window.logo=currentplayer.logoOn;window.logo?dojo.byId("fillswitch5").setAttribute("src","images/checkbox_on.png"):dojo.byId("fillswitch5").setAttribute("src","images/checkbox_off.png");window.hidecaption=currentplayer.hide_caption;window.hidecaption?
dojo.byId("fillswitch6").setAttribute("src","images/checkbox_off.png"):dojo.byId("fillswitch6").setAttribute("src","images/checkbox_on.png");$("#orientationValue2").val(currentplayer.orientation);dojo.byId("playerDetailsName").value=currentplayer.nickname;"chromecast"==currentplayer.account.substr(0,10)||"Artkick"==currentplayer.account.substr(0,7)?dojo.style("Orientation","display","block"):dojo.style("Orientation","display","none");dojo.byId("originalName")&&(currentplayer.originalName?(dojo.style("originalName",
"display","block"),dojo.byId("originalName").innerHTML=currentplayer.originalName):dojo.style("originalName","display","none"));gotoView(currentView,"TVDetail")}
window.countplayers=function(){thisurl=base+"player/getPlayers?email="+window.email+"&token="+window.token;dojo.io.script.get({url:thisurl,callbackParamName:"callback",timeout:8E3,trytimes:5,error:function(a){console.log("timeout!Getplayers  "+thisurl);this.trytimes--;0<this.trytimes?dojo.io.script.get(this):alert("Network problem12. Please check your connection and restart the app.")},load:function(a){window.numberplayers=a.players.length;console.log("players #:"+window.numberplayers)}})};
window.changeplayerstatus=function(a){console.log("change player status for id="+a.substr(3));for(var b in playerlist)playerlist[b].account==a.substr(3)&&(console.log("playstate="+(("stopped"==playerlist[b].state||"unknown"==playerlist[b].state)&&playerlist[b].uuid&&"unknown"!=playerlist[b].uuid)),"stopped"==playerlist[b].state||"unknown"==playerlist[b].state?selectedPlayers[a.substr(3)]||playerClick("icon"+a.substr(3),!0):(window.currList=playerlist[b].curr_listId,window.currCat="Home",gotoView(currentView,
"blankview"),window.switchView=!0,updateImages(playerlist[b].curr_image.id)))};window.showAutoplay=function(a){var b="never";switch(a){case "0":b="Off";break;case "-1":b="Every Morning";break;case "30000":b="30 Seconds";break;case "60000":b="Minute";break;case "120000":b="2 Minutes";break;case "300000":b="5 Minutes";break;case "600000":b="10 Minutes";break;case "1800000":b="30 Minutes";break;case "3600000":b="Hour";break;case "43200000":b="12 Hours"}return b};
window.playerClick=function(a,b){console.log("playerclick: "+a);var c="s"+a.substr(4),d=a.substr(4).trim();mid="icon"+d;console.log("playerclick id "+c+" xid "+d);var e=dojo.byId("ptitle"+d).innerHTML;if(selectedPlayers[d])document.getElementById(mid).setAttribute("src","images/CheckBox25x25.png"),window.playerSet[c]=!1,usermessage("Stopped controlling "+e),delete selectedPlayers[d];else{for(var g in playerlist)if(playerlist[g].account==d&&playerlist[g].dialuuid){console.log("trying to restart "+
playerlist[g].nickname);selectedPlayers[d]=1;b||usermessage("Now controlling "+e);"running"!=playerlist[g].state?(rememberSelectPlayers(!1),window.dialLaunchSerial=playerlist[g].account,dialLaunch(playerlist[g].dialuuid,e)):(rememberSelectPlayers(!0),b||usermessage("Now controlling "+e));return}document.getElementById(mid).setAttribute("src","images/CheckMark25x25.png");selectedPlayers[d]=1;b||usermessage("Now controlling "+e)}rememberSelectPlayers(!0);loadmetadata()};
function devicenamechange(){dojo.byId("devicepencil").setAttribute("src","images/pencil2.png")}
function renameDevice(){var a=window.currentplayer.account,b=dojo.byId("playerDetailsName").value;dojo.io.script.get({url:base+"client/renamePlayer?email="+window.email+"&snumber="+a+"&name="+b+"&token="+window.token,callbackParamName:"callback",timeout:8E3,trytimes:5,error:function(a){console.log("timeout!setStretch"+url);this.trytimes--;0<this.trytimes?dojo.io.script.get(this):alert("Network problem22d. Please check your connection and restart the app.")},load:function(a){usermessage("Renamed '"+
window.currentplayer.nickname+"' to '"+b+"'");playerlist[window.currentplayerID].originalname=window.currentplayer.nickname;playerlist[window.currentplayerID].nickname=b;dojo.byId("ptitle"+playerlist[window.currentplayerID].account).innerHTML=b}})}function findactivePlayer(){for(var a in playerlist){var b=playerlist[a];b.account in selectedPlayers&&(window.activeplayer=b.nickname)}};function callstore(){hidemenu();console.log("loadStore");if(runInWebview){calliOSFunction("loadStore",[],"onSuccess","onError");try{Android.loadStore()}catch(a){}}}function editstore(){hidemenu();console.log("editStore");if(runInWebview){calliOSFunction("editStore",[],"onSuccess","onError");try{Android.editStore()}catch(a){}}}
function completeTransaction(a,b,c,d){"Getty_Upgrade"==a?standby6.hide():standby5.hide();if(!b&&0>c.indexOf("apple.store"))usermessage("Successfully renewed "+a),refreshView();else if(!b&&-1<c.indexOf("apple.store")&&!restoreTrans&&usermessage("Successfully renewed (as)"+a),window.guest&&c&&d&&(window.token=d,window.userID=c,window.email=c,setCookie("email",c,365),setCookie("token",d,365),subscriptions[0]=a),window.restoreTrans)usermessage("Artkick subscriptions restored"),window.restoreTrans=!1,
subscriptions[0]=a,refreshView();else{if("Getty_All2"==a||"Getty_All3"==a||"Getty_All4"==a)a="Getty_All";mysub=a.split("_");$("#gettydefault").html("");newsub=mysub[1];"All"==newsub&&b&&(gettyDefault("Entertainment"),gettyDefault("News"),gettyDefault("Sports"),window.waitingid=["Getty","Sports"]);subscriptions[0]=a;subscription_categories();waitfordone()}}
function waitfordone(){if("undefined"===typeof window.doneid||"none"==dojo.style(window.doneid,"display"))setTimeout(waitfordone,1E3);else{console.log("finished");delete window.doneid;window.restart=!1;var a=dojo.byId("gettydefault").getElementsByTagName("div");dojo.style("inappsubscribe","display","none");for(var b=0;b<a.length;b+=1)if("gettyDefaultClass5"==a[b].className&&(a[b].innerHTML=""),"gettyDefaultClass4"==a[b].className){a[b].innerHTML="";domname=a[b].id.substr(5);var c=dojo.create("div",
{innerHTML:"Go to Getty "+a[b].id.substr(6),className:"gettyDefaultClass7",id:"gdefault"+a[b].id.substr(6),onclick:function(){window.currCat="Getty "+this.id.substr(8);dojo.style(dojo.byId("GettyLoadDefault"),"display","none");window.restart=!1;gotoCategory(window.currCat)}},a[b]);blk=dojo.create("div",{className:"gettyDefaultClass8"},c);dojo.create("img",{src:"images/getty_g.png",width:"25px"},blk);bcolor="#47c16a";"Entertainment"==a[b].id.substr(6)?bcolor="#a431b2":"News"==a[b].id.substr(6)&&(bcolor=
"#f2ac3d");dojo.style(c,"background-color",bcolor)}}}function setSubs(a){(window.gettysubscribe=a)&&usermessage("you are now subscribed to Getty Images");dojo.io.script.get({url:"http://infinite-anchorage-8570.herokuapp.com/android/setSubs?email="+window.email+"&token="+window.token+"&subs="+a,callbackParamName:"callback",load:function(a){}})}function createoption(a){dojo.create("option",{value:"Getty "+a,label:"Search Getty "+a},"searchSelectValue3");window.searchoptionexist+=a}
function subscription_categories(){dojo.style("GettyEntertainment-Sample","display","block");dojo.style("GettyNews-Sample","display","block");dojo.style("GettySports-Sample","display","block");dojo.style("GettyEntertainment","display","none");dojo.style("GettyNews","display","none");dojo.style("GettySports","display","none");if(0!=window.subscriptions.length)if(-1<window.subscriptions.indexOf("Getty_All"))dojo.style("GettyEntertainment-Sample","display","none"),dojo.style("GettyNews-Sample","display",
"none"),dojo.style("GettySports-Sample","display","none"),dojo.style("GettyEntertainment","display","block"),0>window.searchoptionexist.indexOf("Entertainment")&&createoption("Entertainment"),dojo.style("GettyNews","display","block"),0>window.searchoptionexist.indexOf("News")&&createoption("News"),dojo.style("GettySports","display","block"),0>window.searchoptionexist.indexOf("Sports")&&createoption("Sports");else for(i in subscriptions)mysub=subscriptions[i].split("_"),"Getty"==mysub[0]&&(dojo.style("Getty"+
mysub[1],"display","block"),dojo.style("Getty"+mysub[1]+"-Sample","display","none"),searchoptionexist!=mysub[1]&&createoption(mysub[1]),window.searchoptionexist=mysub[1])}
function setmysubs(a){dojo.style("GettyEntertainment-Sample","display","block");dojo.style("GettyNews-Sample","display","block");dojo.style("GettySports-Sample","display","block");dojo.style("GettyEntertainment","display","none");dojo.style("GettyNews","display","none");dojo.style("GettySports","display","none");a?(console.log("Inapp subscribing to: "+window.newgettysubscription),window.freeTrialEligible?StartFreeTrial(window.newgettysubscription):InAppSubscribe(window.newgettysubscription)):(InAppSubscribe("Getty_Upgrade"),
console.log("upgrade subscription"))}function InAppSubscribe(a){console.log("doing an inapp subscription to "+a);if(runInWebview){"Getty_Upgrade"==a?standby6.show():standby5.show();"IOS"==window.platform?usermessage("Waiting for the iTunes Store"):"Android"==window.platform&&usermessage("Waiting for the Google Play Store");calliOSFunction("gettysubscribe",[a],"onSuccess","onError");try{Android.gettysubscribe(a)}catch(b){}}else open("http://www.artkick.com/subscribe","_blank")}
window.failTransaction=function(){"InAppSubscribe"==currentView?(standby5.hide(),myalert("Subscription failed")):"InAppSubscribe2"==currentView?(standby6.hide(),myalert("Subscription upgrade failed")):(window.restoreTrans?(myalert("Restore purchase failed"),window.restoreTrans=!1):myalert("Subscription renewal failed"),refreshView())};function DoSubscribe(){console.log("do subscribe called");gotoView(window.currentView,"InAppSubscribe")}
function restoreTransaction(){"IOS"==window.platform&&(window.restoreTrans=!0,gotoView(window.currentView,"blankview"),usermessage("Contacting App Store to restore your subscription"),calliOSFunction("restoreTransaction",[],"onSuccess","onError"))}
function StartFreeTrial(a){console.log("starting free trial for: "+a);var b=base+"client/freeSubs?email="+window.email+"&token="+window.token;dojo.io.script.get({url:b,callbackParamName:"callback",timeout:8E3,trytimes:5,error:function(a){console.log("timeout!feedback"+b);this.trytimes--;0<this.trytimes?dojo.io.script.get(this):alert("Problem with setting freeSubs. Please check your connection and restart the app.")},load:function(a){}});standby5.show();completeTransaction("Getty_All4",!0,"test","test")}
window.msToTime=function(a){a=(a-a%1E3)/1E3;a=(a-a%60)/60;var b=a%60;a=(a-b)/60;var c=a%24;a=(a-c)/24;return 0<a?a+" day ago":0<c?c+" hr ago":0<b?b+" min ago":"Just now"};window.reghelp=function(a){"Samsung"==a&&myalert("Available on recent Samsung TVs (others soon)<br>Install Artkick from the Samsung Store<br> Access the store by clicking the SmartHub button on your remote, then scroll through the applications and click the Artkick Icon. Start Artkick and a registration code will appear on your screen");"Sony"==a&&myalert("Install Artkick by first going to the Opera Store. Access the store by clicking the SEN button on your remote, then scroll through the applications and click the Opera Store Icon.  Then search for Artkick and click to install the Artkick application. Start Artkick and a registration code will appear on your screen");
"Sharp"==a&&myalert("Open SmartCentral, click Social and Life icon and click the Artkick icon. A registration code will appear");"AppleTV"==a&&myalert("Open IOS Control Center<br>Tap Airplay<br>Choose which AppleTV & Turn on Airplay Mirroring");"Roku"==a&&myalert("Install the Artkick channel on your Roku by searching for Artkick and click to install the Artkick channel. Start Artkick and a registration code will appear on your screen");"Browser"==a&&myalert("Use Artkick with any PC/Mac or tablet browser.  Goto browser.artkick.net, enter the email you registered with Artkick and a registration code will appear on your screen");
"LG"==a&&myalert('Available on LG Smart TVs. Click Smart TV, select "more" at bottom of page, search for Artkick and install. Start Artkick and registration code will display');"Chromecast"==a&&dijit.registry.byId(window.currentView).performTransition("registernewchromecast",1,"",null)};function usersearch(){var a,b="strangeone;Banksy;Pablo Picasso;Picasso;Nan Goldin;Pierre Soulages;Andy Warhol;Warhol;Victor Vasarely;Jackson Pollock;Emil Nolde;Hans Erni;Roy Lichtenstein;Lichtenstein;Gregory Crewdson;Bernard Buffet;Nobuyoshi Araki;Damien Hirst;Yayoi Kusama;Salvador Dal\u00ed;Bert Stern;Keith Haring;Gerhard Richter;Michael Dweck;Alexander Calder;Henri Matisse;Matisse;Vik Muniz;Wayne Thiebaud;Robert Mapplethorpe;Jean-Michel Basquiat;Georges Rouault;Sally Mann;Thomas Ruff;Frank Stella;David Hockney;Takashi Murakami;Marc Chagall;Chagall;Andreas Gursky;Florence Knoll;Alex Katz;Lee Krasner;Sigmar Polke;Cy Twombly;Jeff Koons;Riusuke Fukahori;Shepard Fairey;Liu Bolin;Ed Ruscha;Andy Goldsworthy;KAWS;Cindy Sherman;Robert Motherwell;Tom Wesselmann;Lucio Fontana;Robert Rauschenberg;Rauschenberg;Robert Indiana;Joan Mitchell;Carlos Cruz-Diez;Elizabeth Peyton;Jim Dine;Franz Kline;Chuck Close;Dale Chihuly;Chihuly;Mike Kelley;Massimo Vitali;Romero Britto;Donald Judd;Nick Brandt;Yoshitomo Nara;Richard Serra;Robert Longo;Peter Max;Diego Rivera;Andres Serrano;Yves Klein;Raymond Pettibon;Ai Weiwei;Grayson Perry;John McLaughlin;Man Ray;John Baldessari;Christopher Wool;Richard Estes;Anselm Kiefer;Helmut Newton;Mario Carre\u00f1o;Curtis Jere;Jean Dubuffet;Josef Albers;Hans Prentzel;Milton Avery;Henry Moore;Annie Leibovitz;Louise Nevelson;Shirin Neshat;Sol LeWitt;Anne Aarsland;Marilyn Minter;Francis Bacon;Sam Francis;George Condo;Yue Minjun;Max Ernst;Marcel Delmotte;Anish Kapoor;Elizabeth Catlett;Jean Paul Riopelle;Mel Bochner;G\u00fcnther F\u00f6rg;George Grosz;Yang Yongliang;Mel Ramos;Neo Rauch;Retna;Imi Knoebel;Jasper Johns;James Milton Sessions;Roberto Matta;Paul Jenkins;Arman;Hans Hartung;Lyonel Feininger;Joseph Beuys;LeRoy Neiman;Andr\u00e9 Lhote;Irving Penn;Donald Baechler;Franz Gertsch;Marc Quinn;Manolo Vald\u00e9s;Ranulph Bye;Zhang Daqian;Wade Guyton;Peter Beard;Carlo Mense;Alex Prager;Erwin Wurm;Os G\u00eameos;Janet Fish;Heinz Mack;Norbert Bisky;Richard Avedon;Jos\u00e9 Bedia;Richard Hamilton;Bill Henson;Louis Icart;Louise Bourgeois;Pat Steir;Mark Tobey;Francisco Z\u00fa\u00f1iga;Max Liebermann;James Rosenquist;Georges Braque;Jean Prouv\u00e9;Lucien Clergue;Anna Gasteiger;Antonio Bueno;Barbara Kruger;Brice Marden;Patrick Caulfield;JonOne;Kiki Smith;Zhang Dali;Richter;Robert Cottingham;Frank Bauer;Beatriz Milhazes;Joseph Piccillo;Pedro Pablo Oliva;Albert Oehlen;Alberto Giacometti;Giacometti;Richard Tuttle;Julie Mehretu;Ellen von Unwerth;Max Pechstein;Rainer Fetting;Henri Lebasque;Matisse;A. Keller;Andr\u00e9 Masson;Aya Takano;Robert Combas;Hannah H\u00f6ch;James Nares;Paul McCarthy;Kehinde Wiley;Lee Ufan;Pierre et Gilles;Jamali;Jack Pierson;Jason Martin;Nils Kreuger;Carl Andre;Wifredo Lam;Fritz Scholder;Anthony Caro;Franz West;Barbara Hepworth;Barry McGee;Armando Rever\u00f3n;David Hammons;Elisabeth Schima;Eug\u00e8ne Atget;Yoko Ono;Martin Sharp;Barry Flanagan;Brassa\u00ef;Pierre Bonnard;Ralph Gibson;Louis Valtat;Vija Celmins;Hunt Slonem;Jenny Holzer;CRASH;Albert Lang;Adam Neate;Ugo Rondinone;Willy Daro;Rebecca Morris;Sam Gilliam;Norbert Prangenberg;Ushio Shinohara;Callum Innes;Hernan Bas;Gillian Ayres;Hyo Myoung Kim;Faile;Balthus;Cleve Gray;Elvira Bach;Kcho;Dieter Roth;Jing Kewen;Howard Hodgkin;Walker Evans;Wim Delvoye;Omar Ronda;On Kawara;Red Grooms;Ori Gersht;Jaume Plensa;Willi Baumeister;Irving Amen;Henry Scott;Kenneth Noland;Mark Francis;Theodor Ott;Yoichi Ohira;Ken Price;Jean Pougny;Lars Thorsen;Catherine Lee;Claudia Hart;Gabriele M\u00fcnter;Vibeke Tandberg;Victor Man;Jef Aerosol;Gio Ponti;Peter Funch;Speedy Graphito;Wang Yachen;Todd James;Christian Soclet;TAKI 183;Sophie Calle;Hermann Kaulbach;Kiki Kogelnik;Gaetano Pesce;Comte;Le Corbusier;Peter Weber;Miklos Ga\u00e1l;Martha Walter;Konrad Klapheck;Eyvind Earle;Francesco Vecellio;Ernst Wilhelm Nay;Edward Bawden;Xu Bing;Max Ackermann;Lionel Smit;Josef von Brandt;Lia Cook;Fritz K\u00f6the;Joe Goode;C\u00e9sar;Frida Kahlo;John Tweddle;Robert Barry;Ruth Duckworth".split(";");
if(""!=gettyEditorial)gettyusersearch();else if(a=(new Date).getTime(),!(void 0!=window.searchClickTime&&7E3>a-window.searchClickTime)&&(window.searchClickTime=a,a=dojo.byId("searchbox2").value,dojo.style("searchresults","display","none"),""!=a))if(dijit.registry.byId("IVGettySearchBox").hide(),0<b.join("~").toLowerCase().split("~").indexOf(a.toLowerCase()))b="Artworks by "+a+" are under copyright.",console.log("artist: "+a+" is under copyright"),dojo.byId("copyrightartist").innerHTML=b,dijit.registry.byId("Copyright").show(),
dojo.byId("searchbox2").value="";else{var c="http://gentle-crag-2965.herokuapp.com/joint/search?email="+window.email+"&keyword="+a+"&token="+window.token+"&domain="+window.searchdomain+"&orientation="+searchEditorialOrientation;v=0;replacesearchID&&""!=window.replacesearchID&&(c+="&listId="+window.replacesearchID);dojo.style("searchprogressdiv","display","block");var d=setInterval(function(){progressBar2.set("value",v);progressBar2.set("label",v+"%");100<=v&&clearTimeout(d);v+=10},450);dojo.io.script.get({url:c,
callbackParamName:"callback",timeout:2E4,trytimes:5,error:function(a){console.log("timeout!search"+c);this.trytimes--;0<this.trytimes?dojo.io.script.get(this):alert("Network problem31. Please check your connection and restart the app.")},load:function(a){if(a.listId&&0<a.listId.imageNum){var b=a.listId.imageNum;dojo.style("searchprogressdiv","display","none");dojo.byId("searchresults").innerHTML=b+" images found and saved in 'My Searches'";dojo.style("searchresults","display","block");gotoView(window.currentView,
"SearchView");$("#searchGrid").css("top","160px");window.currCat="My Searches";window.searchboxshow=!1;progressBar2.set("value",100);progressBar2.set("label","Complete");clearTimeout(d);window.currList=a.listId.id;window.currViewList="Last Search";window.currGridList=-1;dojo.empty(searchGrid);window.moregridpages=!0;dojo.create("div",{},searchGrid);0<a.listId.imageNum&&loadGrid(0,searchGrid,a.listId.id)}else progressBar2.set("value",100),progressBar2.set("label","Complete"),clearTimeout(d),"no image found!"==
a.Message?(dojo.style("searchprogressdiv","display","none"),dojo.byId("searchresults").innerHTML="No matching images found",dojo.style("searchresults","display","block"),setTimeout(function(){dijit.registry.byId("SearchBox").show();window.searchboxshow=!0},2E3)):myalert(a.Message),dojo.byId("searchbox2").value="";"ImageView"==currentView?dojo.style("SearchBox","top","60px"):dojo.style("SearchBox","top","46px");updateUserStatus()}})}}
function showsearch(a){if(window.guest)guestmessage(),window.guestmenu=!0;else{hidemenu();window.gettydomain="";dojo.empty(searchGrid);dojo.style("searchresults","display","none");dojo.byId("searchbox2").value="";dojo.byId("gettysearchbox").value="";progressBar1.set("value",0);progressBar1.set("label","0%");progressBar2.set("value",0);progressBar2.set("label","0%");isGetty=!1;a&&"Getty"==a.substr(0,5)?isGetty=!0:a&&"Getty"!=a.substr(0,5)?isGetty=!1:"Getty"!=window.currCat.substr(0,5)||"PlaylistView"!=
currentView&&"ImageView"!=currentView||(isGetty=!0);if(isGetty)switch(a?window.gettydomain=a.substr(6).toLowerCase():(window.gettydomain=currCat.substr(6).toLowerCase(),$("#searchSelectValue3").val(currCat)),dojo.style("SearchBox","height","240px"),$("#gettybuttons").show(),$("#dateValue").val("Any"),$("#orientationValue").val("Any"),$("#BestOfValue").val("Bestof"),window.gettyBestOf="Bestof",window.bestofflag=!1,bestofswitch(),gettydomain){case "news":window.gettyEditorial="News";dojo.byId("searchbox2").placeholder=
"News event, Figure";break;case "entertainment":window.gettyEditorial="Entertainment&EditorialSegments=Royalty&EditorialSegments=Publicity";dojo.byId("searchbox2").placeholder="Celebrity, Royal, Event";break;case "sports":window.gettyEditorial="Sports",dojo.byId("searchbox2").placeholder="Sports team, Player, Event"}else $("#orientationValue3").val("Any"),window.searchEditorialOrientation="Any",$("#normalbuttons").show(),dojo.style("SearchBox","height","180px"),window.gettyEditorial="",dojo.byId("searchbox2").placeholder=
"Artist Name, Genre, Museum",a?(window.searchdomain=a.toLowerCase(),$("#searchSelectValue3").val(a)):"Photography"==currCat?(window.searchdomain="photography",$("#searchSelectValue3").val("Photography")):(window.searchdomain="fine art",$("#searchSelectValue3").val("Fine Art")),$("#gettybuttons").hide();dijit.registry.byId("SearchBox").show();window.searchboxshow=!0;window.replacesearchID="";"ImageView"==currentView?dojo.style("SearchBox","top","60px"):dojo.style("SearchBox","top","46px");window.searchboxshow=
!0}}function clearsearch(){dojo.byId("searchbox2").value=""}
function updateUserStatus(){dojo.io.script.get({url:base+"client/getUserStatus?email="+window.email+"&token="+window.token,callbackParamName:"callback",timeout:8E3,trytimes:5,error:function(a){console.log("timeout!getUserStatus"+url);this.trytimes--;0<this.trytimes?dojo.io.script.get(this):alert("Network problem5a. Please check your connection and restart the app.")},load:function(a){console.log("getUserStatus from search:"+a.Status);"success"==a.Status?(window.gettylists=a.gettyLists?a.gettyLists:
"",window.searchlists=a.searchLists?a.searchLists:""):console.log("failed user status")}})}function setSearchSelection(a){a?showsearch(a):window.searchboxshow?(dijit.registry.byId("SearchBox").hide(),window.searchboxshow=!1):showsearch()}function cancelsearch(){"SearchView"==currentView?gotoView(currentView,lastView):(dijit.registry.byId("SearchBox").hide(),window.searchboxshow=!1)}
function setEditorialOrientation2(a){console.log("Editorial search domain: "+a);window.searchEditorialOrientation=a};function get_short_url(a,b,c,d){$.getJSON("https://api-ssl.bitly.com/v3/shorten?callback=?",{access_token:window.api_key,longUrl:a},function(a){window.response1=a;console.log("resp:"+window.response1);d(a.data.url)})}
function emailShare(){imageurl=imageMap[currImage].thumbnail;imageMap[currImage].waterMark&&(imageurl=imageMap[currImage].waterMark);if("Last Search"==window.currViewList)myalert("You can't share the Last Search Viewlist");else{var a;a="http://prod.artkick.net?currList="+encodeURIComponent(currList)+"&currImage="+encodeURIComponent(currImage)+"&currCat="+encodeURIComponent(currCat);var b='This is from the viewlist "'+dojo.byId("imageListName").innerHTML+'" one of my favorites, click the link below to see it.  Discover and collect, view and share half a million great images of great art and photography.  Check them out!';
console.log("long:"+a+" Image="+imageurl);get_short_url(a,login,api_key,function(a){console.log("short"+a);if(runInWebview){calliOSFunction("email",["I want you to see this image from Artkick",a,encodeURIComponent(imageurl),b],"onSuccess","onError");try{Android.share("I want you to see this image from Artkick",a,imageurl,b)}catch(d){}setTimeout(function(){hidemenu()},1E3)}else stWidget.addEntry({service:"email",element:document.getElementById("EMweb"),url:a,title:"I want you to see this image from Artkick",
type:"large",text:b,image:imageurl,summary:b})})}}
function otherShare(){imageurl=imageMap[currImage].thumbnail;imageMap[currImage].waterMark&&(imageurl=imageMap[currImage].waterMark);if("Last Search"==window.currViewList)myalert("You can't share the Last Search Viewlist");else{var a;a="http://prod.artkick.net?currList="+encodeURIComponent(currList)+"&currImage="+encodeURIComponent(currImage)+"&currCat="+encodeURIComponent(currCat);console.log("long:"+a);get_short_url(a,login,api_key,function(a){console.log("short"+a);calliOSFunction("gmail",["I want you to see this image from Artkick",
a,encodeURIComponent(imageurl),'This is from the viewlist "'+dojo.byId("imageListName").innerHTML+'" one of my favorites, click the link below to see it.  Discover and collect, view and share half a million great images of great art and photography.  Check them out!'],"onSuccess","onError");try{Android.share("I want you to see this image from Artkick",a,imageurl,'This is from the viewlist "'+dojo.byId("imageListName").innerHTML+'" one of my favorites, click the link below to see it.  Discover and collect, view and share half a million great images of great art and photography.  Check them out!')}catch(c){}setTimeout(function(){hidemenu()},
1E3)})}}
function twitter(){imageurl=imageMap[currImage].thumbnail;imageMap[currImage].waterMark&&(imageurl=imageMap[currImage].waterMark);if("Last Search"==window.currViewList)myalert("You can't share the Last Search Viewlist");else{dojo.byId("imageListName");var a;a="http://prod.artkick.net?currList="+encodeURIComponent(currList)+"&currImage="+encodeURIComponent(currImage)+"&currCat="+encodeURIComponent(currCat);get_short_url(a,login,api_key,function(a){calliOSFunction("twitter",["I love this image from Artkick",a,
encodeURIComponent(imageurl),"I love this image from Artkick. Discover, Collect, View, Share. Free art and photos. @artkicktv #freeart"],"onSuccess","onError");try{Android.twitter("I love this image from Artkick @artkicktv #freeart",a,imageurl,"Discover, Collect, View, Share. Free art and photos. @artkicktv #freeart")}catch(c){}setTimeout(function(){hidemenu()},1E3)})}}
function facebook(){imageurl=imageMap[currImage].thumbnail;imageMap[currImage].waterMark&&(imageurl=imageMap[currImage].waterMark);if("Last Search"==window.currViewList)myalert("You can't share the Last Search Viewlist");else{var a='This is from the viewlist "'+dojo.byId("imageListName").innerHTML+'" one of my favorites, click the image to see it.  ',b;b="http://prod.artkick.net?currList="+encodeURIComponent(currList)+"&currImage="+encodeURIComponent(currImage)+"&currCat="+encodeURIComponent(currCat);
get_short_url(b,login,api_key,function(b){if(runInWebview){calliOSFunction("facebook",["Artkick rocks",b,encodeURIComponent(imageurl),"I love this image from Artkick @artkicktv.  Discover, Collect, View&Share. Thousands of free images - art and photographs. Check them out!"],"onSuccess","onError");try{Android.facebook("I love this image from Artkick @artkicktv.  Discover, Collect, View&Share. Thousands of free images - art and photographs. Check them out!",b,imageurl,"Artkick rocks")}catch(d){}setTimeout(function(){hidemenu()},
1E3)}else FB.ui({method:"feed",name:"I love this image from Artkick @artkicktv",link:b,picture:imageurl,caption:a,description:"Discover and collect, view and share half a million great images of great art and photography.  Check them out!"},function(a){a&&a.post_id?usermessage("Post was published."):myalert("Post was not published.")})})}};function like(a){console.log(a);window.guest?(guestmessage(),window.guestmenu=!0):imageMap[a].like?(imageMap[a].like=!1,console.log("dislike"),imageMap[a].likeNum--,document.getElementById("img"+a).src="images/like.png",document.getElementById("likeNum"+a).innerHTML=imageMap[a].likeNum+" likes",document.getElementById("likeWord"+a).innerHTML="Like",document.getElementById("likeWord"+a).className="likeSpan",dojo.io.script.get({url:base+"client/likeImage?email="+window.email+"&imageId="+a+"&token="+
window.token+"&like=0",callbackParamName:"callback",timeout:8E3,trytimes:5,error:function(a){},load:function(a){}})):(console.log("like"),usermessage("Added to 'My Viewlists'"),imageMap[a].like=!0,imageMap[a].likeNum++,document.getElementById("img"+a).src="images/like white.png",document.getElementById("likeNum"+a).innerHTML=imageMap[a].likeNum+" likes",document.getElementById("likeWord"+a).innerHTML="Like",document.getElementById("likeWord"+a).className+=" selfLike",dojo.io.script.get({url:base+
"client/likeImage?email="+window.email+"&imageId="+a+"&token="+window.token+"&like=1",callbackParamName:"callback",timeout:8E3,trytimes:5,error:function(a){},load:function(a){}}))}function share(){window.guest?(guestmessage(),window.guestmenu=!0):showsharemenu()}function shareVL(){newid=window.thislist.id;dijit.registry.byId("viewlistMenu").hide();console.log("sharing viewlist "+thislist.name);window.VLsharing=!0;loadImages(-1,1,15,1);showsharemenu()}
function comment(){if(window.guest)guestmessage(),window.guestmenu=!0;else{gotoView("ImageView","show_comments");commentList.destroyDescendants();for(var a in imageMap[currImage].comments){var b=imageMap[currImage].comments[a].text,c="<b>"+imageMap[currImage].comments[a].user_name+"</b>",d=(new Date).getTime()-imageMap[currImage].comments[a].time_stamp,d=msToTime(d),e=imageMap[currImage].comments[a].comment_id;console.log("showing comments i="+a+" id="+e);imageMap[currImage].comments[a]["delete"]||
(imageMap[currImage].comments[a].user_id==window.userID||window.isAdmin?(console.log("mycomment:"+b),li=new dojox.mobile.ListItem({id:"comment"+e,label:c+"<br>"+b+"<br><span class='timestamp'>"+d+"</span>",onClick:function(){ShowDeleteComment(this.id)},variableHeight:!0,checked:!1,checkClass:"images/blank.png",rightIcon2:"images/Trash_25x25.png",itemid:this})):(console.log("comment:"+b),li=new dojox.mobile.ListItem({id:"comment"+e,label:c+"<br>"+b,variableHeight:!0,checked:!1})),commentList.addChild(li))}}}
function deletecomment(){var a=base+"client/deleteComment?email="+window.email+"&token="+window.token+"&imageId="+window.currImage+"&comment_id="+window.commentfordeleteid;console.log("deleting comment:"+a);dijit.registry.byId("DeleteComment").hide();dojo.io.script.get({url:a,callbackParamName:"callback",load:function(a){"success"!=a.Status&&myalert(a.Message)}});a=$("#comment_list")[0];console.log("element count="+a.childElementCount);for(var b=0;b<a.childElementCount;b++)playerId=a.childNodes[b].id,
console.log("id="+playerId),playerId.substr(7)==window.commentfordeleteid&&(dijit.registry.remove(playerId),a.removeChild(a.childNodes[b]),console.log(" delete i= "+b),imageMap[window.currImage].comments[b]["delete"]=!0);imageMap[window.currImage].commentNum--;document.getElementById("commentNum"+window.currImage).innerHTML=imageMap[window.currImage].commentNum+" comments";console.log("delete comment:"+window.commentfordeleteid)}
function CreateComment(a){var b="";if("Cancel"==a)dijit.registry.byId("AddComment").hide(),window.showAddComment=!1;else if(b=dojo.byId("CommentText").value,""==b)alert("Comment cannot be blank");else{var c;dojo.io.script.get({url:base+"client/commentImage?email="+window.email+"&token="+window.token+"&imageId="+window.currImage+"&text="+b,callbackParamName:"callback",load:function(a){"success"==a.Status?(c=a.comment_id,dijit.registry.byId("AddComment").hide(),window.showAddComment=!1,console.log("new comment with id="+
c),imageMap[window.currImage].commentNum++,document.getElementById("commentNum"+window.currImage).innerHTML=imageMap[window.currImage].commentNum+" comments",li=new dojox.mobile.ListItem({id:"Comment"+c,label:"<b>"+window.userName+"</b><br>"+b+"<br><span class='timestamp'>Just now</span>",onClick:function(){ShowDeleteComment(this.id)},variableHeight:!0,checked:!1,checkClass:"images/blank.png",rightIcon2:"images/Trash_25x25.png"}),commentList.addChild(li),imageMap[window.currImage].comments.push({text:b,
user_name:window.userName,user_id:window.userID,comment_id:c,time_stamp:(new Date).getTime()}),dojo.byId("CommentText").value="",a=dijit.byId("show_comments").containerNode,dojo.setStyle(a,{webkitTransform:"",top:200,left:0})):alert(a.Message)}})}}function ShowNewComment(){dijit.registry.byId("AddComment").show();window.showAddComment=!0}function ShowDeleteComment(a){window.commentfordeleteid=a.substr(7);dijit.registry.byId("DeleteComment").show()}
function SampleLink(){var a;a="http://prod.artkick.net/index-V3.1.html?currList="+encodeURIComponent(currList)+"&currImage="+encodeURIComponent(currImage)+"&currCat="+encodeURIComponent(currCat);myalert(a)};function emailPwLogout(){dijit.registry.byId(window.currentView);window.email=null;setCookie("email",null,1);setCookie("token",null,1);gotoView(currentView,"newLogin");cleanUp()}
function emailPW(){window.currentView="reset_password";is_email(dojo.byId("recoveryEmail").value)?dojo.io.script.get({url:base+"client/emailPassword?email="+dojo.byId("recoveryEmail").value,callbackParamName:"callback",timeout:8E3,trytimes:5,error:function(a){console.log("timeout!emailPassword"+url);this.trytimes--;0<this.trytimes?dojo.io.script.get(this):alert("Network problem23. Please check your connection and restart the app.")},load:function(a){myalert(a.Message);"success"==a.Status&&emailPwLogout()}}):
myalert("Please enter a valid email address")}function changePwLogout(){window.currentView="AccountSettings";var a=dijit.registry.byId("AccountSettings");window.email=null;setCookie("email",null,1);setCookie("token",null,1);a.performTransition("Login",1,"",null);cleanUp()}
function changePW(){window.currentView="AccountSettings";var a="",b="",c="",a=dojo.byId("changeOldPW").value,b=dojo.byId("changeNewPW1").value,c=dojo.byId("changeNewPW2").value;b!=c?myalert("Passwords don't match!"):dojo.io.script.get({url:base+"client/resetPassword?email="+window.email+"&oldpassword="+a+"&newpassword="+b,callbackParamName:"callback",timeout:8E3,trytimes:5,error:function(a){console.log("timeout!resetPassword"+url);this.trytimes--;0<this.trytimes?dojo.io.script.get(this):alert("Network problem24. Please check your connection and restart the app.")},
load:function(a){myalert(a.Message);"success"==a.Status&&(dojo.byId("changeOldPW").value="",dojo.byId("changeNewPW1").value="",dojo.byId("changeNewPW2").value="",changePwLogout())}})}function is_email(a){return/^([\w!.%+\-])+@([\w\-])+(?:\.[\w\-]+)+$/.test(a)}
function createUser(){window.currentView="registeruser";dijit.registry.byId("registeruser");var a="",b="",a=dojo.byId("regUserPW").value.trim(),b=dojo.byId("regUserPW2").value.trim();""==a?myalert("Password cannot be blank"):a!=b?myalert("Passwords don't match"):(b=dojo.byId("regUserEmail").value.trim(),console.log("user email="+b),""==b?myalert("User email cannot be blank"):is_email(b)?""==dojo.byId("regUserName").value?myalert("User name cannot be blank"):dojo.io.script.get({url:base+"client/regUser?email="+
dojo.byId("regUserEmail").value+"&name="+dojo.byId("regUserName").value+"&password="+a,callbackParamName:"callback",timeout:8E3,trytimes:5,error:function(a){console.log("timeout!regUser"+url);this.trytimes--;0<this.trytimes?dojo.io.script.get(this):alert("Network problem24. Please check your connection and restart the app.")},load:function(a){if("success"==a.Status){usermessage("Welcome "+dojo.byId("regUserName").value+"!");window.userName=dojo.byId("regUserName").value;window.email=dojo.byId("regUserEmail").value.replace(/^\s\s*/,
"").replace(/\s\s*$/,"").toLowerCase();if(runInWebview){calliOSFunction("setemail",[window.email],"onSuccess","onError");try{Android.setEmail(window.email)}catch(b){}}window.token=a.token;window.userID=a.id;setCookie("email",window.email,365);setCookie("token",a.token,365);dojo.byId("regUserPW").value="";dojo.byId("regUserPW2").value="";dojo.byId("regUserName").value="";dojo.byId("regUserEmail").value="";$("#MyViewlists").show();$("#MySearchlists").show();$("#searchbox").show();window.currentView=
"registeruser";window.firstimageview=!1;gotoView("registeruser","select_category")}else myalert(a.Message)}}):myalert("User email must be a valid email address"))}function dologout(){window.currentView="LogOff";dijit.registry.byId("LogOff");window.email=null;if(runInWebview){try{Android.clearCookie()}catch(a){}calliOSFunction("clearCookie",[],"onSuccess","onError")}setCookie("email",null,1);setCookie("token",null,1);cleanUp();gotoView("AccountSettings","IntroA")}
function goToReg1(){window.currentView="registeruser";dijit.registry.byId("IntroA").getShowingView().performTransition("registeruser",1,"",null)}function goToLogin1(){window.currentView="newLogin";dijit.registry.byId("IntroA").getShowingView().performTransition("newLogin",1,"",null)}
function login(){var a=(new Date).getTime();void 0!=window.loginClickTime&&a-window.loginClickTime<window.boucingTime||(window.loginClickTime=a,dojo.style("searchmenu","display","block"),is_email(dojo.byId("loginEmail").value)?(dijit.registry.byId("Login"),dojo.io.script.get({url:base+"client/login?email="+dojo.byId("loginEmail").value+"&password="+dojo.byId("loginPassword").value,callbackParamName:"callback",timeout:8E3,trytimes:5,error:function(a){console.log("timeout!email"+url);this.trytimes--;
0<this.trytimes?dojo.io.script.get(this):alert("Network problem25. Please check your connection and restart the app.")},load:function(a){if("success"==a.Status){userObj=a.userObj;usermessage("Welcome! "+userObj.name);window.shuffle=!1;window.email=dojo.byId("loginEmail").value.replace(/^\s\s*/,"").replace(/\s\s*$/,"").toLowerCase();if(runInWebview){try{Android.setEmail(window.email)}catch(c){}calliOSFunction("setemail",[window.email],"onSuccess","onError")}window.token=a.token;window.userName=userObj.name;
window.userID=a.userObj.id;window.isAdmin=a.userObj.isAdmin;setCookie("email",window.email,365);setCookie("token",a.token,365);dojo.byId("loginEmail").value="";dojo.byId("loginPassword").value="";$("#MyViewlists").show();$("#MySearchlists").show();$("#searchbox").show();window.afterLogin()}else myalert("login failed, please check your email and password or register!")}})):myalert("Please enter a valid email address"))}
function goToReg(){window.currentView="registeruser";dijit.registry.byId("Login").performTransition("registeruser",1,"",null)}function goToresetpassword(){window.currentView="reset_password";dijit.registry.byId("newLogin").performTransition("reset_password",1,"",null)}
function deleteAccount(){dijit.registry.byId("registeruser");window.currentView="AccountSettings";url=base+"client/removeUser?email="+dojo.byId("deleteAcctEmail").value+"&password="+dojo.byId("deleteAcctPW").value+"&token="+window.token;dojo.io.script.get({url:url,callbackParamName:"callback",timeout:8E3,trytimes:5,error:function(a){console.log("timeout!removeUser"+url);this.trytimes--;0<this.trytimes?dojo.io.script.get(this):alert("Network problem26. Please check your connection and restart the app.")},
load:function(a){"success"==a.Status?(dijit.registry.byId("LogOff"),myalert(window.email+" your account was successfully deleted"),window.email=null,setCookie("email",null,1),setCookie("token",null,1),dojo.byId("deleteAcctEmail").value="",dojo.byId("deleteAcctPW").value="",gotoView("AccountSettings","blankview"),cleanUp(),setTimeout(function(){gotoView("blankview","newLogin")},500)):myalert("Delete Account failed, please check your email and password")}})}
function hiresswitch(){dijit.registry.byId("hires-switch");window.highresolution?(dojo.byId("hires-switch").setAttribute("src","images/checkbox_off.png"),window.highresolution=!1):(window.highresolution=!0,dojo.byId("hires-switch").setAttribute("src","images/checkbox_on.png"));dojo.io.script.get({url:base+"client/setresolution?email="+window.email+"&token="+window.token+"&highres="+window.highresolution,callbackParamName:"callback",load:function(a){console.log(a.Message)}})}
function Guest1(){window.currentView="Intro1";GuestLogin()}function Guest2(){window.currentView="Intro2";GuestLogin()}function Guest3(){window.currentView="Intro3";GuestLogin()}
window.GuestLogin=function(){window.guest=!0;window.email="guest@guest.guest";window.token="guest";window.activeplayer="No TV Selected";window.subscriptions=[];window.newgettysubscription="Getty_All4";dojo.style("searchmenu","display","none");$("#MyViewlists").hide();$("#MySearchlists").hide();$("#searchbox").hide();dijit.registry.byId("Login");dojo.io.script.get({url:base+"client/login?email=guest@guest.guest&password=guest",callbackParamName:"callback",timeout:8E3,trytimes:5,error:function(a){console.log("timeout!email"+
url);this.trytimes--;0<this.trytimes?dojo.io.script.get(this):alert("Network problem25. Please check your connection and restart the app.")},load:function(a){if("success"==a.Status){userObj=a.userObj;window.shuffle=!1;if(runInWebview){try{Android.setEmail(window.email)}catch(b){}calliOSFunction("setemail",[window.email],"onSuccess","onError")}dojo.byId("loginEmail").value="";dojo.byId("loginPassword").value="";window.tarImage=-1;dojo.style("gettyad","display","block");window.AdInterval=setInterval(changeAd,
5E3);window.afterLogin()}else myalert("login failed, please check your email and password or register!")}})};function FBlogin(){gotoView(currentView,"blankview2");window.blankview2up=!0;calliOSFunction("callFbLogin",[],"onSuccess","onError");try{Android.callFbLogin()}catch(a){}}function Googlelogin(){gotoView(currentView,"blankview2");window.blankview2up=!0;calliOSFunction("callGoogleLogin",[],"onSuccess","onError");try{Android.callGoogleLogin()}catch(a){}}
function continueLogin(a,b){setCookie("email",a,365);setCookie("token",b,365);window.tarImage=-1;window.justLogin=!0;checkCookie()}function nativelink(a){calliOSFunction("loadLink",[a],"onSuccess","onError");try{Android.loadLink(a)}catch(b){}}function showterms(){window.lastView="registeruser";showiframe("terms of service.htm")}function showprivacy(){window.lastView="registeruser";showiframe("privacy.htm")};function showmyviewlists(){var a=0;window.MyViewlist.destroyDescendants();$("#MyViewLists").html("");standby3.show();dojo.io.script.get({url:base+"user/getMyViewlists?email="+window.email+"&token="+window.token,callbackParamName:"callback",timeout:8E3,trytimes:5,error:function(a){console.log("timeout!getMyViewlists"+url);this.trytimes--;0<this.trytimes?dojo.io.script.get(this):alert("Network problem28. Please check your connection and restart the app.")},load:function(b){b=b.viewlists;var c=dojo.create("div",
{className:"mblListItem2",onclick:function(){CreateUserList()}},"MyViewLists");dojo.create("img",{src:"images/add.png",width:"20px",style:"position:relative;top:-6px"},c);dojo.create("span",{innerHTML:"Create New Viewlist",className:"adddevice"},c);dojo.style(c,"height","35px");for(var d in b)"Last Search"!=b[d].name&&b[d].private_user==window.email&&(a+=1,window.shownoviewlist=!0,c=dojo.create("div",{id:b[d].id,title:b[d].name,className:"mblListItem2",onclick:function(){AddImageToViewlist(this.id,
this.title)}},"MyViewLists"),dojo.style(c,"height","75px"),dojo.create("img",{src:b[d].coverImage,className:"pvlIcon"},c),dojo.create("span",{innerHTML:b[d].name,className:"pvlTitle"},c),dojo.create("div",{innerHTML:b[d].imageNum+" images",className:"pvlTitle2"},c));0==a&&0==window.shownoviewlist&&(window.shownoviewlist=!0,myalert("Tap '+ Create New Viewlist' to create personal viewlists"));standby3.hide()}})}function CreateUserList(){dijit.registry.byId("AddUserList").show()}
function CreateNewViewlist(a){var b="";if("Cancel"==a)dijit.registry.byId("AddUserList").hide();else if(b=dojo.byId("NewListName").value,""==b)myalert("Viewlist name cannot be blank");else{var c;dojo.io.script.get({url:base+"user/createMyViewlist?email="+window.email+"&listName="+b+"&token="+window.token,callbackParamName:"callback",load:function(a){"success"==a.Status?(c=a.listId,AddImageToViewlist(c,b)):alert(a.Message)}});dijit.registry.byId("AddUserList").hide();dojo.byId("NewListName").value=
""}}function AddImageToViewlist(a,b){hidemenu();dojo.io.script.get({url:base+"user/addImageToMyViewlist?email="+window.email+"&listId="+a+"&imgId="+window.currImage+"&token="+window.token,callbackParamName:"callback",load:function(a){"success"==a.Status?usermessage(imageMap[currImage].Title+" added to viewlist: "+b):alert(a.Message)}});gotoView("MylistView","ImageView")}function DonePersonalViewlists(){console.log("donePersonalViewlists");hidemenu();gotoView("MylistView","ImageView")}
window.editmyviewlists=function(){console.log("editmyviewlists");window.MyViewlistEdit.destroyDescendants();standby2.startup();standby2.show();$("#MyViewListsEdit").html("");dojo.io.script.get({url:base+"user/getMyViewlists?email="+window.email+"&token="+window.token+"&category="+editmylistdomain,callbackParamName:"callback",timeout:8E3,trytimes:5,error:function(a){console.log("timeout!getMyViewlists"+url);this.trytimes--;0<this.trytimes?dojo.io.script.get(this):alert("Network problem28a. Please check your connection and restart the app.")},
load:function(a){a=a.viewlists;for(var b in a)"Last Search"!=a[b].name&&(window.shownoviewlist=!0,vtitle=a[b].name,a[b].private_user!=window.email&&(vtitle+="<small><i>(subscribed)</i></small>"),newline=dojo.create("div",{id:"my"+a[b].id,className:"mblListItem3"},"MyViewListsEdit"),dojo.create("span",{innerHTML:vtitle},newline),icons=dojo.create("div",{},newline),dojo.create("img",{id:"my2"+a[b].id,className:"iconclass4",src:"images/Trash_25x25_gray_on_black.png",onclick:function(){ShowdeleteMyViewlist(this.id)}},
icons),a[b].private_user==window.email&&"My Viewlists"==currCat&&(dojo.create("span",{id:"my3"+a[b].id,innerHTML:"Rename",className:"mybclass2",onclick:function(){ShowRenameMyViewlist(this.id)}},icons),dojo.create("span",{id:"my4"+a[b].id,innerHTML:"Images",className:"mybclass2",onclick:function(){EditMyViewlistImages(this.id)}},icons)));standby2.hide()}})};
function ShowdeleteMyViewlist(){newid=window.thislist.id;dijit.registry.byId("viewlistMenu").hide();console.log("showdeletemyviewlist:"+newid);dojo.byId("deleteVLname").innerHTML="unknown";window.viewlistfordelete=newid;dojo.byId("deleteVLname").innerHTML="'"+window.thislist.name+"'?";dijit.registry.byId("DeleteViewlist").show()}
function deleteMyViewlist(a){dijit.registry.byId("DeleteViewlist").hide();dojo.io.script.get({url:base+"user/removeMyViewlist?email="+window.email+"&listId="+window.viewlistfordelete+"&token="+window.token,callbackParamName:"callback",load:function(a){"success"==a.Status||"successs"==a.Status?gotoCategory(currCat):myalert(a.Message)}})}
function ShowRenameMyViewlist(a){newid="my"+a.substr(3);window.viewlistforrename=newid;vlname=dojo.byId(newid).innerHTML.substr(6);lastchar=vlname.indexOf("<");label1=vlname.substr(0,lastchar);dojo.byId("RenameVLname").innerHTML="'"+label1+"'?";dijit.registry.byId("RenameViewlist").show()}
function RenameMyViewlist(){dijit.registry.byId("RenameViewlist").hide();newname=dojo.byId("newVLname").value;dojo.io.script.get({url:base+"user/renameMyViewlist?email="+window.email+"&listId="+viewlistforrename+"&token="+window.token+"&newname="+newname,callbackParamName:"callback",load:function(a){"success"==a.Status?gotoCategory("My Viewlists"):myalert(a.Message)}});dojo.byId("newVLname").value=""}
function ShowRenameMyViewlist2(){dijit.registry.byId("viewlistMenu").hide();window.viewlistforrename=window.thislist.id;vlname=window.thislist.name;dojo.byId("RenameVLname").innerHTML="'"+vlname+"'?";dijit.registry.byId("RenameViewlist").show()};window.msToTime=function(a){return 0<days?days+" day ago":0<hrs?hrs+" hr ago":0<mins?mins+" min ago":"Just now"};window.showURL=function(a){dojo.io.script.get({url:"http://en.wikipedia.org/w/api.php?action=parse&format=json&prop=text&page="+a,callbackParamName:"callback",load:function(a){window.webcontents=a.parse.text["*"];dojo.byId("wikicontents").innerHTML=window.webcontents;gotoView(currentView,"wikic")}})};
function submenuclick(a){window.guest?(guestmessage(),window.guestmenu=!0):(window.thislist=lists[a.substr(3)],console.log("submenuclick for "+thislist.name),window.currList=thislist.id,thislist.curatornote?dojo.style("vlCurator","display","block"):dojo.style("vlCurator","display","none"),isAdmin?dojo.byId("vlmname").innerHTML=thislist.name+"-"+thislist.id:dojo.byId("vlmname").innerHTML=thislist.name,dojo.style("vlRename","display","none"),dojo.style("vlDelete","display","none"),dojo.style("vlEdit",
"display","none"),dojo.style("vlAdd","display","block"),"My Viewlists"==currCat&&(dojo.style("vlRename","display","none"),dojo.style("vlDelete","display","block"),dojo.style("vlEdit","display","none"),dojo.style("vlAdd","display","none")),"Getty"==currCat.substr(0,5)||"My Searches"==window.currCat?(dojo.style("vlRename","display","none"),dojo.style("vlDelete","display","block"),dojo.style("vlEdit","display","none"),dojo.style("vlAdd","display","none")):thislist.private_user==window.email&&(dojo.style("vlRename",
"display","block"),dojo.style("vlDelete","display","block"),dojo.style("vlEdit","display","block"),dojo.style("vlAdd","display","none")),dijit.registry.byId("viewlistMenu").show())}function showCuratorNotes(){dijit.registry.byId("viewlistMenu").hide();dojo.byId("cn-vlmname").innerHTML=thislist.name;dojo.byId("showCuratorNotes").innerHTML=thislist.curatornote;dijit.registry.byId("CuratorNotes").show()}
function addViewlist(){console.log("adding "+thislist.name);dijit.registry.byId("viewlistMenu").hide();dojo.io.script.get({url:base+"user/addMyViewlist?email="+window.email+"&listId="+thislist.id+"&token="+window.token,callbackParamName:"callback",load:function(a){"success"==a.Status?(usermessage("Viewlist "+window.thislist.name+" added to My Viewlists!"),"Home"==currCat?updateCats():gotoCategory(currCat)):myalert(a.Message)}})};window.wifisearch=function(a){jsonStr=a?a:'[{"ssid":"Saddle23","hasKey":true,"connected":true},{"ssid":"Saddle2","hasKey":true},{"ssid":"DIRECT-roku-970-985519","hasKey":false},{"ssid":"DIRECT-roku-746","hasKey":true},{"ssid":"DIRECT-QW-BRAVIA","hasKey":true},{"ssid":"Saddle2","hasKey":true},{"ssid":"DIRECT-PH-VIZIOTV","hasKey":false},{"ssid":"Saddle3","hasKey":true}]';dijit.registry.byId("ScanNetwork").hide();window.indialLaunch=!1;window.wifiMap=JSON.parse(jsonStr);window.ScanwifiComplete=!0;a=
0;$("#wifinames").html("");for(var b in wifiMap){console.log("network "+wifiMap[b].ssid);iconsrc="images/lock.png";var c=dojo.create("div",{id:"wifiz"+b,onclick:function(){wificonnect(this.id)}},"wifinames");c.setAttribute("class","wifilist");iconsrc="images/lock.png";dojo.create("span",{id:"dialq"+b,className:"playertitleclass2a",innerHTML:wifiMap[b].ssid},c);wifiMap[b].hasKey&&dojo.create("img",{id:"wifix"+b,className:"iconclass4",zindex:950,src:iconsrc},c);a++}gotoView(currentView,"select_wifi")};
function wificonnect(a){idx=a.substr(5);window.ssidconnect=wifiMap[idx].ssid;dojo.byId("wifipswd").value="";wifiMap[idx].hasKey?(dojo.byId("ssidname").innerHTML=wifiMap[idx].ssid,dijit.registry.byId("wifiPassword").show()):NetworkConnect(!1)}
function NetworkConnect(a){if(a){pwd=dojo.byId("wifipswd").value;if(""==pwd.length){myalert("password cannot be blank");return}dijit.registry.byId("wifiPassword").hide();calliOSFunction("connectWifi",[ssidconnect,window.email,pwd],"onSuccess","onError");try{Android.connectWiFfi(uuid,email,pwd)}catch(b){}}else{pwd="";dijit.registry.byId("wifiPassword").hide();calliOSFunction("connectWifi",[ssidconnect,window.email],"onSuccess","onError");try{Android.connectWiFfi(uuid,window.email)}catch(c){}}dojo.byId("scanid").innerHTML=
"Connecting to wifi network, Please wait";dijit.registry.byId("ScanNetwork").show();console.log("NetworkConnect for SSID: "+window.ssidconnect+" pwd: "+pwd)}
window.artkick_notify=function(a){dijit.registry.byId("ScanNetwork").hide();jsonStr=a?a:'{"type":"wificonnection","connected":true}';window.notifyMap=JSON.parse(jsonStr);"wificonnection"==notifyMap.type&&notifyMap.connected?(usermessage("Successfully connected"),setTimeout(function(){dijit.registry.byId("wifiPassword").hide();window.indialLaunch&&updatePlayers();gotoView(currentView,"select_category")},3E3)):"wificonnection"!=notifyMap.type||notifyMap.connected||(usermessage("wifi connection failed, try again"),
dojo.byId("wifipswd").value="",dijit.registry.byId("wifiPassword").show())};
